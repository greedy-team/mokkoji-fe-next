name: GitHub ‚Üí Discord (Embed Style)

on:
  issues:
    types: [opened, reopened]
  pull_request:
    types: [opened, reopened]
  push:

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord Notification
        env:
          DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
        run: |
          EVENT_NAME=${{ github.event_name }}

          # ÏÉâÏÉÅ Í∏∞Î≥∏Í∞í (ÌöåÏÉâ)
          COLOR=9807270

          if [ "$EVENT_NAME" = "issues" ]; then
            COLOR=15844367   # ÎÖ∏Îûë (0xf39c12)
            TITLE="üüß Issue: ${{ github.event.issue.title }}"
            DESCRIPTION="${{ github.event.issue.body }}"
            URL="${{ github.event.issue.html_url }}"
          elif [ "$EVENT_NAME" = "pull_request" ]; then
            COLOR=3066993    # Ï¥àÎ°ù (0x2ecc71)
            TITLE="üü© Pull Request: ${{ github.event.pull_request.title }}"
            DESCRIPTION="${{ github.event.pull_request.body }}"
            URL="${{ github.event.pull_request.html_url }}"
          elif [ "$EVENT_NAME" = "push" ]; then
            COLOR=3447003    # ÌååÎûë (0x3498db)
            TITLE="üü¶ Push to ${{ github.ref_name }}"
            DESCRIPTION="${{ github.event.head_commit.message }}"
            URL="${{ github.event.compare }}"
          fi

          # Discord Webhook Î∞úÏÜ°
          curl -H "Content-Type: application/json" \
               -X POST \
               -d "{
                     \"embeds\": [{
                       \"title\": \"$TITLE\",
                       \"description\": \"$DESCRIPTION\",
                       \"url\": \"$URL\",
                       \"color\": $COLOR,
                       \"footer\": { \"text\": \"GitHub ‚Üí Discord\" },
                       \"timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\"
                     }]
                   }" \
               $DISCORD_WEBHOOK_URL
