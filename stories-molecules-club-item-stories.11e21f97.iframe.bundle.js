"use strict";(self.webpackChunkmokkoji_fe_migration=self.webpackChunkmokkoji_fe_migration||[]).push([[217],{"./.storybook/server-only-mock.js":module=>{module.exports={}},"./src/shared/lib/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var clsx__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs"),tailwind_merge__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/tailwind-merge@3.3.1/node_modules/tailwind-merge/dist/bundle-mjs.mjs");const __WEBPACK_DEFAULT_EXPORT__=function cn(...inputs){return(0,tailwind_merge__WEBPACK_IMPORTED_MODULE_0__.QP)((0,clsx__WEBPACK_IMPORTED_MODULE_1__.$)(inputs))}},"./src/shared/ui/avatar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{BK:()=>AvatarImage,eu:()=>Avatar,q5:()=>AvatarFallback});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/compiled/react/jsx-runtime.js"),_radix_ui_react_avatar__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./node_modules/.pnpm/@radix-ui+react-avatar@1.1.10_@types+react-dom@19.1.7_@types+react@19.1.9__@types+react@19.1._5qc66ks5idtunqcw6cbfdp4iwy/node_modules/@radix-ui/react-avatar/dist/index.mjs")),_shared_lib_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/shared/lib/utils.ts"),next_image__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@storybook+nextjs@8.6.14_esbuild@0.25.8_next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9_jq2zn6l4kjngzuzeicrydsk5t4/node_modules/@storybook/nextjs/dist/images/next-image.mjs");function Avatar({className,...props}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_avatar__WEBPACK_IMPORTED_MODULE_3__.bL,{"data-slot":"avatar",className:(0,_shared_lib_utils__WEBPACK_IMPORTED_MODULE_4__.A)("relative flex size-8 shrink-0 overflow-hidden rounded-full transition-all duration-500",className),...props})}function AvatarImage({className,...props}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_avatar__WEBPACK_IMPORTED_MODULE_3__._V,{"data-slot":"avatar-image",className:(0,_shared_lib_utils__WEBPACK_IMPORTED_MODULE_4__.A)("aspect-square size-full",className),...props})}function AvatarFallback({className,...props}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_avatar__WEBPACK_IMPORTED_MODULE_3__.H4,{"data-slot":"avatar-fallback",className:(0,_shared_lib_utils__WEBPACK_IMPORTED_MODULE_4__.A)("bg-muted flex size-full items-center justify-center rounded-full",className),...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_image__WEBPACK_IMPORTED_MODULE_2__.A,{src:"/altClubIcon.svg",alt:"기본 로고",width:60,height:60})})}Avatar.__docgenInfo={description:"",methods:[],displayName:"Avatar"},AvatarImage.__docgenInfo={description:"",methods:[],displayName:"AvatarImage"},AvatarFallback.__docgenInfo={description:"",methods:[],displayName:"AvatarFallback"}},"./src/shared/ui/favorite-button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>favorite_button});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/compiled/react/index.js"),dist=__webpack_require__("./node_modules/.pnpm/react-toastify@11.0.5_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/react-toastify/dist/index.mjs"),throttle=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/throttle.js"),throttle_default=__webpack_require__.n(throttle),next_auth_react=__webpack_require__("./node_modules/.pnpm/next-auth@5.0.0-beta.28_next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+t_4fgl65xwhnz7bnrslbc77vehim/node_modules/next-auth/react.js"),star=__webpack_require__("./node_modules/.pnpm/lucide-react@0.525.0_react@19.1.1/node_modules/lucide-react/dist/esm/icons/star.js");function FavoriteThread({favorite,setFavoriteAction,customClass}){const[optimisticFavorite,toggleFavorite]=(0,react.useOptimistic)(favorite,state=>!state);return(0,jsx_runtime.jsx)("button",{onClick:e=>{e.preventDefault(),(0,react.startTransition)(async()=>{toggleFavorite(favorite),setFavoriteAction()})},"aria-label":"즐겨찾기 토글",className:customClass||"absolute right-5 bottom-5 cursor-pointer text-black transition-colors duration-200 disabled:opacity-50",children:optimisticFavorite?(0,jsx_runtime.jsx)(star.A,{fill:"black",stroke:"black",className:"h-6 w-6",strokeWidth:1}):(0,jsx_runtime.jsx)(star.A,{className:"h-6 w-6",strokeWidth:1})})}const favorite_thread=FavoriteThread;FavoriteThread.__docgenInfo={description:"",methods:[],displayName:"FavoriteThread",props:{favorite:{required:!0,tsType:{name:"boolean"},description:""},setFavoriteAction:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},customClass:{required:!1,tsType:{name:"string"},description:""}}};__webpack_require__("./.storybook/server-only-mock.js");var distribution=__webpack_require__("./node_modules/.pnpm/ky@1.8.2/node_modules/ky/distribution/index.js"),next_auth=__webpack_require__("./node_modules/.pnpm/next-auth@5.0.0-beta.28_next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+t_4fgl65xwhnz7bnrslbc77vehim/node_modules/next-auth/index.js"),credentials=__webpack_require__("./node_modules/.pnpm/@auth+core@0.39.1/node_modules/@auth/core/providers/credentials.js"),kakao=__webpack_require__("./node_modules/.pnpm/@auth+core@0.39.1/node_modules/@auth/core/providers/kakao.js"),esm=__webpack_require__("./node_modules/.pnpm/jwt-decode@4.0.0/node_modules/jwt-decode/build/esm/index.js"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");function getTokenExpiration(token){try{const decoded=(0,esm.s)(token);return decoded.exp?1e3*decoded.exp:null}catch(e){return console.error("Failed to decode token",e),null}}const server_api=distribution.Ay.create({prefixUrl:"https://www.dev.mokkoji.p-e.kr/api/dev",fetch:(input,init)=>fetch(input,{...init,cache:"force-cache",next:{revalidate:3e3}})});var process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js"),auth_console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const{auth,handlers,signIn,signOut}=(0,next_auth.Ay)({secret:"1004",trustHost:!0,pages:{error:"/login?callbackUrl=/"},providers:[(0,kakao.A)({clientId:process.env.KAKAO_CLIENT_ID,clientSecret:process.env.KAKAO_SECRET_KEY}),(0,credentials.A)({name:"credentials",credentials:{studentId:{label:"학번",type:"text"},password:{label:"비밀번호",type:"password"}},async authorize(credentials){try{const response=await server_api.post("users/auth/login",{json:credentials}),data=await response.json();if(!data.data)return null;const userResponse=await server_api.get("users",{headers:{Authorization:`Bearer ${data.data.accessToken}`}}),userData=await userResponse.json();return{accessToken:data.data.accessToken,refreshToken:data.data.refreshToken,user:userData.data.user}}catch(error){return auth_console.error("[authorize error]",error),null}}})],callbacks:{jwt:async({token,account,user})=>{if("kakao"===(null==account?void 0:account.provider))return{...token,accessToken:account.access_token,refreshToken:account.refresh_token};if(user&&"credentials"===(null==account?void 0:account.provider)){const expiredTime=getTokenExpiration(user.accessToken);try{const headers={Authorization:`Bearer ${user.accessToken}`},rolesRes=await server_api.get("users/roles",{headers}),rolesData=await rolesRes.json();return rolesData.data?{accessToken:user.accessToken,refreshToken:user.refreshToken,expiresAt:expiredTime,user:user.user,role:rolesData.data.role}:{accessToken:user.accessToken,refreshToken:user.refreshToken,expiresAt:expiredTime,user:user.user}}catch(error){return auth_console.error("[role fetch error]",error),{accessToken:user.accessToken,refreshToken:user.refreshToken,expiresAt:expiredTime,user:user.user}}}if(Date.now()>token.expiresAt-6e5)try{const response=await server_api.post("users/auth/refresh",{headers:{Authorization:`Bearer ${token.refreshToken}`}}),data=await response.json();return data.data?{...token,accessToken:data.data.accessToken,expiresAt:getTokenExpiration(data.data.accessToken)}:null}catch(error){return auth_console.error("[refresh error]",error),null}return token},session:async({session,token})=>({expiresAt:token.expiresAt,user:token.user,role:token.role,accessToken:token.accessToken,refreshToken:token.refreshToken}),redirect:async({url,baseUrl})=>{if(url.startsWith("/"))return`${baseUrl}${url}`;if(url){const{search,origin}=new URL(url),callbackUrl=new URLSearchParams(search).get("callbackUrl");if(callbackUrl)return callbackUrl.startsWith("/")?`${baseUrl}${callbackUrl}`:callbackUrl;if(origin===baseUrl)return url}return baseUrl}}}),auth_api=distribution.Ay.create({prefixUrl:"https://www.dev.mokkoji.p-e.kr/api/dev",hooks:{beforeRequest:[async req=>{if(!req.headers.get("Authorization")){const session=await auth();(null==session?void 0:session.accessToken)&&req.headers.set("Authorization",`Bearer ${session.accessToken}`)}}],afterResponse:[async(request,options,response)=>{if(401!==response.status)return response;const session=await auth();if(!(null==session?void 0:session.refreshToken))return response;const refreshResponse=await server_api.post("users/auth/refresh",{headers:{Authorization:`Bearer ${session.refreshToken}`}}),refreshData=await refreshResponse.json();return request.headers.set("Authorization",`Bearer ${refreshData.data.accessToken}`),(0,distribution.Ay)(request,options)}]}});var HTTPError=__webpack_require__("./node_modules/.pnpm/ky@1.8.2/node_modules/ky/distribution/errors/HTTPError.js");function ErrorMessage(error){if(error instanceof HTTPError.H)switch(error.response.status){case 400:return"잘못된 요청입니다.";case 401:return"로그인이 필요합니다.";case 403:return"권한이 없습니다.";case 404:return"요청한 자원을 찾을 수 없습니다.";case 409:return"이미 등록된 동아리입니다.";case 500:return"서버 오류가 발생했습니다. 다시 시도해주세요.";default:return"알 수 없는 오류가 발생했습니다. 다시 시도해주세요."}return"알 수 없는 오류가 발생했습니다. 다시 시도해주세요."}const error_message=function ErrorHandler(error,customErrArray){if(error instanceof HTTPError.H){if(customErrArray){const customMessage=customErrArray.find(item=>item.status===error.response.status);return{ok:!1,message:(null==customMessage?void 0:customMessage.message)||ErrorMessage(error),data:void 0,status:error.response.status}}return{ok:!1,message:ErrorMessage(error),data:void 0,status:error.response.status}}return{ok:!1,message:"알 수 없는 오류가 발생했습니다.",data:void 0,status:500}};const post_favorite=async function postFavorite(clubId){try{return await auth_api.post(`favorites/${clubId}`),{ok:!0,message:"즐겨찾기가 등록되었습니다."}}catch(e){return error_message(e,[{status:409,message:"이미 즐겨찾기한 동아리입니다."}])}};const delete_favorite=async function deleteFavorite(clubId){try{return await auth_api.delete(`favorites/${clubId}`),{ok:!0,message:"즐겨찾기가 삭제되었습니다."}}catch(e){return error_message(e,[{status:404,message:"즐겨찾기한 동아리가 없습니다."}])}};var favorite_button_console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");function FavoriteButton({isFavorite,clubId,customClass}){const[favorite,setFavorite]=(0,react.useState)(isFavorite),{data:session}=(0,next_auth_react.wV)(),handleToggle=(0,react.useMemo)(()=>throttle_default()(async()=>{if(session)try{favorite?await delete_favorite(Number(clubId)):await post_favorite(Number(clubId)),setFavorite(prev=>!prev)}catch(error){favorite_button_console.error("즐겨찾기 요청 실패:",error)}else dist.oR.error("로그인 후 이용하실 수 있습니다.")},300),[favorite,session,clubId]);return(0,jsx_runtime.jsx)(favorite_thread,{favorite,setFavoriteAction:handleToggle,customClass})}const favorite_button=FavoriteButton;FavoriteButton.__docgenInfo={description:"",methods:[],displayName:"FavoriteButton",props:{isFavorite:{required:!0,tsType:{name:"boolean"},description:""},clubId:{required:!0,tsType:{name:"string"},description:""},customClass:{required:!1,tsType:{name:"string"},description:""}}}},"./src/stories/molecules/club-item.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,Favorite:()=>Favorite,LongDescription:()=>LongDescription,__namedExportsOrder:()=>__namedExportsOrder,default:()=>club_item_stories});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/compiled/react/jsx-runtime.js"),avatar=__webpack_require__("./src/shared/ui/avatar.tsx"),favorite_button=__webpack_require__("./src/shared/ui/favorite-button.tsx");function ClubItem({title,description,isFavorite,logo,category,clubId}){return(0,jsx_runtime.jsxs)("div",{className:"relative flex min-h-[140px] w-[100%] flex-col gap-2 rounded-lg bg-[#F8F8F8] p-3 text-[#474747] transition-shadow duration-300 hover:shadow-[0_0_20px_1px_rgba(0,0,0,0.2)] lg:min-h-[198px] lg:w-auto lg:p-5",children:[(0,jsx_runtime.jsx)("div",{className:"mb-2 flex flex-row items-center justify-between lg:mb-8",children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[(0,jsx_runtime.jsxs)(avatar.eu,{className:"size-12 lg:size-14",children:[(0,jsx_runtime.jsx)(avatar.BK,{src:logo}),(0,jsx_runtime.jsx)(avatar.q5,{})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsxs)("span",{className:"text-[12px] font-bold lg:text-xs",children:[category," 동아리"]}),(0,jsx_runtime.jsx)("h1",{className:"text-[16px] font-bold lg:text-xl",children:title})]})]})}),(0,jsx_runtime.jsx)("div",{className:"flex flex-row justify-between",children:(0,jsx_runtime.jsx)("div",{className:"line-clamp-2 overflow-hidden pr-7 text-[12px] break-words lg:text-xs",children:description||"동아리 소개 정보가 없습니다."})}),(0,jsx_runtime.jsx)(favorite_button.A,{isFavorite:isFavorite||!1,clubId,customClass:"absolute bottom-4 right-4 scale-80 lg:scale-100"})]})}const club_item=ClubItem;ClubItem.__docgenInfo={description:"",methods:[],displayName:"ClubItem",props:{title:{required:!0,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"string"},description:""},isFavorite:{required:!1,tsType:{name:"boolean"},description:""},logo:{required:!1,tsType:{name:"string"},description:""},category:{required:!1,tsType:{name:"string"},description:""},clubId:{required:!0,tsType:{name:"string"},description:""}}};var react=__webpack_require__("./node_modules/.pnpm/next-auth@5.0.0-beta.28_next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+t_4fgl65xwhnz7bnrslbc77vehim/node_modules/next-auth/react.js");const club_item_stories={title:"molecules/ClubItem",component:club_item,tags:["autodocs"],decorators:[Story=>(0,jsx_runtime.jsx)(react.CP,{session:{user:{name:"홍길동",email:"test@example.com"},expires:"2099-01-01T00:00:00.000Z"},children:(0,jsx_runtime.jsx)(Story,{})})],args:{title:"모각코 모집합니다",description:"함께 공부하고 성장하는 모각코 활동입니다.\n자유롭게 신청해주세요!",isFavorite:!1,logo:"https://avatars.githubusercontent.com/u/9919?s=200&v=4",clubId:"1"}},Default={},Favorite={args:{isFavorite:!0}},LongDescription={args:{description:"모각코 활동은 매주 정해진 시간에 함께 모여 각자의 공부를 하는 스터디입니다.\n온라인과 오프라인 모두 가능하며, 관심 있는 분들은 지금 바로 지원해주세요!\n다양한 전공의 친구들과 교류할 수 있는 기회도 있습니다."}},__namedExportsOrder=["Default","Favorite","LongDescription"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}},Favorite.parameters={...Favorite.parameters,docs:{...Favorite.parameters?.docs,source:{originalSource:"{\n  args: {\n    isFavorite: true\n  }\n}",...Favorite.parameters?.docs?.source}}},LongDescription.parameters={...LongDescription.parameters,docs:{...LongDescription.parameters?.docs,source:{originalSource:"{\n  args: {\n    description: '모각코 활동은 매주 정해진 시간에 함께 모여 각자의 공부를 하는 스터디입니다.\\n' + '온라인과 오프라인 모두 가능하며, 관심 있는 분들은 지금 바로 지원해주세요!\\n' + '다양한 전공의 친구들과 교류할 수 있는 기회도 있습니다.'\n  }\n}",...LongDescription.parameters?.docs?.source}}}}}]);