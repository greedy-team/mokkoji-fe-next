var zu=Object.defineProperty;var Ba=e=>{throw TypeError(e)};var Ju=(e,t,r)=>t in e?zu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var N=(e,t,r)=>Ju(e,typeof t!="symbol"?t+"":t,r),za=(e,t,r)=>t.has(e)||Ba("Cannot "+r);var k=(e,t,r)=>(za(e,t,"read from private field"),r?r.call(e):t.get(e)),fe=(e,t,r)=>t.has(e)?Ba("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ce=(e,t,r,n)=>(za(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);import{j as xe}from"./jsx-runtime-DoEZbXM1.js";import{r as G,R as vn}from"./index-D5MCaGCY.js";import"./index-CCeL7C7h.js";import{c as Fu}from"./index-akTSWmNK.js";import{r as At,g as Hs,c as wr}from"./index-94rxSlfo.js";import{c as da}from"./utils-D-KgF5mV.js";import{h as ur,r as Ks,a as Gu,f as Vu}from"./segment-CXO-4Ars.js";import{r as Bs}from"./jsx-runtime-Bw5QeaCk.js";import{r as Xu}from"./index-Db5oHGtE.js";import{r as Zu,I as Qu,c as Yu,b as el,l as lr,m as tl,n as en,o as tn,p as rn,q as fa,s as rl,t as nl,u as Dr}from"./index-Cry_JT0N.js";import{r as ol}from"./use-merged-ref-DZsM9s1K.js";import{c as al}from"./createLucideIcon-BhXNZiuh.js";import{fn as we}from"./index-Cf3xVBfy.js";function il(e,t=[]){let r=[];function n(a,i){const s=G.createContext(i),c=r.length;r=[...r,i];const l=u=>{var b;const{scope:h,children:g,...p}=u,y=((b=h==null?void 0:h[e])==null?void 0:b[c])||s,m=G.useMemo(()=>p,Object.values(p));return xe.jsx(y.Provider,{value:m,children:g})};l.displayName=a+"Provider";function d(u,h){var y;const g=((y=h==null?void 0:h[e])==null?void 0:y[c])||s,p=G.useContext(g);if(p)return p;if(i!==void 0)return i;throw new Error(`\`${u}\` must be used within \`${a}\``)}return[l,d]}const o=()=>{const a=r.map(i=>G.createContext(i));return function(s){const c=(s==null?void 0:s[e])||a;return G.useMemo(()=>({[`__scope${e}`]:{...s,[e]:c}}),[s,c])}};return o.scopeName=e,[n,sl(o,...t)]}function sl(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const i=n.reduce((s,{useScope:c,scopeName:l})=>{const u=c(a)[`__scope${l}`];return{...s,...u}},{});return G.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return r.scopeName=t.scopeName,r}function cl(e){const t=G.useRef(e);return G.useEffect(()=>{t.current=e}),G.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}var Lo=globalThis!=null&&globalThis.document?G.useLayoutEffect:()=>{},ul=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ha=ul.reduce((e,t)=>{const r=Fu(`Primitive.${t}`),n=G.forwardRef((o,a)=>{const{asChild:i,...s}=o,c=i?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),xe.jsx(c,{...s,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),En={exports:{}},Sn={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ja;function ll(){if(Ja)return Sn;Ja=1;var e=At();function t(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,o=e.useEffect,a=e.useLayoutEffect,i=e.useDebugValue;function s(u,h){var g=h(),p=n({inst:{value:g,getSnapshot:h}}),y=p[0].inst,m=p[1];return a(function(){y.value=g,y.getSnapshot=h,c(y)&&m({inst:y})},[u,g,h]),o(function(){return c(y)&&m({inst:y}),u(function(){c(y)&&m({inst:y})})},[u]),i(g),g}function c(u){var h=u.getSnapshot;u=u.value;try{var g=h();return!r(u,g)}catch{return!0}}function l(u,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:s;return Sn.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,Sn}var Fa;function dl(){return Fa||(Fa=1,En.exports=ll()),En.exports}var fl=dl();function hl(){return fl.useSyncExternalStore(pl,()=>!0,()=>!1)}function pl(){return()=>{}}var pa="Avatar",[ml,Ty]=il(pa),[yl,zs]=ml(pa),Js=G.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[o,a]=G.useState("idle");return xe.jsx(yl,{scope:r,imageLoadingStatus:o,onImageLoadingStatusChange:a,children:xe.jsx(ha.span,{...n,ref:t})})});Js.displayName=pa;var Fs="AvatarImage",Gs=G.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:o=()=>{},...a}=e,i=zs(Fs,r),s=gl(n,a),c=cl(l=>{o(l),i.onImageLoadingStatusChange(l)});return Lo(()=>{s!=="idle"&&c(s)},[s,c]),s==="loaded"?xe.jsx(ha.img,{...a,ref:t,src:n}):null});Gs.displayName=Fs;var Vs="AvatarFallback",Xs=G.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...o}=e,a=zs(Vs,r),[i,s]=G.useState(n===void 0);return G.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>s(!0),n);return()=>window.clearTimeout(c)}},[n]),i&&a.imageLoadingStatus!=="loaded"?xe.jsx(ha.span,{...o,ref:t}):null});Xs.displayName=Vs;function Ga(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function gl(e,{referrerPolicy:t,crossOrigin:r}){const n=hl(),o=G.useRef(null),a=n?(o.current||(o.current=new window.Image),o.current):null,[i,s]=G.useState(()=>Ga(a,e));return Lo(()=>{s(Ga(a,e))},[a,e]),Lo(()=>{const c=u=>()=>{s(u)};if(!a)return;const l=c("loaded"),d=c("error");return a.addEventListener("load",l),a.addEventListener("error",d),t&&(a.referrerPolicy=t),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",l),a.removeEventListener("error",d)}},[a,r,t]),i}var bl=Js,wl=Gs,_l=Xs,An={},xn={},kn={},Va;function ma(){return Va||(Va=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"warnOnce",{enumerable:!0,get:function(){return t}});let t=r=>{}}(kn)),kn}var Tn={},Xa;function vl(){return Xa||(Xa=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getImageBlurSvg",{enumerable:!0,get:function(){return t}});function t(r){let{widthInt:n,heightInt:o,blurWidth:a,blurHeight:i,blurDataURL:s,objectFit:c}=r;const l=20,d=a?a*40:n,u=i?i*40:o,h=d&&u?"viewBox='0 0 "+d+" "+u+"'":"",g=h?"none":c==="contain"?"xMidYMid":c==="cover"?"xMidYMid slice":"none";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+h+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='"+l+"'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='"+l+"'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+g+"' style='filter: url(%23b);' href='"+s+"'/%3E%3C/svg%3E"}}(Tn)),Tn}var Rn={},Za;function ya(){return Za||(Za=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(o,a){for(var i in a)Object.defineProperty(o,i,{enumerable:!0,get:a[i]})}t(e,{VALID_LOADERS:function(){return r},imageConfigDefault:function(){return n}});const r=["default","imgix","cloudinary","akamai","custom"],n={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:void 0,unoptimized:!1}}(Rn)),Rn}var Qa;function Zs(){return Qa||(Qa=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getImgProps",{enumerable:!0,get:function(){return d}}),ma();const t=vl(),r=ya(),n=["-moz-initial","fill","none","scale-down",void 0];function o(u){return u.default!==void 0}function a(u){return u.src!==void 0}function i(u){return!!u&&typeof u=="object"&&(o(u)||a(u))}function s(u){return typeof u>"u"?u:typeof u=="number"?Number.isFinite(u)?u:NaN:typeof u=="string"&&/^[0-9]+$/.test(u)?parseInt(u,10):NaN}function c(u,h,g){let{deviceSizes:p,allSizes:y}=u;if(g){const b=/(^|\s)(1?\d?\d)vw/g,_=[];for(let v;v=b.exec(g);v)_.push(parseInt(v[2]));if(_.length){const v=Math.min(..._)*.01;return{widths:y.filter(w=>w>=p[0]*v),kind:"w"}}return{widths:y,kind:"w"}}return typeof h!="number"?{widths:p,kind:"w"}:{widths:[...new Set([h,h*2].map(b=>y.find(_=>_>=b)||y[y.length-1]))],kind:"x"}}function l(u){let{config:h,src:g,unoptimized:p,width:y,quality:m,sizes:b,loader:_}=u;if(p)return{src:g,srcSet:void 0,sizes:void 0};const{widths:v,kind:w}=c(h,y,b),f=v.length-1;return{sizes:!b&&w==="w"?"100vw":b,srcSet:v.map((A,E)=>_({config:h,src:g,quality:m,width:A})+" "+(w==="w"?A:E+1)+w).join(", "),src:_({config:h,src:g,quality:m,width:v[f]})}}function d(u,h){let{src:g,sizes:p,unoptimized:y=!1,priority:m=!1,loading:b,className:_,quality:v,width:w,height:f,fill:A=!1,style:E,overrideSrc:S,onLoad:x,onLoadingComplete:I,placeholder:M="empty",blurDataURL:U,fetchPriority:O,decoding:R="async",layout:D,objectFit:C,objectPosition:T,lazyBoundary:K,lazyRoot:B,...W}=u;const{imgConf:J,showAltText:V,blurComplete:F,defaultLoader:Z}=h;let ee,X=J||r.imageConfigDefault;if("allSizes"in X)ee=X;else{var oe;const ie=[...X.deviceSizes,...X.imageSizes].sort((be,Ne)=>be-Ne),Ue=X.deviceSizes.sort((be,Ne)=>be-Ne),me=(oe=X.qualities)==null?void 0:oe.sort((be,Ne)=>be-Ne);ee={...X,allSizes:ie,deviceSizes:Ue,qualities:me}}if(typeof Z>"u")throw Object.defineProperty(new Error(`images.loaderFile detected but the file is missing default export.
Read more: https://nextjs.org/docs/messages/invalid-images-config`),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let de=W.loader||Z;delete W.loader,delete W.srcSet;const ke="__next_img_default"in de;if(ke){if(ee.loader==="custom")throw Object.defineProperty(new Error('Image with src "'+g+`" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{const ie=de;de=Ue=>{const{config:me,...be}=Ue;return ie(be)}}if(D){D==="fill"&&(A=!0);const ie={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}},Ue={responsive:"100vw",fill:"100vw"},me=ie[D];me&&(E={...E,...me});const be=Ue[D];be&&!p&&(p=be)}let pe="",ge=s(w),_e=s(f),ht,Kt;if(i(g)){const ie=o(g)?g.default:g;if(!ie.src)throw Object.defineProperty(new Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(ie)),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!ie.height||!ie.width)throw Object.defineProperty(new Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(ie)),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(ht=ie.blurWidth,Kt=ie.blurHeight,U=U||ie.blurDataURL,pe=ie.src,!A){if(!ge&&!_e)ge=ie.width,_e=ie.height;else if(ge&&!_e){const Ue=ge/ie.width;_e=Math.round(ie.height*Ue)}else if(!ge&&_e){const Ue=_e/ie.height;ge=Math.round(ie.width*Ue)}}}g=typeof g=="string"?g:pe;let gr=!m&&(b==="lazy"||typeof b>"u");(!g||g.startsWith("data:")||g.startsWith("blob:"))&&(y=!0,gr=!1),ee.unoptimized&&(y=!0),ke&&!ee.dangerouslyAllowSVG&&g.split("?",1)[0].endsWith(".svg")&&(y=!0);const xt=s(v),Ke=Object.assign(A?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:C,objectPosition:T}:{},V?{}:{color:"transparent"},E),tt=!F&&M!=="empty"?M==="blur"?'url("data:image/svg+xml;charset=utf-8,'+(0,t.getImageBlurSvg)({widthInt:ge,heightInt:_e,blurWidth:ht,blurHeight:Kt,blurDataURL:U||"",objectFit:Ke.objectFit})+'")':'url("'+M+'")':null,wn=n.includes(Ke.objectFit)?Ke.objectFit==="fill"?"100% 100%":"cover":Ke.objectFit;let Bt=tt?{backgroundSize:wn,backgroundPosition:Ke.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:tt}:{};const Be=l({config:ee,src:g,unoptimized:y,width:ge,quality:xt,sizes:p,loader:de});return{props:{...W,loading:gr?"lazy":b,fetchPriority:O,width:ge,height:_e,decoding:R,className:_,style:{...Ke,...Bt},sizes:Be.sizes,srcSet:Be.srcSet,src:S||Be.src},meta:{unoptimized:y,priority:m,placeholder:M,fill:A}}}}(xn)),xn}var _r={exports:{}},vr={exports:{}},Cn={},Ya;function El(){return Ya||(Ya=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return a}});const t=At(),r=typeof window>"u",n=r?()=>{}:t.useLayoutEffect,o=r?()=>{}:t.useEffect;function a(i){const{headManager:s,reduceComponentsToState:c}=i;function l(){if(s&&s.mountedInstances){const u=t.Children.toArray(Array.from(s.mountedInstances).filter(Boolean));s.updateHead(c(u,i))}}if(r){var d;s==null||(d=s.mountedInstances)==null||d.add(i.children),l()}return n(()=>{var u;return s==null||(u=s.mountedInstances)==null||u.add(i.children),()=>{var h;s==null||(h=s.mountedInstances)==null||h.delete(i.children)}}),n(()=>(s&&(s._pendingUpdate=l),()=>{s&&(s._pendingUpdate=l)})),o(()=>(s&&s._pendingUpdate&&(s._pendingUpdate(),s._pendingUpdate=null),()=>{s&&s._pendingUpdate&&(s._pendingUpdate(),s._pendingUpdate=null)})),null}}(Cn)),Cn}var Pn={},ei;function Sl(){return ei||(ei=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AmpStateContext",{enumerable:!0,get:function(){return n}});const n=ur()._(At()).default.createContext({})}(Pn)),Pn}var On={},ti;function Al(){return ti||(ti=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"isInAmpMode",{enumerable:!0,get:function(){return t}});function t(r){let{ampFirst:n=!1,hybrid:o=!1,hasQuery:a=!1}=r===void 0?{}:r;return n||o&&a}}(On)),On}var ri;function xl(){return ri||(ri=1,function(e,t){"use client";var r={};Object.defineProperty(t,"__esModule",{value:!0});function n(v,w){for(var f in w)Object.defineProperty(v,f,{enumerable:!0,get:w[f]})}n(t,{default:function(){return _},defaultHead:function(){return h}});const o=ur(),a=Ks(),i=Bs(),s=a._(At()),c=o._(El()),l=Sl(),d=Zu(),u=Al();ma();function h(v){v===void 0&&(v=!1);const w=[(0,i.jsx)("meta",{charSet:"utf-8"},"charset")];return v||w.push((0,i.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),w}function g(v,w){return typeof w=="string"||typeof w=="number"?v:w.type===s.default.Fragment?v.concat(s.default.Children.toArray(w.props.children).reduce((f,A)=>typeof A=="string"||typeof A=="number"?f:f.concat(A),[])):v.concat(w)}const p=["name","httpEquiv","charSet","itemProp"];function y(){const v=new Set,w=new Set,f=new Set,A={};return E=>{let S=!0,x=!1;if(E.key&&typeof E.key!="number"&&E.key.indexOf("$")>0){x=!0;const I=E.key.slice(E.key.indexOf("$")+1);v.has(I)?S=!1:v.add(I)}switch(E.type){case"title":case"base":w.has(E.type)?S=!1:w.add(E.type);break;case"meta":for(let I=0,M=p.length;I<M;I++){const U=p[I];if(E.props.hasOwnProperty(U))if(U==="charSet")f.has(U)?S=!1:f.add(U);else{const O=E.props[U],R=A[U]||new Set;(U!=="name"||!x)&&R.has(O)?S=!1:(R.add(O),A[U]=R)}}break}return S}}function m(v,w){const{inAmpMode:f}=w;return v.reduce(g,[]).reverse().concat(h(f).reverse()).filter(y()).reverse().map((A,E)=>{const S=A.key||E;if(r.__NEXT_OPTIMIZE_FONTS&&!f&&A.type==="link"&&A.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(x=>A.props.href.startsWith(x))){const x={...A.props||{}};return x["data-href"]=x.href,x.href=void 0,x["data-optimized-fonts"]=!0,s.default.cloneElement(A,x)}return s.default.cloneElement(A,{key:S})})}function b(v){let{children:w}=v;const f=(0,s.useContext)(l.AmpStateContext),A=(0,s.useContext)(d.HeadManagerContext);return(0,i.jsx)(c.default,{reduceComponentsToState:m,headManager:A,inAmpMode:(0,u.isInAmpMode)(f),children:w})}const _=b;(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(vr,vr.exports)),vr.exports}var In={},ni;function kl(){return ni||(ni=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ImageConfigContext",{enumerable:!0,get:function(){return o}});const r=ur()._(At()),n=ya(),o=r.default.createContext(n.imageConfigDefault)}(In)),In}var Un={},oi;function Qs(){return oi||(oi=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n}});const t=75;function r(o){let{config:a,src:i,width:s,quality:c}=o;var l;const d=c||((l=a.qualities)==null?void 0:l.reduce((u,h)=>Math.abs(h-t)<Math.abs(u-t)?h:u))||t;return a.path+"?url="+encodeURIComponent(i)+"&w="+s+"&q="+d+(i.startsWith("/_next/static/media/"),"")}r.__next_img_default=!0;const n=r}(Un)),Un}var ai;function Tl(){return ai||(ai=1,function(e,t){"use client";var r={};Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return w}});const n=ur(),o=Ks(),a=Bs(),i=o._(At()),s=n._(Xu()),c=n._(xl()),l=Zs(),d=ya(),u=kl();ma();const h=Gu(),g=n._(Qs()),p=ol(),y=r.__NEXT_IMAGE_OPTS;typeof window>"u"&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);function m(f,A,E,S,x,I,M){const U=f==null?void 0:f.src;if(!f||f["data-loaded-src"]===U)return;f["data-loaded-src"]=U,("decode"in f?f.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(!(!f.parentElement||!f.isConnected)){if(A!=="empty"&&x(!0),E!=null&&E.current){const R=new Event("load");Object.defineProperty(R,"target",{writable:!1,value:f});let D=!1,C=!1;E.current({...R,nativeEvent:R,currentTarget:f,target:f,isDefaultPrevented:()=>D,isPropagationStopped:()=>C,persist:()=>{},preventDefault:()=>{D=!0,R.preventDefault()},stopPropagation:()=>{C=!0,R.stopPropagation()}})}S!=null&&S.current&&S.current(f)}})}function b(f){return i.use?{fetchPriority:f}:{fetchpriority:f}}const _=(0,i.forwardRef)((f,A)=>{let{src:E,srcSet:S,sizes:x,height:I,width:M,decoding:U,className:O,style:R,fetchPriority:D,placeholder:C,loading:T,unoptimized:K,fill:B,onLoadRef:W,onLoadingCompleteRef:J,setBlurComplete:V,setShowAltText:F,sizesInput:Z,onLoad:ee,onError:X,...oe}=f;const de=(0,i.useCallback)(pe=>{pe&&(X&&(pe.src=pe.src),pe.complete&&m(pe,C,W,J,V))},[E,C,W,J,V,X,K,Z]),ke=(0,p.useMergedRef)(A,de);return(0,a.jsx)("img",{...oe,...b(D),loading:T,width:M,height:I,decoding:U,"data-nimg":B?"fill":"1",className:O,style:R,sizes:x,srcSet:S,src:E,ref:ke,onLoad:pe=>{const ge=pe.currentTarget;m(ge,C,W,J,V)},onError:pe=>{F(!0),C!=="empty"&&V(!0),X&&X(pe)}})});function v(f){let{isAppRouter:A,imgAttributes:E}=f;const S={as:"image",imageSrcSet:E.srcSet,imageSizes:E.sizes,crossOrigin:E.crossOrigin,referrerPolicy:E.referrerPolicy,...b(E.fetchPriority)};return A&&s.default.preload?(s.default.preload(E.src,S),null):(0,a.jsx)(c.default,{children:(0,a.jsx)("link",{rel:"preload",href:E.srcSet?void 0:E.src,...S},"__nimg-"+E.src+E.srcSet+E.sizes)})}const w=(0,i.forwardRef)((f,A)=>{const S=!(0,i.useContext)(h.RouterContext),x=(0,i.useContext)(u.ImageConfigContext),I=(0,i.useMemo)(()=>{var J;const V=y||x||d.imageConfigDefault,F=[...V.deviceSizes,...V.imageSizes].sort((X,oe)=>X-oe),Z=V.deviceSizes.sort((X,oe)=>X-oe),ee=(J=V.qualities)==null?void 0:J.sort((X,oe)=>X-oe);return{...V,allSizes:F,deviceSizes:Z,qualities:ee}},[x]),{onLoad:M,onLoadingComplete:U}=f,O=(0,i.useRef)(M);(0,i.useEffect)(()=>{O.current=M},[M]);const R=(0,i.useRef)(U);(0,i.useEffect)(()=>{R.current=U},[U]);const[D,C]=(0,i.useState)(!1),[T,K]=(0,i.useState)(!1),{props:B,meta:W}=(0,l.getImgProps)(f,{defaultLoader:g.default,imgConf:I,blurComplete:D,showAltText:T});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_,{...B,unoptimized:W.unoptimized,placeholder:W.placeholder,fill:W.fill,onLoadRef:O,onLoadingCompleteRef:R,setBlurComplete:C,setShowAltText:K,sizesInput:f.sizes,ref:A}),W.priority?(0,a.jsx)(v,{isAppRouter:S,imgAttributes:B}):null]})});(typeof t.default=="function"||typeof t.default=="object"&&t.default!==null)&&typeof t.default.__esModule>"u"&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}(_r,_r.exports)),_r.exports}var ii;function Rl(){return ii||(ii=1,function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0});function r(l,d){for(var u in d)Object.defineProperty(l,u,{enumerable:!0,get:d[u]})}r(e,{default:function(){return c},getImageProps:function(){return s}});const n=ur(),o=Zs(),a=Tl(),i=n._(Qs());function s(l){const{props:d}=(0,o.getImgProps)(l,{defaultLoader:i.default,imgConf:t.__NEXT_IMAGE_OPTS});for(const[u,h]of Object.entries(d))h===void 0&&delete d[u];return{props:d}}const c=a.Image}(An)),An}var $n,si;function Cl(){return si||(si=1,$n=Rl()),$n}var Pl=Cl();const Ol=Hs(Pl);var Il=({src:e,width:t,quality:r=75})=>{const n=[];if(e||n.push("src"),t||n.push("width"),n.length>0)throw new Error(`Next Image Optimization requires ${n.join(", ")} to be provided. Make sure you pass them as props to the \`next/image\` component. Received: ${JSON.stringify({src:e,width:t,quality:r})}`);const o=new URL(e,window.location.href);return!o.searchParams.has("w")&&!o.searchParams.has("q")&&(o.searchParams.set("w",t.toString()),o.searchParams.set("q",r.toString())),!e.startsWith("http://")&&!e.startsWith("https://")?o.toString().slice(o.origin.length):o.toString()},Ul=Ol,Ys=vn.forwardRef(({loader:e,...t},r)=>{const n=vn.useContext(Qu);return vn.createElement(Ul,{ref:r,...n,...t,loader:e??Il})});Ys.displayName="NextImage";var $l=Ys;function Dl({className:e,...t}){return xe.jsx(bl,{"data-slot":"avatar",className:da("relative flex size-8 shrink-0 overflow-hidden rounded-full transition-all duration-500",e),...t})}function Nl({className:e,...t}){return xe.jsx(wl,{"data-slot":"avatar-image",className:da("aspect-square size-full",e),...t})}function jl({className:e,...t}){return xe.jsx(_l,{"data-slot":"avatar-fallback",className:da("bg-muted flex size-full items-center justify-center rounded-full",e),...t,children:xe.jsx($l,{src:"/altClubIcon.svg",alt:"기본 로고",width:60,height:60})})}Dl.__docgenInfo={description:"",methods:[],displayName:"Avatar"};Nl.__docgenInfo={description:"",methods:[],displayName:"AvatarImage"};jl.__docgenInfo={description:"",methods:[],displayName:"AvatarFallback"};function Ll(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Ll(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var ga=e=>typeof e=="number"&&!isNaN(e),nr=e=>typeof e=="string",ec=e=>typeof e=="function",Ml=e=>nr(e)||ga(e),Wl=e=>G.isValidElement(e)||nr(e)||ec(e)||ga(e),ql=1,tc=()=>`${ql++}`,qe=new Map,Mo=[],ci=new Set,rc=()=>qe.size>0,Hl=(e,{containerId:t})=>{var r;return(r=qe.get(t||1))==null?void 0:r.toasts.get(e)};function Kl(e,t){var r;if(t)return!!((r=qe.get(t))!=null&&r.isToastActive(e));let n=!1;return qe.forEach(o=>{o.isToastActive(e)&&(n=!0)}),n}function Bl(e){if(!rc()){Mo=Mo.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||Ml(e))qe.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=qe.get(e.containerId);t?t.removeToast(e.id):qe.forEach(r=>{r.removeToast(e.id)})}}var zl=(e={})=>{qe.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function Jl(e,t){Wl(e)&&(rc()||Mo.push({content:e,options:t}),qe.forEach(r=>{r.buildToast(e,t)}))}function nc(e,t){qe.forEach(r=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===r.id)&&r.toggle(e,t==null?void 0:t.id)})}function Fl(e){return ci.add(e),()=>{ci.delete(e)}}function Gl(e){return e&&(nr(e.toastId)||ga(e.toastId))?e.toastId:tc()}function dr(e,t){return Jl(e,t),t.toastId}function nn(e,t){return{...t,type:t&&t.type||e,toastId:Gl(t)}}function on(e){return(t,r)=>dr(t,nn(e,r))}function ae(e,t){return dr(e,nn("default",t))}ae.loading=(e,t)=>dr(e,nn("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function Vl(e,{pending:t,error:r,success:n},o){let a;t&&(a=nr(t)?ae.loading(t,o):ae.loading(t.render,{...o,...t}));let i={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},s=(l,d,u)=>{if(d==null){ae.dismiss(a);return}let h={type:l,...i,...o,data:u},g=nr(d)?{render:d}:d;return a?ae.update(a,{...h,...g}):ae(g.render,{...h,...g}),u},c=ec(e)?e():e;return c.then(l=>s("success",n,l)).catch(l=>s("error",r,l)),c}ae.promise=Vl;ae.success=on("success");ae.info=on("info");ae.error=on("error");ae.warning=on("warning");ae.warn=ae.warning;ae.dark=(e,t)=>dr(e,nn("default",{theme:"dark",...t}));function Xl(e){Bl(e)}ae.dismiss=Xl;ae.clearWaitingQueue=zl;ae.isActive=Kl;ae.update=(e,t={})=>{let r=Hl(e,t);if(r){let{props:n,content:o}=r,a={delay:100,...n,...t,toastId:t.toastId||e,updateId:tc()};a.toastId!==e&&(a.staleId=e);let i=a.render||o;delete a.render,dr(i,a)}};ae.done=e=>{ae.update(e,{progress:1})};ae.onChange=Fl;ae.play=e=>nc(!0,e);ae.pause=e=>nc(!1,e);var Dn,ui;function ba(){if(ui)return Dn;ui=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return Dn=e,Dn}var Nn,li;function Zl(){if(li)return Nn;li=1;var e=typeof wr=="object"&&wr&&wr.Object===Object&&wr;return Nn=e,Nn}var jn,di;function oc(){if(di)return jn;di=1;var e=Zl(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return jn=r,jn}var Ln,fi;function Ql(){if(fi)return Ln;fi=1;var e=oc(),t=function(){return e.Date.now()};return Ln=t,Ln}var Mn,hi;function Yl(){if(hi)return Mn;hi=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return Mn=t,Mn}var Wn,pi;function ed(){if(pi)return Wn;pi=1;var e=Yl(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Wn=r,Wn}var qn,mi;function ac(){if(mi)return qn;mi=1;var e=oc(),t=e.Symbol;return qn=t,qn}var Hn,yi;function td(){if(yi)return Hn;yi=1;var e=ac(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,o=e?e.toStringTag:void 0;function a(i){var s=r.call(i,o),c=i[o];try{i[o]=void 0;var l=!0}catch{}var d=n.call(i);return l&&(s?i[o]=c:delete i[o]),d}return Hn=a,Hn}var Kn,gi;function rd(){if(gi)return Kn;gi=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return Kn=r,Kn}var Bn,bi;function nd(){if(bi)return Bn;bi=1;var e=ac(),t=td(),r=rd(),n="[object Null]",o="[object Undefined]",a=e?e.toStringTag:void 0;function i(s){return s==null?s===void 0?o:n:a&&a in Object(s)?t(s):r(s)}return Bn=i,Bn}var zn,wi;function od(){if(wi)return zn;wi=1;function e(t){return t!=null&&typeof t=="object"}return zn=e,zn}var Jn,_i;function ad(){if(_i)return Jn;_i=1;var e=nd(),t=od(),r="[object Symbol]";function n(o){return typeof o=="symbol"||t(o)&&e(o)==r}return Jn=n,Jn}var Fn,vi;function id(){if(vi)return Fn;vi=1;var e=ed(),t=ba(),r=ad(),n=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt;function c(l){if(typeof l=="number")return l;if(r(l))return n;if(t(l)){var d=typeof l.valueOf=="function"?l.valueOf():l;l=t(d)?d+"":d}if(typeof l!="string")return l===0?l:+l;l=e(l);var u=a.test(l);return u||i.test(l)?s(l.slice(2),u?2:8):o.test(l)?n:+l}return Fn=c,Fn}var Gn,Ei;function sd(){if(Ei)return Gn;Ei=1;var e=ba(),t=Ql(),r=id(),n="Expected a function",o=Math.max,a=Math.min;function i(s,c,l){var d,u,h,g,p,y,m=0,b=!1,_=!1,v=!0;if(typeof s!="function")throw new TypeError(n);c=r(c)||0,e(l)&&(b=!!l.leading,_="maxWait"in l,h=_?o(r(l.maxWait)||0,c):h,v="trailing"in l?!!l.trailing:v);function w(O){var R=d,D=u;return d=u=void 0,m=O,g=s.apply(D,R),g}function f(O){return m=O,p=setTimeout(S,c),b?w(O):g}function A(O){var R=O-y,D=O-m,C=c-R;return _?a(C,h-D):C}function E(O){var R=O-y,D=O-m;return y===void 0||R>=c||R<0||_&&D>=h}function S(){var O=t();if(E(O))return x(O);p=setTimeout(S,A(O))}function x(O){return p=void 0,v&&d?w(O):(d=u=void 0,g)}function I(){p!==void 0&&clearTimeout(p),m=0,d=y=u=p=void 0}function M(){return p===void 0?g:x(t())}function U(){var O=t(),R=E(O);if(d=arguments,u=this,y=O,R){if(p===void 0)return f(y);if(_)return clearTimeout(p),p=setTimeout(S,c),w(y)}return p===void 0&&(p=setTimeout(S,c)),g}return U.cancel=I,U.flush=M,U}return Gn=i,Gn}var Vn,Si;function cd(){if(Si)return Vn;Si=1;var e=sd(),t=ba(),r="Expected a function";function n(o,a,i){var s=!0,c=!0;if(typeof o!="function")throw new TypeError(r);return t(i)&&(s="leading"in i?!!i.leading:s,c="trailing"in i?!!i.trailing:c),e(o,a,{leading:s,maxWait:a,trailing:c})}return Vn=n,Vn}var ud=cd();const ld=Hs(ud);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ai=al("star",dd);function ic({favorite:e,setFavoriteAction:t,customClass:r}){const[n,o]=G.useOptimistic(e,i=>!i),a=i=>{i.preventDefault(),G.startTransition(async()=>{o(e),t()})};return xe.jsx("button",{onClick:a,"aria-label":"즐겨찾기 토글",className:r||"absolute right-5 bottom-5 cursor-pointer text-black transition-colors duration-200 disabled:opacity-50",children:n?xe.jsx(Ai,{fill:"black",stroke:"black",className:"h-6 w-6",strokeWidth:1}):xe.jsx(Ai,{className:"h-6 w-6",strokeWidth:1})})}ic.__docgenInfo={description:"",methods:[],displayName:"FavoriteThread",props:{favorite:{required:!0,tsType:{name:"boolean"},description:""},setFavoriteAction:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},customClass:{required:!1,tsType:{name:"string"},description:""}}};class Wr extends Error{constructor(r,n,o){const a=r.status||r.status===0?r.status:"",i=r.statusText||"",s=`${a} ${i}`.trim(),c=s?`status code ${s}`:"an unknown error";super(`Request failed with ${c}: ${n.method} ${n.url}`);N(this,"response");N(this,"request");N(this,"options");this.name="HTTPError",this.response=r,this.request=n,this.options=o}}class sc extends Error{constructor(r){super(`Request timed out: ${r.method} ${r.url}`);N(this,"request");this.name="TimeoutError",this.request=r}}const xi=(()=>{let e=!1,t=!1;const r=typeof globalThis.ReadableStream=="function",n=typeof globalThis.Request=="function";if(r&&n)try{t=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type")}catch(o){if(o instanceof Error&&o.message==="unsupported BodyInit type")return!1;throw o}return e&&!t})(),fd=typeof globalThis.AbortController=="function",hd=typeof globalThis.AbortSignal=="function"&&typeof globalThis.AbortSignal.any=="function",pd=typeof globalThis.ReadableStream=="function",md=typeof globalThis.FormData=="function",cc=["get","post","put","patch","head","delete"],yd={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},Xn=2147483647,gd=new TextEncoder().encode("------WebKitFormBoundaryaxpyiPgbbPti10Rw").length,uc=Symbol("stop"),bd={},wd={},_d=e=>{if(!e)return 0;if(e instanceof FormData){let t=0;for(const[r,n]of e)t+=gd,t+=new TextEncoder().encode(`Content-Disposition: form-data; name="${r}"`).length,t+=typeof n=="string"?new TextEncoder().encode(n).length:n.size;return t}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength;if(typeof e=="string")return new TextEncoder().encode(e).length;if(e instanceof URLSearchParams)return new TextEncoder().encode(e.toString()).length;if("byteLength"in e)return e.byteLength;if(typeof e=="object"&&e!==null)try{const t=JSON.stringify(e);return new TextEncoder().encode(t).length}catch{return 0}return 0},vd=(e,t)=>{const r=Number(e.headers.get("content-length"))||0;let n=0;return e.status===204?(t&&t({percent:1,totalBytes:r,transferredBytes:n},new Uint8Array),new Response(null,{status:e.status,statusText:e.statusText,headers:e.headers})):new Response(new ReadableStream({async start(o){const a=e.body.getReader();t&&t({percent:0,transferredBytes:0,totalBytes:r},new Uint8Array);async function i(){const{done:s,value:c}=await a.read();if(s){o.close();return}if(t){n+=c.byteLength;const l=r===0?0:n/r;t({percent:l,transferredBytes:n,totalBytes:r},c)}o.enqueue(c),await i()}await i()}}),{status:e.status,statusText:e.statusText,headers:e.headers})},Ed=(e,t)=>{const r=_d(e.body);let n=0;return new Request(e,{duplex:"half",body:new ReadableStream({async start(o){const a=e.body instanceof ReadableStream?e.body.getReader():new Response("").body.getReader();async function i(){const{done:s,value:c}=await a.read();if(s){t&&t({percent:1,transferredBytes:n,totalBytes:Math.max(r,n)},new Uint8Array),o.close();return}n+=c.byteLength;let l=r===0?0:n/r;(r<n||l===1)&&(l=.99),t&&t({percent:Number(l.toFixed(2)),transferredBytes:n,totalBytes:r},c),o.enqueue(c),await i()}await i()}})})},Jt=e=>e!==null&&typeof e=="object",Er=(...e)=>{for(const t of e)if((!Jt(t)||Array.isArray(t))&&t!==void 0)throw new TypeError("The `options` argument must be an object");return wa({},...e)},lc=(e={},t={})=>{const r=new globalThis.Headers(e),n=t instanceof globalThis.Headers,o=new globalThis.Headers(t);for(const[a,i]of o.entries())n&&i==="undefined"||i===void 0?r.delete(a):r.set(a,i);return r};function Sr(e,t,r){return Object.hasOwn(t,r)&&t[r]===void 0?[]:wa(e[r]??[],t[r]??[])}const dc=(e={},t={})=>({beforeRequest:Sr(e,t,"beforeRequest"),beforeRetry:Sr(e,t,"beforeRetry"),afterResponse:Sr(e,t,"afterResponse"),beforeError:Sr(e,t,"beforeError")}),wa=(...e)=>{let t={},r={},n={};for(const o of e)if(Array.isArray(o))Array.isArray(t)||(t=[]),t=[...t,...o];else if(Jt(o)){for(let[a,i]of Object.entries(o))Jt(i)&&a in t&&(i=wa(t[a],i)),t={...t,[a]:i};Jt(o.hooks)&&(n=dc(n,o.hooks),t.hooks=n),Jt(o.headers)&&(r=lc(r,o.headers),t.headers=r)}return t},Sd=e=>cc.includes(e)?e.toUpperCase():e,Ad=["get","put","head","delete","options","trace"],xd=[408,413,429,500,502,503,504],kd=[413,429,503],ki={limit:2,methods:Ad,statusCodes:xd,afterStatusCodes:kd,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:e=>.3*2**(e-1)*1e3},Td=(e={})=>{if(typeof e=="number")return{...ki,limit:e};if(e.methods&&!Array.isArray(e.methods))throw new Error("retry.methods must be an array");if(e.statusCodes&&!Array.isArray(e.statusCodes))throw new Error("retry.statusCodes must be an array");return{...ki,...e}};async function Rd(e,t,r,n){return new Promise((o,a)=>{const i=setTimeout(()=>{r&&r.abort(),a(new sc(e))},n.timeout);n.fetch(e,t).then(o).catch(a).then(()=>{clearTimeout(i)})})}async function Cd(e,{signal:t}){return new Promise((r,n)=>{t&&(t.throwIfAborted(),t.addEventListener("abort",o,{once:!0}));function o(){clearTimeout(a),n(t.reason)}const a=setTimeout(()=>{t==null||t.removeEventListener("abort",o),r()},e)})}const Pd=(e,t)=>{const r={};for(const n in t)!(n in wd)&&!(n in bd)&&!(n in e)&&(r[n]=t[n]);return r};class qr{constructor(t,r={}){N(this,"request");N(this,"abortController");N(this,"_retryCount",0);N(this,"_input");N(this,"_options");var n,o;if(this._input=t,this._options={...r,headers:lc(this._input.headers,r.headers),hooks:dc({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},r.hooks),method:Sd(r.method??this._input.method??"GET"),prefixUrl:String(r.prefixUrl||""),retry:Td(r.retry),throwHttpErrors:r.throwHttpErrors!==!1,timeout:r.timeout??1e4,fetch:r.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(fd&&hd){const a=this._options.signal??this._input.signal;this.abortController=new globalThis.AbortController,this._options.signal=a?AbortSignal.any([a,this.abortController.signal]):this.abortController.signal}if(xi&&(this._options.duplex="half"),this._options.json!==void 0&&(this._options.body=((o=(n=this._options).stringifyJson)==null?void 0:o.call(n,this._options.json))??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const i="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),s=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,i);(md&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(s,{...this.request}),this._options)}if(this._options.onUploadProgress){if(typeof this._options.onUploadProgress!="function")throw new TypeError("The `onUploadProgress` option must be a function");if(!xi)throw new Error("Request streams are not supported in your environment. The `duplex` option for `Request` is not available.");this.request.body&&(this.request=Ed(this.request,this._options.onUploadProgress))}}static create(t,r){const n=new qr(t,r),o=async()=>{if(typeof n._options.timeout=="number"&&n._options.timeout>Xn)throw new RangeError(`The \`timeout\` option cannot be greater than ${Xn}`);await Promise.resolve();let s=await n._fetch();for(const c of n._options.hooks.afterResponse){const l=await c(n.request,n._options,n._decorateResponse(s.clone()));l instanceof globalThis.Response&&(s=l)}if(n._decorateResponse(s),!s.ok&&n._options.throwHttpErrors){let c=new Wr(s,n.request,n._options);for(const l of n._options.hooks.beforeError)c=await l(c);throw c}if(n._options.onDownloadProgress){if(typeof n._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!pd)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return vd(s.clone(),n._options.onDownloadProgress)}return s},i=(n._options.retry.methods.includes(n.request.method.toLowerCase())?n._retry(o):o()).finally(async()=>{var s;n.request.bodyUsed||await((s=n.request.body)==null?void 0:s.cancel())});for(const[s,c]of Object.entries(yd))i[s]=async()=>{n.request.headers.set("accept",n.request.headers.get("accept")||c);const l=await i;if(s==="json"){if(l.status===204||(await l.clone().arrayBuffer()).byteLength===0)return"";if(r.parseJson)return r.parseJson(await l.text())}return l[s]()};return i}_calculateRetryDelay(t){if(this._retryCount++,this._retryCount>this._options.retry.limit||t instanceof sc)throw t;if(t instanceof Wr){if(!this._options.retry.statusCodes.includes(t.response.status))throw t;const n=t.response.headers.get("Retry-After")??t.response.headers.get("RateLimit-Reset")??t.response.headers.get("X-RateLimit-Reset")??t.response.headers.get("X-Rate-Limit-Reset");if(n&&this._options.retry.afterStatusCodes.includes(t.response.status)){let o=Number(n)*1e3;Number.isNaN(o)?o=Date.parse(n)-Date.now():o>=Date.parse("2024-01-01")&&(o-=Date.now());const a=this._options.retry.maxRetryAfter??o;return o<a?o:a}if(t.response.status===413)throw t}const r=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,r)}_decorateResponse(t){return this._options.parseJson&&(t.json=async()=>this._options.parseJson(await t.text())),t}async _retry(t){try{return await t()}catch(r){const n=Math.min(this._calculateRetryDelay(r),Xn);if(this._retryCount<1)throw r;await Cd(n,{signal:this._options.signal});for(const o of this._options.hooks.beforeRetry)if(await o({request:this.request,options:this._options,error:r,retryCount:this._retryCount})===uc)return;return this._retry(t)}}async _fetch(){for(const n of this._options.hooks.beforeRequest){const o=await n(this.request,this._options);if(o instanceof Request){this.request=o;break}if(o instanceof Response)return o}const t=Pd(this.request,this._options),r=this.request;return this.request=r.clone(),this._options.timeout===!1?this._options.fetch(r,t):Rd(r,t,this.abortController,this._options)}}/*! MIT License © Sindre Sorhus */const Wo=e=>{const t=(r,n)=>qr.create(r,Er(e,n));for(const r of cc)t[r]=(n,o)=>qr.create(n,Er(e,o,{method:r}));return t.create=r=>Wo(Er(r)),t.extend=r=>(typeof r=="function"&&(r=r(e??{})),Wo(Er(e,r))),t.stop=uc,t},qo=Wo();var Ti=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},Re=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Ft,Ge,Ct,Hr,fc,Ho;const hc=4096,Ko=160,Zn=hc-Ko;function pc(e){const t=e?"__Secure-":"";return{sessionToken:{name:`${t}authjs.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},callbackUrl:{name:`${t}authjs.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},csrfToken:{name:`${e?"__Host-":""}authjs.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},pkceCodeVerifier:{name:`${t}authjs.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},state:{name:`${t}authjs.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},nonce:{name:`${t}authjs.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},webauthnChallenge:{name:`${t}authjs.challenge`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}}}}class Od{constructor(t,r,n){if(Ft.add(this),Ge.set(this,{}),Ct.set(this,void 0),Hr.set(this,void 0),Ti(this,Hr,n,"f"),Ti(this,Ct,t,"f"),!r)return;const{name:o}=t;for(const[a,i]of Object.entries(r))!a.startsWith(o)||!i||(Re(this,Ge,"f")[a]=i)}get value(){return Object.keys(Re(this,Ge,"f")).sort((r,n)=>{const o=parseInt(r.split(".").pop()||"0"),a=parseInt(n.split(".").pop()||"0");return o-a}).map(r=>Re(this,Ge,"f")[r]).join("")}chunk(t,r){const n=Re(this,Ft,"m",Ho).call(this),o=Re(this,Ft,"m",fc).call(this,{name:Re(this,Ct,"f").name,value:t,options:{...Re(this,Ct,"f").options,...r}});for(const a of o)n[a.name]=a;return Object.values(n)}clean(){return Object.values(Re(this,Ft,"m",Ho).call(this))}}Ge=new WeakMap,Ct=new WeakMap,Hr=new WeakMap,Ft=new WeakSet,fc=function(t){const r=Math.ceil(t.value.length/Zn);if(r===1)return Re(this,Ge,"f")[t.name]=t.value,[t];const n=[];for(let o=0;o<r;o++){const a=`${t.name}.${o}`,i=t.value.substr(o*Zn,Zn);n.push({...t,name:a,value:i}),Re(this,Ge,"f")[a]=i}return Re(this,Hr,"f").debug("CHUNKING_SESSION_COOKIE",{message:`Session cookie exceeds allowed ${hc} bytes.`,emptyCookieSize:Ko,valueSize:t.value.length,chunks:n.map(o=>o.value.length+Ko)}),n},Ho=function(){var r;const t={};for(const n in Re(this,Ge,"f"))(r=Re(this,Ge,"f"))==null||delete r[n],t[n]={name:n,value:"",options:{...Re(this,Ct,"f").options,maxAge:0}};return t};class H extends Error{constructor(t,r){var o;t instanceof Error?super(void 0,{cause:{err:t,...t.cause,...r}}):typeof t=="string"?(r instanceof Error&&(r={err:r,...r.cause}),super(t,r)):super(void 0,t),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",(o=Error.captureStackTrace)==null||o.call(Error,this,this.constructor);const n=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${n}`}}class dt extends H{}dt.kind="signIn";class _a extends H{}_a.type="AdapterError";class or extends H{}or.type="AccessDenied";class mc extends H{}mc.type="CallbackRouteError";class yc extends H{}yc.type="ErrorPageLoop";class gc extends H{}gc.type="EventError";class Bo extends H{}Bo.type="InvalidCallbackUrl";class va extends dt{constructor(){super(...arguments),this.code="credentials"}}va.type="CredentialsSignin";class bc extends H{}bc.type="InvalidEndpoints";class Lt extends H{}Lt.type="InvalidCheck";class wc extends H{}wc.type="JWTSessionError";class Yt extends H{}Yt.type="MissingAdapter";class _c extends H{}_c.type="MissingAdapterMethods";class vc extends H{}vc.type="MissingAuthorize";class Ec extends H{}Ec.type="MissingSecret";class zo extends dt{}zo.type="OAuthAccountNotLinked";class Jo extends dt{}Jo.type="OAuthCallbackError";class Sc extends H{}Sc.type="OAuthProfileParseError";class Ac extends H{}Ac.type="SessionTokenError";class Id extends dt{}Id.type="OAuthSignInError";class Ud extends dt{}Ud.type="EmailSignInError";class xc extends H{}xc.type="SignOutError";class ct extends H{}ct.type="UnknownAction";class kc extends H{}kc.type="UnsupportedStrategy";class Kr extends H{}Kr.type="InvalidProvider";class Tc extends H{}Tc.type="UntrustedHost";class Rc extends H{}Rc.type="Verification";class Cc extends dt{}Cc.type="MissingCSRF";const $d=new Set(["CredentialsSignin","OAuthAccountNotLinked","OAuthCallbackError","AccessDenied","Verification","MissingCSRF","AccountNotLinked","WebAuthnVerificationError"]);function Dd(e){return e instanceof H?$d.has(e.type):!1}class Pc extends H{}Pc.type="DuplicateConditionalUI";class Oc extends H{}Oc.type="MissingWebAuthnAutocomplete";class ar extends H{}ar.type="WebAuthnVerificationError";class Fo extends dt{}Fo.type="AccountNotLinked";class Ic extends H{}Ic.type="ExperimentalFeatureNotEnabled";let Qn=!1;function Ri(e,t){try{return/^https?:/.test(new URL(e,e.startsWith("/")?t:void 0).protocol)}catch{return!1}}function Nd(e){return/^v\d+(?:\.\d+){0,2}$/.test(e)}let Ci=!1,Yn=!1,Pi=!1;const jd=["createVerificationToken","useVerificationToken","getUserByEmail"],Ld=["createUser","getUser","getUserByEmail","getUserByAccount","updateUser","linkAccount","createSession","getSessionAndUser","updateSession","deleteSession"],Md=["createUser","getUser","linkAccount","getAccount","getAuthenticator","createAuthenticator","listAuthenticatorsByUserId","updateAuthenticatorCounter"];function Wd(e,t){var u,h,g,p,y,m,b,_;const{url:r}=e,n=[];if(!Qn&&t.debug&&n.push("debug-enabled"),!t.trustHost)return new Tc(`Host must be trusted. URL was: ${e.url}`);if(!((u=t.secret)!=null&&u.length))return new Ec("Please define a `secret`");const o=(h=e.query)==null?void 0:h.callbackUrl;if(o&&!Ri(o,r.origin))return new Bo(`Invalid callback URL. Received: ${o}`);const{callbackUrl:a}=pc(t.useSecureCookies??r.protocol==="https:"),i=(y=e.cookies)==null?void 0:y[((p=(g=t.cookies)==null?void 0:g.callbackUrl)==null?void 0:p.name)??a.name];if(i&&!Ri(i,r.origin))return new Bo(`Invalid callback URL. Received: ${i}`);let s=!1;for(const v of t.providers){const w=typeof v=="function"?v():v;if((w.type==="oauth"||w.type==="oidc")&&!(w.issuer??((m=w.options)==null?void 0:m.issuer))){const{authorization:f,token:A,userinfo:E}=w;let S;if(typeof f!="string"&&!(f!=null&&f.url)?S="authorization":typeof A!="string"&&!(A!=null&&A.url)?S="token":typeof E!="string"&&!(E!=null&&E.url)&&(S="userinfo"),S)return new bc(`Provider "${w.id}" is missing both \`issuer\` and \`${S}\` endpoint config. At least one of them is required`)}if(w.type==="credentials")Ci=!0;else if(w.type==="email")Yn=!0;else if(w.type==="webauthn"){if(Pi=!0,w.simpleWebAuthnBrowserVersion&&!Nd(w.simpleWebAuthnBrowserVersion))return new H(`Invalid provider config for "${w.id}": simpleWebAuthnBrowserVersion "${w.simpleWebAuthnBrowserVersion}" must be a valid semver string.`);if(w.enableConditionalUI){if(s)return new Pc("Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time");if(s=!0,!Object.values(w.formFields).some(A=>A.autocomplete&&A.autocomplete.toString().indexOf("webauthn")>-1))return new Oc(`Provider "${w.id}" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param`)}}}if(Ci){const v=((b=t.session)==null?void 0:b.strategy)==="database",w=!t.providers.some(A=>(typeof A=="function"?A():A).type!=="credentials");if(v&&w)return new kc("Signing in with credentials only supported if JWT strategy is enabled");if(t.providers.some(A=>{const E=typeof A=="function"?A():A;return E.type==="credentials"&&!E.authorize}))return new vc("Must define an authorize() handler to use credentials authentication provider")}const{adapter:c,session:l}=t,d=[];if(Yn||(l==null?void 0:l.strategy)==="database"||!(l!=null&&l.strategy)&&c)if(Yn){if(!c)return new Yt("Email login requires an adapter");d.push(...jd)}else{if(!c)return new Yt("Database session requires an adapter");d.push(...Ld)}if(Pi){if((_=t.experimental)!=null&&_.enableWebAuthn)n.push("experimental-webauthn");else return new Ic("WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config");if(!c)return new Yt("WebAuthn requires an adapter");d.push(...Md)}if(c){const v=d.filter(w=>!(w in c));if(v.length)return new _c(`Required adapter methods were missing: ${v.join(", ")}`)}return Qn||(Qn=!0),n}const qd=()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;throw new Error("unable to locate global object")},Hd=async(e,t,r,n,o)=>{const{crypto:{subtle:a}}=qd();return new Uint8Array(await a.deriveBits({name:"HKDF",hash:`SHA-${e.substr(3)}`,salt:r,info:n},await a.importKey("raw",t,"HKDF",!1,["deriveBits"]),o<<3))};function Kd(e){switch(e){case"sha256":case"sha384":case"sha512":case"sha1":return e;default:throw new TypeError('unsupported "digest" value')}}function Ea(e,t){if(typeof e=="string")return new TextEncoder().encode(e);if(!(e instanceof Uint8Array))throw new TypeError(`"${t}"" must be an instance of Uint8Array or a string`);return e}function Bd(e){const t=Ea(e,"ikm");if(!t.byteLength)throw new TypeError('"ikm" must be at least one byte in length');return t}function zd(e){const t=Ea(e,"info");if(t.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return t}function Jd(e,t){if(typeof e!="number"||!Number.isInteger(e)||e<1)throw new TypeError('"keylen" must be a positive integer');const r=parseInt(t.substr(3),10)>>3||20;if(e>255*r)throw new TypeError('"keylen" too large');return e}async function Fd(e,t,r,n,o){return Hd(Kd(e),Bd(t),Ea(r,"salt"),zd(n),Jd(o,e))}const $e=new TextEncoder,St=new TextDecoder,Br=2**32;function ft(...e){const t=e.reduce((o,{length:a})=>o+a,0),r=new Uint8Array(t);let n=0;for(const o of e)r.set(o,n),n+=o.length;return r}function Go(e,t,r){if(t<0||t>=Br)throw new RangeError(`value must be >= 0 and <= ${Br-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,t&255],r)}function Uc(e){const t=Math.floor(e/Br),r=e%Br,n=new Uint8Array(8);return Go(n,t,0),Go(n,r,4),n}function Sa(e){const t=new Uint8Array(4);return Go(t,e),t}function Gd(e){if(Uint8Array.prototype.toBase64)return e.toBase64();const t=32768,r=[];for(let n=0;n<e.length;n+=t)r.push(String.fromCharCode.apply(null,e.subarray(n,n+t)));return btoa(r.join(""))}function Vd(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(e);const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}function Ce(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof e=="string"?e:St.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=St.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Vd(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function Ae(e){let t=e;return typeof t=="string"&&(t=$e.encode(t)),Uint8Array.prototype.toBase64?t.toBase64({alphabet:"base64url",omitPadding:!0}):Gd(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class et extends Error{constructor(r,n){var o;super(r,n);N(this,"code","ERR_JOSE_GENERIC");this.name=this.constructor.name,(o=Error.captureStackTrace)==null||o.call(Error,this,this.constructor)}}N(et,"code","ERR_JOSE_GENERIC");class Te extends et{constructor(r,n,o="unspecified",a="unspecified"){super(r,{cause:{claim:o,reason:a,payload:n}});N(this,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");N(this,"claim");N(this,"reason");N(this,"payload");this.claim=o,this.reason=a,this.payload=n}}N(Te,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");class Vo extends et{constructor(r,n,o="unspecified",a="unspecified"){super(r,{cause:{claim:o,reason:a,payload:n}});N(this,"code","ERR_JWT_EXPIRED");N(this,"claim");N(this,"reason");N(this,"payload");this.claim=o,this.reason=a,this.payload=n}}N(Vo,"code","ERR_JWT_EXPIRED");class Xo extends et{constructor(){super(...arguments);N(this,"code","ERR_JOSE_ALG_NOT_ALLOWED")}}N(Xo,"code","ERR_JOSE_ALG_NOT_ALLOWED");class le extends et{constructor(){super(...arguments);N(this,"code","ERR_JOSE_NOT_SUPPORTED")}}N(le,"code","ERR_JOSE_NOT_SUPPORTED");class zr extends et{constructor(r="decryption operation failed",n){super(r,n);N(this,"code","ERR_JWE_DECRYPTION_FAILED")}}N(zr,"code","ERR_JWE_DECRYPTION_FAILED");class $ extends et{constructor(){super(...arguments);N(this,"code","ERR_JWE_INVALID")}}N($,"code","ERR_JWE_INVALID");class ze extends et{constructor(){super(...arguments);N(this,"code","ERR_JWT_INVALID")}}N(ze,"code","ERR_JWT_INVALID");class $c extends et{constructor(){super(...arguments);N(this,"code","ERR_JWK_INVALID")}}N($c,"code","ERR_JWK_INVALID");function Dc(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new le(`Unsupported JWE Algorithm: ${e}`)}}const Xd=e=>crypto.getRandomValues(new Uint8Array(Dc(e)>>3)),Nc=(e,t)=>{if(t.length<<3!==Dc(e))throw new $("Invalid Initialization Vector length")},Jr=(e,t)=>{const r=e.byteLength<<3;if(r!==t)throw new $(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)};function nt(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function Ar(e,t){return e.name===t}function Zd(e){return parseInt(e.name.slice(4),10)}function Qd(e,t){if(t&&!e.usages.includes(t))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${t}.`)}function ut(e,t,r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!Ar(e.algorithm,"AES-GCM"))throw nt("AES-GCM");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw nt(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!Ar(e.algorithm,"AES-KW"))throw nt("AES-KW");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw nt(n,"algorithm.length");break}case"ECDH":{switch(e.algorithm.name){case"ECDH":case"X25519":break;default:throw nt("ECDH or X25519")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!Ar(e.algorithm,"PBKDF2"))throw nt("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!Ar(e.algorithm,"RSA-OAEP"))throw nt("RSA-OAEP");const n=parseInt(t.slice(9),10)||1;if(Zd(e.algorithm.hash)!==n)throw nt(`SHA-${n}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}Qd(e,r)}function jc(e,t,...r){var n;if(r=r.filter(Boolean),r.length>2){const o=r.pop();e+=`one of type ${r.join(", ")}, or ${o}.`}else r.length===2?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&(n=t.constructor)!=null&&n.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const Wt=(e,...t)=>jc("Key must be ",e,...t);function Lc(e,t,...r){return jc(`Key for the ${e} algorithm must be `,t,...r)}function er(e){if(!qt(e))throw new Error("CryptoKey instance expected")}function qt(e){return(e==null?void 0:e[Symbol.toStringTag])==="CryptoKey"}function Aa(e){return(e==null?void 0:e[Symbol.toStringTag])==="KeyObject"}const xa=e=>qt(e)||Aa(e);async function Yd(e,t){if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");const r={name:"HMAC",hash:"SHA-256"},n=await crypto.subtle.generateKey(r,!1,["sign"]),o=new Uint8Array(await crypto.subtle.sign(r,n,e)),a=new Uint8Array(await crypto.subtle.sign(r,n,t));let i=0,s=-1;for(;++s<32;)i|=o[s]^a[s];return i===0}async function ef(e,t,r,n,o,a){if(!(t instanceof Uint8Array))throw new TypeError(Wt(t,"Uint8Array"));const i=parseInt(e.slice(1,4),10),s=await crypto.subtle.importKey("raw",t.subarray(i>>3),"AES-CBC",!1,["decrypt"]),c=await crypto.subtle.importKey("raw",t.subarray(0,i>>3),{hash:`SHA-${i<<1}`,name:"HMAC"},!1,["sign"]),l=ft(a,n,r,Uc(a.length<<3)),d=new Uint8Array((await crypto.subtle.sign("HMAC",c,l)).slice(0,i>>3));let u;try{u=await Yd(o,d)}catch{}if(!u)throw new zr;let h;try{h=new Uint8Array(await crypto.subtle.decrypt({iv:n,name:"AES-CBC"},s,r))}catch{}if(!h)throw new zr;return h}async function tf(e,t,r,n,o,a){let i;t instanceof Uint8Array?i=await crypto.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(ut(t,e,"decrypt"),i=t);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:a,iv:n,name:"AES-GCM",tagLength:128},i,ft(r,o)))}catch{throw new zr}}const Mc=async(e,t,r,n,o,a)=>{if(!qt(t)&&!(t instanceof Uint8Array))throw new TypeError(Wt(t,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!n)throw new $("JWE Initialization Vector missing");if(!o)throw new $("JWE Authentication Tag missing");switch(Nc(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&Jr(t,parseInt(e.slice(-3),10)),ef(e,t,r,n,o,a);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&Jr(t,parseInt(e.slice(1,4),10)),tf(e,t,r,n,o,a);default:throw new le("Unsupported JWE Content Encryption Algorithm")}},Wc=(...e)=>{const t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let r;for(const n of t){const o=Object.keys(n);if(!r||r.size===0){r=new Set(o);continue}for(const a of o){if(r.has(a))return!1;r.add(a)}}return!0};function rf(e){return typeof e=="object"&&e!==null}const Qe=e=>{if(!rf(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};function qc(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function Hc(e,t,r){return e instanceof Uint8Array?crypto.subtle.importKey("raw",e,"AES-KW",!0,[r]):(ut(e,t,r),e)}async function Zo(e,t,r){const n=await Hc(t,e,"wrapKey");qc(n,e);const o=await crypto.subtle.importKey("raw",r,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",o,n,"AES-KW"))}async function Qo(e,t,r){const n=await Hc(t,e,"unwrapKey");qc(n,e);const o=await crypto.subtle.unwrapKey("raw",r,n,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",o))}const Kc=async(e,t)=>{const r=`SHA-${e.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(r,t))};function eo(e){return ft(Sa(e.length),e)}async function nf(e,t,r){const n=Math.ceil((t>>3)/32),o=new Uint8Array(n*32);for(let a=0;a<n;a++){const i=new Uint8Array(4+e.length+r.length);i.set(Sa(a+1)),i.set(e,4),i.set(r,4+e.length),o.set(await Kc("sha256",i),a*32)}return o.slice(0,t>>3)}async function Bc(e,t,r,n,o=new Uint8Array(0),a=new Uint8Array(0)){ut(e,"ECDH"),ut(t,"ECDH","deriveBits");const i=ft(eo($e.encode(r)),eo(o),eo(a),Sa(n));let s;e.algorithm.name==="X25519"?s=256:s=Math.ceil(parseInt(e.algorithm.namedCurve.slice(-3),10)/8)<<3;const c=new Uint8Array(await crypto.subtle.deriveBits({name:e.algorithm.name,public:e},t,s));return nf(c,n,i)}function zc(e){switch(e.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return e.algorithm.name==="X25519"}}function of(e,t){return e instanceof Uint8Array?crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]):(ut(e,t,"deriveBits"),e)}const af=(e,t)=>ft($e.encode(e),new Uint8Array([0]),t);async function Jc(e,t,r,n){if(!(e instanceof Uint8Array)||e.length<8)throw new $("PBES2 Salt Input must be 8 or more octets");const o=af(t,e),a=parseInt(t.slice(13,16),10),i={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:o},s=await of(n,t);return new Uint8Array(await crypto.subtle.deriveBits(i,s,a))}async function sf(e,t,r,n=2048,o=crypto.getRandomValues(new Uint8Array(16))){const a=await Jc(o,e,n,t);return{encryptedKey:await Zo(e.slice(-6),a,r),p2c:n,p2s:Ae(o)}}async function cf(e,t,r,n,o){const a=await Jc(o,e,n,t);return Qo(e.slice(-6),a,r)}const Fc=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:r}=t.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}},Gc=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new le(`alg ${e} is not supported either by JOSE or your javascript runtime`)}};async function uf(e,t,r){return ut(t,e,"encrypt"),Fc(e,t),new Uint8Array(await crypto.subtle.encrypt(Gc(e),t,r))}async function lf(e,t,r){return ut(t,e,"decrypt"),Fc(e,t),new Uint8Array(await crypto.subtle.decrypt(Gc(e),t,r))}function ka(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new le(`Unsupported JWE Algorithm: ${e}`)}}const Tt=e=>crypto.getRandomValues(new Uint8Array(ka(e)>>3));function df(e){let t,r;switch(e.kty){case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new le('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new le('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"Ed25519":case"EdDSA":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new le('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new le('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}const Vc=async e=>{if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:t,keyUsages:r}=df(e),n={...e};return delete n.alg,delete n.use,crypto.subtle.importKey("jwk",n,t,e.ext??!e.d,e.key_ops??r)};async function ff(e,t,r){if(!Qe(e))throw new TypeError("JWK must be an object");let n;switch(t??(t=e.alg),n??(n=e.ext),e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return Ce(e.k);case"RSA":if("oth"in e&&e.oth!==void 0)throw new le('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Vc({...e,alg:t,ext:n});default:throw new le('Unsupported "kty" (Key Type) Parameter value')}}async function hf(e,t,r,n,o){if(!(r instanceof Uint8Array))throw new TypeError(Wt(r,"Uint8Array"));const a=parseInt(e.slice(1,4),10),i=await crypto.subtle.importKey("raw",r.subarray(a>>3),"AES-CBC",!1,["encrypt"]),s=await crypto.subtle.importKey("raw",r.subarray(0,a>>3),{hash:`SHA-${a<<1}`,name:"HMAC"},!1,["sign"]),c=new Uint8Array(await crypto.subtle.encrypt({iv:n,name:"AES-CBC"},i,t)),l=ft(o,n,c,Uc(o.length<<3)),d=new Uint8Array((await crypto.subtle.sign("HMAC",s,l)).slice(0,a>>3));return{ciphertext:c,tag:d,iv:n}}async function pf(e,t,r,n,o){let a;r instanceof Uint8Array?a=await crypto.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(ut(r,e,"encrypt"),a=r);const i=new Uint8Array(await crypto.subtle.encrypt({additionalData:o,iv:n,name:"AES-GCM",tagLength:128},a,t)),s=i.slice(-16);return{ciphertext:i.slice(0,-16),tag:s,iv:n}}const Xc=async(e,t,r,n,o)=>{if(!qt(r)&&!(r instanceof Uint8Array))throw new TypeError(Wt(r,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));switch(n?Nc(e,n):n=Xd(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&Jr(r,parseInt(e.slice(-3),10)),hf(e,t,r,n,o);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&Jr(r,parseInt(e.slice(1,4),10)),pf(e,t,r,n,o);default:throw new le("Unsupported JWE Content Encryption Algorithm")}};async function mf(e,t,r,n){const o=e.slice(0,7),a=await Xc(o,r,t,n,new Uint8Array(0));return{encryptedKey:a.ciphertext,iv:Ae(a.iv),tag:Ae(a.tag)}}async function yf(e,t,r,n,o){const a=e.slice(0,7);return Mc(a,t,r,n,o,new Uint8Array(0))}const gf=async(e,t,r,n,o)=>{switch(e){case"dir":{if(r!==void 0)throw new $("Encountered unexpected JWE Encrypted Key");return t}case"ECDH-ES":if(r!==void 0)throw new $("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!Qe(n.epk))throw new $('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(er(t),!zc(t))throw new le("ECDH with the provided key is not allowed or not supported by your javascript runtime");const a=await ff(n.epk,e);er(a);let i,s;if(n.apu!==void 0){if(typeof n.apu!="string")throw new $('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{i=Ce(n.apu)}catch{throw new $("Failed to base64url decode the apu")}}if(n.apv!==void 0){if(typeof n.apv!="string")throw new $('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{s=Ce(n.apv)}catch{throw new $("Failed to base64url decode the apv")}}const c=await Bc(a,t,e==="ECDH-ES"?n.enc:e,e==="ECDH-ES"?ka(n.enc):parseInt(e.slice(-5,-2),10),i,s);if(e==="ECDH-ES")return c;if(r===void 0)throw new $("JWE Encrypted Key missing");return Qo(e.slice(-6),c,r)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(r===void 0)throw new $("JWE Encrypted Key missing");return er(t),lf(e,t,r)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(r===void 0)throw new $("JWE Encrypted Key missing");if(typeof n.p2c!="number")throw new $('JOSE Header "p2c" (PBES2 Count) missing or invalid');const a=(o==null?void 0:o.maxPBES2Count)||1e4;if(n.p2c>a)throw new $('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof n.p2s!="string")throw new $('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let i;try{i=Ce(n.p2s)}catch{throw new $("Failed to base64url decode the p2s")}return cf(e,t,r,n.p2c,i)}case"A128KW":case"A192KW":case"A256KW":{if(r===void 0)throw new $("JWE Encrypted Key missing");return Qo(e,t,r)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(r===void 0)throw new $("JWE Encrypted Key missing");if(typeof n.iv!="string")throw new $('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof n.tag!="string")throw new $('JOSE Header "tag" (Authentication Tag) missing or invalid');let a;try{a=Ce(n.iv)}catch{throw new $("Failed to base64url decode the iv")}let i;try{i=Ce(n.tag)}catch{throw new $("Failed to base64url decode the tag")}return yf(e,t,r,a,i)}default:throw new le('Invalid or unsupported "alg" (JWE Algorithm) header value')}},Zc=(e,t,r,n,o)=>{if(o.crit!==void 0&&(n==null?void 0:n.crit)===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(i=>typeof i!="string"||i.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let a;r!==void 0?a=new Map([...Object.entries(r),...t.entries()]):a=t;for(const i of n.crit){if(!a.has(i))throw new le(`Extension Header Parameter "${i}" is not recognized`);if(o[i]===void 0)throw new e(`Extension Header Parameter "${i}" is missing`);if(a.get(i)&&n[i]===void 0)throw new e(`Extension Header Parameter "${i}" MUST be integrity protected`)}return new Set(n.crit)},Oi=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(r=>typeof r!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};function an(e){return Qe(e)&&typeof e.kty=="string"}function bf(e){return e.kty!=="oct"&&typeof e.d=="string"}function wf(e){return e.kty!=="oct"&&typeof e.d>"u"}function _f(e){return e.kty==="oct"&&typeof e.k=="string"}let Ot;const Ii=async(e,t,r,n=!1)=>{Ot||(Ot=new WeakMap);let o=Ot.get(e);if(o!=null&&o[r])return o[r];const a=await Vc({...t,alg:r});return n&&Object.freeze(e),o?o[r]=a:Ot.set(e,{[r]:a}),a},vf=(e,t)=>{var i;Ot||(Ot=new WeakMap);let r=Ot.get(e);if(r!=null&&r[t])return r[t];const n=e.type==="public",o=!!n;let a;if(e.asymmetricKeyType==="x25519"){switch(t){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}a=e.toCryptoKey(e.asymmetricKeyType,o,n?[]:["deriveBits"])}if(e.asymmetricKeyType==="ed25519"){if(t!=="EdDSA"&&t!=="Ed25519")throw new TypeError("given KeyObject instance cannot be used for this algorithm");a=e.toCryptoKey(e.asymmetricKeyType,o,[n?"verify":"sign"])}if(e.asymmetricKeyType==="rsa"){let s;switch(t){case"RSA-OAEP":s="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":s="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":s="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":s="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(t.startsWith("RSA-OAEP"))return e.toCryptoKey({name:"RSA-OAEP",hash:s},o,n?["encrypt"]:["decrypt"]);a=e.toCryptoKey({name:t.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:s},o,[n?"verify":"sign"])}if(e.asymmetricKeyType==="ec"){const c=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get((i=e.asymmetricKeyDetails)==null?void 0:i.namedCurve);if(!c)throw new TypeError("given KeyObject instance cannot be used for this algorithm");t==="ES256"&&c==="P-256"&&(a=e.toCryptoKey({name:"ECDSA",namedCurve:c},o,[n?"verify":"sign"])),t==="ES384"&&c==="P-384"&&(a=e.toCryptoKey({name:"ECDSA",namedCurve:c},o,[n?"verify":"sign"])),t==="ES512"&&c==="P-521"&&(a=e.toCryptoKey({name:"ECDSA",namedCurve:c},o,[n?"verify":"sign"])),t.startsWith("ECDH-ES")&&(a=e.toCryptoKey({name:"ECDH",namedCurve:c},o,n?[]:["deriveBits"]))}if(!a)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return r?r[t]=a:Ot.set(e,{[t]:a}),a},Ta=async(e,t)=>{if(e instanceof Uint8Array||qt(e))return e;if(Aa(e)){if(e.type==="secret")return e.export();if("toCryptoKey"in e&&typeof e.toCryptoKey=="function")try{return vf(e,t)}catch(n){if(n instanceof TypeError)throw n}let r=e.export({format:"jwk"});return Ii(e,r,t)}if(an(e))return e.k?Ce(e.k):Ii(e,e,t,!0);throw new Error("unreachable")},Rt=e=>e==null?void 0:e[Symbol.toStringTag],Yo=(e,t,r)=>{var n,o;if(t.use!==void 0){let a;switch(r){case"sign":case"verify":a="sig";break;case"encrypt":case"decrypt":a="enc";break}if(t.use!==a)throw new TypeError(`Invalid key for this operation, its "use" must be "${a}" when present`)}if(t.alg!==void 0&&t.alg!==e)throw new TypeError(`Invalid key for this operation, its "alg" must be "${e}" when present`);if(Array.isArray(t.key_ops)){let a;switch(!0){case(r==="sign"||r==="verify"):case e==="dir":case e.includes("CBC-HS"):a=r;break;case e.startsWith("PBES2"):a="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(e):!e.includes("GCM")&&e.endsWith("KW")?a=r==="encrypt"?"wrapKey":"unwrapKey":a=r;break;case(r==="encrypt"&&e.startsWith("RSA")):a="wrapKey";break;case r==="decrypt":a=e.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(a&&((o=(n=t.key_ops)==null?void 0:n.includes)==null?void 0:o.call(n,a))===!1)throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${a}" when present`)}return!0},Ef=(e,t,r)=>{if(!(t instanceof Uint8Array)){if(an(t)){if(_f(t)&&Yo(e,t,r))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!xa(t))throw new TypeError(Lc(e,t,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(t.type!=="secret")throw new TypeError(`${Rt(t)} instances for symmetric algorithms must be of type "secret"`)}},Sf=(e,t,r)=>{if(an(t))switch(r){case"decrypt":case"sign":if(bf(t)&&Yo(e,t,r))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(wf(t)&&Yo(e,t,r))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!xa(t))throw new TypeError(Lc(e,t,"CryptoKey","KeyObject","JSON Web Key"));if(t.type==="secret")throw new TypeError(`${Rt(t)} instances for asymmetric algorithms must not be of type "secret"`);if(t.type==="public")switch(r){case"sign":throw new TypeError(`${Rt(t)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${Rt(t)} instances for asymmetric algorithm decryption must be of type "private"`)}if(t.type==="private")switch(r){case"verify":throw new TypeError(`${Rt(t)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${Rt(t)} instances for asymmetric algorithm encryption must be of type "public"`)}},Qc=(e,t,r)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(e)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(e)?Ef(e,t,r):Sf(e,t,r)};async function Af(e,t,r){if(!Qe(e))throw new $("Flattened JWE must be an object");if(e.protected===void 0&&e.header===void 0&&e.unprotected===void 0)throw new $("JOSE Header missing");if(e.iv!==void 0&&typeof e.iv!="string")throw new $("JWE Initialization Vector incorrect type");if(typeof e.ciphertext!="string")throw new $("JWE Ciphertext missing or incorrect type");if(e.tag!==void 0&&typeof e.tag!="string")throw new $("JWE Authentication Tag incorrect type");if(e.protected!==void 0&&typeof e.protected!="string")throw new $("JWE Protected Header incorrect type");if(e.encrypted_key!==void 0&&typeof e.encrypted_key!="string")throw new $("JWE Encrypted Key incorrect type");if(e.aad!==void 0&&typeof e.aad!="string")throw new $("JWE AAD incorrect type");if(e.header!==void 0&&!Qe(e.header))throw new $("JWE Shared Unprotected Header incorrect type");if(e.unprotected!==void 0&&!Qe(e.unprotected))throw new $("JWE Per-Recipient Unprotected Header incorrect type");let n;if(e.protected)try{const w=Ce(e.protected);n=JSON.parse(St.decode(w))}catch{throw new $("JWE Protected Header is invalid")}if(!Wc(n,e.header,e.unprotected))throw new $("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const o={...n,...e.header,...e.unprotected};if(Zc($,new Map,r==null?void 0:r.crit,n,o),o.zip!==void 0)throw new le('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:a,enc:i}=o;if(typeof a!="string"||!a)throw new $("missing JWE Algorithm (alg) in JWE Header");if(typeof i!="string"||!i)throw new $("missing JWE Encryption Algorithm (enc) in JWE Header");const s=r&&Oi("keyManagementAlgorithms",r.keyManagementAlgorithms),c=r&&Oi("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(s&&!s.has(a)||!s&&a.startsWith("PBES2"))throw new Xo('"alg" (Algorithm) Header Parameter value not allowed');if(c&&!c.has(i))throw new Xo('"enc" (Encryption Algorithm) Header Parameter value not allowed');let l;if(e.encrypted_key!==void 0)try{l=Ce(e.encrypted_key)}catch{throw new $("Failed to base64url decode the encrypted_key")}let d=!1;typeof t=="function"&&(t=await t(n,e),d=!0),Qc(a==="dir"?i:a,t,"decrypt");const u=await Ta(t,a);let h;try{h=await gf(a,u,l,o,r)}catch(w){if(w instanceof TypeError||w instanceof $||w instanceof le)throw w;h=Tt(i)}let g,p;if(e.iv!==void 0)try{g=Ce(e.iv)}catch{throw new $("Failed to base64url decode the iv")}if(e.tag!==void 0)try{p=Ce(e.tag)}catch{throw new $("Failed to base64url decode the tag")}const y=$e.encode(e.protected??"");let m;e.aad!==void 0?m=ft(y,$e.encode("."),$e.encode(e.aad)):m=y;let b;try{b=Ce(e.ciphertext)}catch{throw new $("Failed to base64url decode the ciphertext")}const v={plaintext:await Mc(i,h,b,g,p,m)};if(e.protected!==void 0&&(v.protectedHeader=n),e.aad!==void 0)try{v.additionalAuthenticatedData=Ce(e.aad)}catch{throw new $("Failed to base64url decode the aad")}return e.unprotected!==void 0&&(v.sharedUnprotectedHeader=e.unprotected),e.header!==void 0&&(v.unprotectedHeader=e.header),d?{...v,key:u}:v}async function xf(e,t,r){if(e instanceof Uint8Array&&(e=St.decode(e)),typeof e!="string")throw new $("Compact JWE must be a string or Uint8Array");const{0:n,1:o,2:a,3:i,4:s,length:c}=e.split(".");if(c!==5)throw new $("Invalid Compact JWE");const l=await Af({ciphertext:i,iv:a||void 0,protected:n,tag:s||void 0,encrypted_key:o||void 0},t,r),d={plaintext:l.plaintext,protectedHeader:l.protectedHeader};return typeof t=="function"?{...d,key:l.key}:d}const kf=Symbol();async function Tf(e){if(Aa(e))if(e.type==="secret")e=e.export();else return e.export({format:"jwk"});if(e instanceof Uint8Array)return{kty:"oct",k:Ae(e)};if(!qt(e))throw new TypeError(Wt(e,"CryptoKey","KeyObject","Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:r,alg:n,use:o,...a}=await crypto.subtle.exportKey("jwk",e);return a}async function Yc(e){return Tf(e)}const Rf=async(e,t,r,n,o={})=>{let a,i,s;switch(e){case"dir":{s=r;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(er(r),!zc(r))throw new le("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:c,apv:l}=o;let d;o.epk?d=await Ta(o.epk,e):d=(await crypto.subtle.generateKey(r.algorithm,!0,["deriveBits"])).privateKey;const{x:u,y:h,crv:g,kty:p}=await Yc(d),y=await Bc(r,d,e==="ECDH-ES"?t:e,e==="ECDH-ES"?ka(t):parseInt(e.slice(-5,-2),10),c,l);if(i={epk:{x:u,crv:g,kty:p}},p==="EC"&&(i.epk.y=h),c&&(i.apu=Ae(c)),l&&(i.apv=Ae(l)),e==="ECDH-ES"){s=y;break}s=n||Tt(t);const m=e.slice(-6);a=await Zo(m,y,s);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{s=n||Tt(t),er(r),a=await uf(e,r,s);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{s=n||Tt(t);const{p2c:c,p2s:l}=o;({encryptedKey:a,...i}=await sf(e,r,s,c,l));break}case"A128KW":case"A192KW":case"A256KW":{s=n||Tt(t),a=await Zo(e,r,s);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{s=n||Tt(t);const{iv:c}=o;({encryptedKey:a,...i}=await mf(e,r,s,c));break}default:throw new le('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:s,encryptedKey:a,parameters:i}};var cr,Ee,Me,Oe,It,wt,Ut,$t;class Cf{constructor(t){fe(this,cr);fe(this,Ee);fe(this,Me);fe(this,Oe);fe(this,It);fe(this,wt);fe(this,Ut);fe(this,$t);if(!(t instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");ce(this,cr,t)}setKeyManagementParameters(t){if(k(this,$t))throw new TypeError("setKeyManagementParameters can only be called once");return ce(this,$t,t),this}setProtectedHeader(t){if(k(this,Ee))throw new TypeError("setProtectedHeader can only be called once");return ce(this,Ee,t),this}setSharedUnprotectedHeader(t){if(k(this,Me))throw new TypeError("setSharedUnprotectedHeader can only be called once");return ce(this,Me,t),this}setUnprotectedHeader(t){if(k(this,Oe))throw new TypeError("setUnprotectedHeader can only be called once");return ce(this,Oe,t),this}setAdditionalAuthenticatedData(t){return ce(this,It,t),this}setContentEncryptionKey(t){if(k(this,wt))throw new TypeError("setContentEncryptionKey can only be called once");return ce(this,wt,t),this}setInitializationVector(t){if(k(this,Ut))throw new TypeError("setInitializationVector can only be called once");return ce(this,Ut,t),this}async encrypt(t,r){if(!k(this,Ee)&&!k(this,Oe)&&!k(this,Me))throw new $("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Wc(k(this,Ee),k(this,Oe),k(this,Me)))throw new $("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const n={...k(this,Ee),...k(this,Oe),...k(this,Me)};if(Zc($,new Map,r==null?void 0:r.crit,k(this,Ee),n),n.zip!==void 0)throw new le('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:o,enc:a}=n;if(typeof o!="string"||!o)throw new $('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof a!="string"||!a)throw new $('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let i;if(k(this,wt)&&(o==="dir"||o==="ECDH-ES"))throw new TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${o}`);Qc(o==="dir"?a:o,t,"encrypt");let s;{let y;const m=await Ta(t,o);({cek:s,encryptedKey:i,parameters:y}=await Rf(o,a,m,k(this,wt),k(this,$t))),y&&(r&&kf in r?k(this,Oe)?ce(this,Oe,{...k(this,Oe),...y}):this.setUnprotectedHeader(y):k(this,Ee)?ce(this,Ee,{...k(this,Ee),...y}):this.setProtectedHeader(y))}let c,l,d;k(this,Ee)?l=$e.encode(Ae(JSON.stringify(k(this,Ee)))):l=$e.encode(""),k(this,It)?(d=Ae(k(this,It)),c=ft(l,$e.encode("."),$e.encode(d))):c=l;const{ciphertext:u,tag:h,iv:g}=await Xc(a,k(this,cr),s,k(this,Ut),c),p={ciphertext:Ae(u)};return g&&(p.iv=Ae(g)),h&&(p.tag=Ae(h)),i&&(p.encrypted_key=Ae(i)),d&&(p.aad=d),k(this,Ee)&&(p.protected=St.decode(l)),k(this,Me)&&(p.unprotected=k(this,Me)),k(this,Oe)&&(p.header=k(this,Oe)),p}}cr=new WeakMap,Ee=new WeakMap,Me=new WeakMap,Oe=new WeakMap,It=new WeakMap,wt=new WeakMap,Ut=new WeakMap,$t=new WeakMap;const it=e=>Math.floor(e.getTime()/1e3),eu=60,tu=eu*60,Ra=tu*24,Pf=Ra*7,Of=Ra*365.25,If=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,tr=e=>{const t=If.exec(e);if(!t||t[4]&&t[1])throw new TypeError("Invalid time period format");const r=parseFloat(t[2]),n=t[3].toLowerCase();let o;switch(n){case"sec":case"secs":case"second":case"seconds":case"s":o=Math.round(r);break;case"minute":case"minutes":case"min":case"mins":case"m":o=Math.round(r*eu);break;case"hour":case"hours":case"hr":case"hrs":case"h":o=Math.round(r*tu);break;case"day":case"days":case"d":o=Math.round(r*Ra);break;case"week":case"weeks":case"w":o=Math.round(r*Pf);break;default:o=Math.round(r*Of);break}return t[1]==="-"||t[4]==="ago"?-o:o};function pt(e,t){if(!Number.isFinite(t))throw new TypeError(`Invalid ${e} input`);return t}const Ui=e=>e.includes("/")?e.toLowerCase():`application/${e.toLowerCase()}`,Uf=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1;function $f(e,t,r={}){let n;try{n=JSON.parse(St.decode(t))}catch{}if(!Qe(n))throw new ze("JWT Claims Set must be a top-level JSON object");const{typ:o}=r;if(o&&(typeof e.typ!="string"||Ui(e.typ)!==Ui(o)))throw new Te('unexpected "typ" JWT header value',n,"typ","check_failed");const{requiredClaims:a=[],issuer:i,subject:s,audience:c,maxTokenAge:l}=r,d=[...a];l!==void 0&&d.push("iat"),c!==void 0&&d.push("aud"),s!==void 0&&d.push("sub"),i!==void 0&&d.push("iss");for(const p of new Set(d.reverse()))if(!(p in n))throw new Te(`missing required "${p}" claim`,n,p,"missing");if(i&&!(Array.isArray(i)?i:[i]).includes(n.iss))throw new Te('unexpected "iss" claim value',n,"iss","check_failed");if(s&&n.sub!==s)throw new Te('unexpected "sub" claim value',n,"sub","check_failed");if(c&&!Uf(n.aud,typeof c=="string"?[c]:c))throw new Te('unexpected "aud" claim value',n,"aud","check_failed");let u;switch(typeof r.clockTolerance){case"string":u=tr(r.clockTolerance);break;case"number":u=r.clockTolerance;break;case"undefined":u=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:h}=r,g=it(h||new Date);if((n.iat!==void 0||l)&&typeof n.iat!="number")throw new Te('"iat" claim must be a number',n,"iat","invalid");if(n.nbf!==void 0){if(typeof n.nbf!="number")throw new Te('"nbf" claim must be a number',n,"nbf","invalid");if(n.nbf>g+u)throw new Te('"nbf" claim timestamp check failed',n,"nbf","check_failed")}if(n.exp!==void 0){if(typeof n.exp!="number")throw new Te('"exp" claim must be a number',n,"exp","invalid");if(n.exp<=g-u)throw new Vo('"exp" claim timestamp check failed',n,"exp","check_failed")}if(l){const p=g-n.iat,y=typeof l=="number"?l:tr(l);if(p-u>y)throw new Vo('"iat" claim timestamp check failed (too far in the past)',n,"iat","check_failed");if(p<0-u)throw new Te('"iat" claim timestamp check failed (it should be in the past)',n,"iat","check_failed")}return n}var ue;class Df{constructor(t){fe(this,ue);if(!Qe(t))throw new TypeError("JWT Claims Set MUST be an object");ce(this,ue,structuredClone(t))}data(){return $e.encode(JSON.stringify(k(this,ue)))}get iss(){return k(this,ue).iss}set iss(t){k(this,ue).iss=t}get sub(){return k(this,ue).sub}set sub(t){k(this,ue).sub=t}get aud(){return k(this,ue).aud}set aud(t){k(this,ue).aud=t}set jti(t){k(this,ue).jti=t}set nbf(t){typeof t=="number"?k(this,ue).nbf=pt("setNotBefore",t):t instanceof Date?k(this,ue).nbf=pt("setNotBefore",it(t)):k(this,ue).nbf=it(new Date)+tr(t)}set exp(t){typeof t=="number"?k(this,ue).exp=pt("setExpirationTime",t):t instanceof Date?k(this,ue).exp=pt("setExpirationTime",it(t)):k(this,ue).exp=it(new Date)+tr(t)}set iat(t){typeof t>"u"?k(this,ue).iat=it(new Date):t instanceof Date?k(this,ue).iat=pt("setIssuedAt",it(t)):typeof t=="string"?k(this,ue).iat=pt("setIssuedAt",it(new Date)+tr(t)):k(this,ue).iat=pt("setIssuedAt",t)}}ue=new WeakMap;async function Nf(e,t,r){const n=await xf(e,t,r),o=$f(n.protectedHeader,n.plaintext,r),{protectedHeader:a}=n;if(a.iss!==void 0&&a.iss!==o.iss)throw new Te('replicated "iss" claim header parameter mismatch',o,"iss","mismatch");if(a.sub!==void 0&&a.sub!==o.sub)throw new Te('replicated "sub" claim header parameter mismatch',o,"sub","mismatch");if(a.aud!==void 0&&JSON.stringify(a.aud)!==JSON.stringify(o.aud))throw new Te('replicated "aud" claim header parameter mismatch',o,"aud","mismatch");const i={payload:o,protectedHeader:a};return typeof t=="function"?{...i,key:n.key}:i}var Je;class jf{constructor(t){fe(this,Je);ce(this,Je,new Cf(t))}setContentEncryptionKey(t){return k(this,Je).setContentEncryptionKey(t),this}setInitializationVector(t){return k(this,Je).setInitializationVector(t),this}setProtectedHeader(t){return k(this,Je).setProtectedHeader(t),this}setKeyManagementParameters(t){return k(this,Je).setKeyManagementParameters(t),this}async encrypt(t,r){const n=await k(this,Je).encrypt(t,r);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}}Je=new WeakMap;var _t,vt,Et,Fe,Dt,Nt,jt,Se;class Lf{constructor(t={}){fe(this,_t);fe(this,vt);fe(this,Et);fe(this,Fe);fe(this,Dt);fe(this,Nt);fe(this,jt);fe(this,Se);ce(this,Se,new Df(t))}setIssuer(t){return k(this,Se).iss=t,this}setSubject(t){return k(this,Se).sub=t,this}setAudience(t){return k(this,Se).aud=t,this}setJti(t){return k(this,Se).jti=t,this}setNotBefore(t){return k(this,Se).nbf=t,this}setExpirationTime(t){return k(this,Se).exp=t,this}setIssuedAt(t){return k(this,Se).iat=t,this}setProtectedHeader(t){if(k(this,Fe))throw new TypeError("setProtectedHeader can only be called once");return ce(this,Fe,t),this}setKeyManagementParameters(t){if(k(this,Et))throw new TypeError("setKeyManagementParameters can only be called once");return ce(this,Et,t),this}setContentEncryptionKey(t){if(k(this,_t))throw new TypeError("setContentEncryptionKey can only be called once");return ce(this,_t,t),this}setInitializationVector(t){if(k(this,vt))throw new TypeError("setInitializationVector can only be called once");return ce(this,vt,t),this}replicateIssuerAsHeader(){return ce(this,Dt,!0),this}replicateSubjectAsHeader(){return ce(this,Nt,!0),this}replicateAudienceAsHeader(){return ce(this,jt,!0),this}async encrypt(t,r){const n=new jf(k(this,Se).data());return k(this,Fe)&&(k(this,Dt)||k(this,Nt)||k(this,jt))&&ce(this,Fe,{...k(this,Fe),iss:k(this,Dt)?k(this,Se).iss:void 0,sub:k(this,Nt)?k(this,Se).sub:void 0,aud:k(this,jt)?k(this,Se).aud:void 0}),n.setProtectedHeader(k(this,Fe)),k(this,vt)&&n.setInitializationVector(k(this,vt)),k(this,_t)&&n.setContentEncryptionKey(k(this,_t)),k(this,Et)&&n.setKeyManagementParameters(k(this,Et)),n.encrypt(t,r)}}_t=new WeakMap,vt=new WeakMap,Et=new WeakMap,Fe=new WeakMap,Dt=new WeakMap,Nt=new WeakMap,jt=new WeakMap,Se=new WeakMap;const ot=(e,t)=>{if(typeof e!="string"||!e)throw new $c(`${t} missing or invalid`)};async function ru(e,t){let r;if(an(e))r=e;else if(xa(e))r=await Yc(e);else throw new TypeError(Wt(e,"CryptoKey","KeyObject","JSON Web Key"));if(t??(t="sha256"),t!=="sha256"&&t!=="sha384"&&t!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let n;switch(r.kty){case"EC":ot(r.crv,'"crv" (Curve) Parameter'),ot(r.x,'"x" (X Coordinate) Parameter'),ot(r.y,'"y" (Y Coordinate) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x,y:r.y};break;case"OKP":ot(r.crv,'"crv" (Subtype of Key Pair) Parameter'),ot(r.x,'"x" (Public Key) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x};break;case"RSA":ot(r.e,'"e" (Exponent) Parameter'),ot(r.n,'"n" (Modulus) Parameter'),n={e:r.e,kty:r.kty,n:r.n};break;case"oct":ot(r.k,'"k" (Key Value) Parameter'),n={k:r.k,kty:r.kty};break;default:throw new le('"kty" (Key Type) Parameter missing or unsupported')}const o=$e.encode(JSON.stringify(n));return Ae(await Kc(t,o))}function Mf(e){if(typeof e!="string")throw new ze("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:r}=e.split(".");if(r===5)throw new ze("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new ze("Invalid JWT");if(!t)throw new ze("JWTs must contain a payload");let n;try{n=Ce(t)}catch{throw new ze("Failed to base64url decode the payload")}let o;try{o=JSON.parse(St.decode(n))}catch{throw new ze("Failed to parse the decoded payload as JSON")}if(!Qe(o))throw new ze("Invalid JWT Claims Set");return o}/**
 * @source https://github.com/jshttp/cookie
 * @author blakeembrey
 * @license MIT
 */const Wf=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,qf=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,Hf=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Kf=/^[\u0020-\u003A\u003D-\u007E]*$/,Bf=Object.prototype.toString,zf=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function Jf(e,t){const r=new zf,n=e.length;if(n<2)return r;const o=(t==null?void 0:t.decode)||Gf;let a=0;do{const i=e.indexOf("=",a);if(i===-1)break;const s=e.indexOf(";",a),c=s===-1?n:s;if(i>c){a=e.lastIndexOf(";",i-1)+1;continue}const l=$i(e,a,i),d=Di(e,i,l),u=e.slice(l,d);if(r[u]===void 0){let h=$i(e,i+1,c),g=Di(e,c,h);const p=o(e.slice(h,g));r[u]=p}a=c+1}while(a<n);return r}function $i(e,t,r){do{const n=e.charCodeAt(t);if(n!==32&&n!==9)return t}while(++t<r);return r}function Di(e,t,r){for(;t>r;){const n=e.charCodeAt(--t);if(n!==32&&n!==9)return t+1}return r}function Ff(e,t,r){const n=(r==null?void 0:r.encode)||encodeURIComponent;if(!Wf.test(e))throw new TypeError(`argument name is invalid: ${e}`);const o=n(t);if(!qf.test(o))throw new TypeError(`argument val is invalid: ${t}`);let a=e+"="+o;if(!r)return a;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);a+="; Max-Age="+r.maxAge}if(r.domain){if(!Hf.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);a+="; Domain="+r.domain}if(r.path){if(!Kf.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);a+="; Path="+r.path}if(r.expires){if(!Vf(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.partitioned&&(a+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return a}function Gf(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function Vf(e){return Bf.call(e)==="[object Date]"}const Xf=Object.freeze(Object.defineProperty({__proto__:null,parse:Jf,serialize:Ff},Symbol.toStringTag,{value:"Module"})),Zf=720*60*60,Qf=()=>Date.now()/1e3|0,nu="dir",ea="A256CBC-HS512";async function sn(e){const{token:t={},secret:r,maxAge:n=Zf,salt:o}=e,a=Array.isArray(r)?r:[r],i=await ou(ea,a[0],o),s=await ru({kty:"oct",k:Ae(i)},`sha${i.byteLength<<3}`);return await new Lf(t).setProtectedHeader({alg:nu,enc:ea,kid:s}).setIssuedAt().setExpirationTime(Qf()+n).setJti(crypto.randomUUID()).encrypt(i)}async function cn(e){const{token:t,secret:r,salt:n}=e,o=Array.isArray(r)?r:[r];if(!t)return null;const{payload:a}=await Nf(t,async({kid:i,enc:s})=>{for(const c of o){const l=await ou(s,c,n);if(i===void 0)return l;const d=await ru({kty:"oct",k:Ae(l)},`sha${l.byteLength<<3}`);if(i===d)return l}throw new Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:[nu],contentEncryptionAlgorithms:[ea,"A256GCM"]});return a}async function ou(e,t,r){let n;switch(e){case"A256CBC-HS512":n=64;break;case"A256GCM":n=32;break;default:throw new Error("Unsupported JWT Content Encryption Algorithm")}return await Fd("sha256",t,r,`Auth.js Generated Encryption Key (${r})`,n)}async function Yf({options:e,paramValue:t,cookieValue:r}){const{url:n,callbacks:o}=e;let a=n.origin;return t?a=await o.redirect({url:t,baseUrl:n.origin}):r&&(a=await o.redirect({url:r,baseUrl:n.origin})),{callbackUrl:a,callbackUrlCookie:a!==r?a:void 0}}const to="\x1B[31m",eh="\x1B[33m",th="\x1B[90m",zt="\x1B[0m",rh={error(e){const t=e instanceof H?e.type:e.name;if(console.error(`${to}[auth][error]${zt} ${t}: ${e.message}`),e.cause&&typeof e.cause=="object"&&"err"in e.cause&&e.cause.err instanceof Error){const{err:r,...n}=e.cause;console.error(`${to}[auth][cause]${zt}:`,r.stack),n&&console.error(`${to}[auth][details]${zt}:`,JSON.stringify(n,null,2))}else e.stack&&console.error(e.stack.replace(/.*/,"").substring(1))},warn(e){console.warn(`${eh}[auth][warn][${e}]${zt}`,"Read more: https://warnings.authjs.dev")},debug(e,t){console.log(`${th}[auth][debug]:${zt} ${e}`,JSON.stringify(t,null,2))}};function fr(e){var r,n,o;const t={...rh};return e.debug||(t.debug=()=>{}),(r=e.logger)!=null&&r.error&&(t.error=e.logger.error),(n=e.logger)!=null&&n.warn&&(t.warn=e.logger.warn),(o=e.logger)!=null&&o.debug&&(t.debug=e.logger.debug),e.logger??(e.logger=t),t}const nh=["providers","session","csrf","signin","signout","callback","verify-request","error","webauthn-options"];function oh(e){return nh.includes(e)}const{parse:ah,serialize:ih}=Xf;async function sh(e){if(!("body"in e)||!e.body||e.method!=="POST")return;const t=e.headers.get("content-type");if(t!=null&&t.includes("application/json"))return await e.json();if(t!=null&&t.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams(await e.text());return Object.fromEntries(r)}}async function ch(e,t){try{if(e.method!=="GET"&&e.method!=="POST")throw new ct("Only GET and POST requests are supported");t.basePath??(t.basePath="/auth");const r=new URL(e.url),{action:n,providerId:o}=lh(r.pathname,t.basePath);return{url:r,action:n,providerId:o,method:e.method,headers:Object.fromEntries(e.headers),body:e.body?await sh(e):void 0,cookies:ah(e.headers.get("cookie")??"")??{},error:r.searchParams.get("error")??void 0,query:Object.fromEntries(r.searchParams)}}catch(r){const n=fr(t);n.error(r),n.debug("request",e)}}function uh(e){return new Request(e.url,{headers:e.headers,method:e.method,body:e.method==="POST"?JSON.stringify(e.body??{}):void 0})}function Ni(e){var a;const t=new Headers(e.headers);(a=e.cookies)==null||a.forEach(i=>{const{name:s,value:c,options:l}=i,d=ih(s,c,l);t.has("Set-Cookie")?t.append("Set-Cookie",d):t.set("Set-Cookie",d)});let r=e.body;t.get("content-type")==="application/json"?r=JSON.stringify(e.body):t.get("content-type")==="application/x-www-form-urlencoded"&&(r=new URLSearchParams(e.body).toString());const n=e.redirect?302:e.status??200,o=new Response(r,{headers:t,status:n});return e.redirect&&o.headers.set("Location",e.redirect),o}async function Fr(e){const t=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(r)).map(n=>n.toString(16).padStart(2,"0")).join("").toString()}function Ca(e){const t=o=>("0"+o.toString(16)).slice(-2),r=(o,a)=>o+t(a),n=crypto.getRandomValues(new Uint8Array(e));return Array.from(n).reduce(r,"")}function lh(e,t){const r=e.match(new RegExp(`^${t}(.+)`));if(r===null)throw new ct(`Cannot parse action at ${e}`);const o=r.at(-1).replace(/^\//,"").split("/").filter(Boolean);if(o.length!==1&&o.length!==2)throw new ct(`Cannot parse action at ${e}`);const[a,i]=o;if(!oh(a))throw new ct(`Cannot parse action at ${e}`);if(i&&!["signin","callback","webauthn-options"].includes(a))throw new ct(`Cannot parse action at ${e}`);return{action:a,providerId:i}}async function dh({options:e,cookieValue:t,isPost:r,bodyValue:n}){if(t){const[s,c]=t.split("|"),l=await Fr(`${s}${e.secret}`);if(c===l)return{csrfTokenVerified:r&&s===n,csrfToken:s}}const o=Ca(32),a=await Fr(`${o}${e.secret}`);return{cookie:`${o}|${a}`,csrfToken:o}}function xr(e,t){if(!t)throw new Cc(`CSRF token was missing during an action ${e}`)}function kr(e){return e!==null&&typeof e=="object"}function Gr(e,...t){if(!t.length)return e;const r=t.shift();if(kr(e)&&kr(r))for(const n in r)kr(r[n])?(kr(e[n])||(e[n]=Array.isArray(r[n])?[]:{}),Gr(e[n],r[n])):r[n]!==void 0&&(e[n]=r[n]);return Gr(e,...t)}const un=Symbol("skip-csrf-check"),ln=Symbol("return-type-raw"),Ve=Symbol("custom-fetch"),ji=Symbol("conform-internal");function fh(e){const{providerId:t,config:r}=e,n=new URL(r.basePath??"/auth",e.url.origin),o=r.providers.map(i=>{var h;const s=typeof i=="function"?i():i,{options:c,...l}=s,d=(c==null?void 0:c.id)??l.id,u=Gr(l,c,{signinUrl:`${n}/signin/${d}`,callbackUrl:`${n}/callback/${d}`});if(s.type==="oauth"||s.type==="oidc"){u.redirectProxyUrl??(u.redirectProxyUrl=(c==null?void 0:c.redirectProxyUrl)??r.redirectProxyUrl);const g=hh(u);return((h=g.authorization)==null?void 0:h.url.searchParams.get("response_mode"))==="form_post"&&delete g.redirectProxyUrl,g[Ve]??(g[Ve]=c==null?void 0:c[Ve]),g}return u}),a=o.find(({id:i})=>i===t);if(t&&!a){const i=o.map(s=>s.id).join(", ");throw new Error(`Provider with id "${t}" not found. Available providers: [${i}].`)}return{providers:o,provider:a}}function hh(e){var a;e.issuer&&(e.wellKnown??(e.wellKnown=`${e.issuer}/.well-known/openid-configuration`));const t=ro(e.authorization,e.issuer);t&&!((a=t.url)!=null&&a.searchParams.has("scope"))&&t.url.searchParams.set("scope","openid profile email");const r=ro(e.token,e.issuer),n=ro(e.userinfo,e.issuer),o=e.checks??["pkce"];return e.redirectProxyUrl&&(o.includes("state")||o.push("state"),e.redirectProxyUrl=`${e.redirectProxyUrl}/callback/${e.id}`),{...e,authorization:t,token:r,checks:o,userinfo:n,profile:e.profile??ph,account:e.account??mh}}const ph=e=>au({id:e.sub??e.id??crypto.randomUUID(),name:e.name??e.nickname??e.preferred_username,email:e.email,image:e.picture}),mh=e=>au({access_token:e.access_token,id_token:e.id_token,refresh_token:e.refresh_token,expires_at:e.expires_at,scope:e.scope,token_type:e.token_type,session_state:e.session_state});function au(e){const t={};for(const[r,n]of Object.entries(e))n!==void 0&&(t[r]=n);return t}function ro(e,t){if(!e&&t)return;if(typeof e=="string")return{url:new URL(e)};const r=new URL((e==null?void 0:e.url)??"https://authjs.dev");if((e==null?void 0:e.params)!=null)for(let[n,o]of Object.entries(e.params))n==="claims"&&(o=JSON.stringify(o)),r.searchParams.set(n,String(o));return{url:r,request:e==null?void 0:e.request,conform:e==null?void 0:e.conform,...e!=null&&e.clientPrivateKey?{clientPrivateKey:e==null?void 0:e.clientPrivateKey}:null}}function yh(e){return e.type==="oidc"}const gh={signIn(){return!0},redirect({url:e,baseUrl:t}){return e.startsWith("/")?`${t}${e}`:new URL(e).origin===t?e:t},session({session:e}){var t,r,n,o,a;return{user:{name:(t=e.user)==null?void 0:t.name,email:(r=e.user)==null?void 0:r.email,image:(n=e.user)==null?void 0:n.image},expires:((a=(o=e.expires)==null?void 0:o.toISOString)==null?void 0:a.call(o))??e.expires}},jwt({token:e}){return e}};async function bh({authOptions:e,providerId:t,action:r,url:n,cookies:o,callbackUrl:a,csrfToken:i,csrfDisabled:s,isPost:c}){var _;const l=fr(e),{providers:d,provider:u}=fh({url:n,providerId:t,config:e}),h=720*60*60;let g=!1;if(((u==null?void 0:u.type)==="oauth"||(u==null?void 0:u.type)==="oidc")&&u.redirectProxyUrl)try{g=new URL(u.redirectProxyUrl).origin===n.origin}catch{throw new TypeError(`redirectProxyUrl must be a valid URL. Received: ${u.redirectProxyUrl}`)}const p={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...e,url:n,action:r,provider:u,cookies:Gr(pc(e.useSecureCookies??n.protocol==="https:"),e.cookies),providers:d,session:{strategy:e.adapter?"database":"jwt",maxAge:h,updateAge:1440*60,generateSessionToken:()=>crypto.randomUUID(),...e.session},jwt:{secret:e.secret,maxAge:((_=e.session)==null?void 0:_.maxAge)??h,encode:sn,decode:cn,...e.jwt},events:wh(e.events??{},l),adapter:_h(e.adapter,l),callbacks:{...gh,...e.callbacks},logger:l,callbackUrl:n.origin,isOnRedirectProxy:g,experimental:{...e.experimental}},y=[];if(s)p.csrfTokenVerified=!0;else{const{csrfToken:v,cookie:w,csrfTokenVerified:f}=await dh({options:p,cookieValue:o==null?void 0:o[p.cookies.csrfToken.name],isPost:c,bodyValue:i});p.csrfToken=v,p.csrfTokenVerified=f,w&&y.push({name:p.cookies.csrfToken.name,value:w,options:p.cookies.csrfToken.options})}const{callbackUrl:m,callbackUrlCookie:b}=await Yf({options:p,cookieValue:o==null?void 0:o[p.cookies.callbackUrl.name],paramValue:a});return p.callbackUrl=m,b&&y.push({name:p.cookies.callbackUrl.name,value:b,options:p.cookies.callbackUrl.options}),{options:p,cookies:y}}function wh(e,t){return Object.keys(e).reduce((r,n)=>(r[n]=async(...o)=>{try{const a=e[n];return await a(...o)}catch(a){t.error(new gc(a))}},r),{})}function _h(e,t){if(e)return Object.keys(e).reduce((r,n)=>(r[n]=async(...o)=>{try{t.debug(`adapter_${n}`,{args:o});const a=e[n];return await a(...o)}catch(a){const i=new _a(a);throw t.error(i),i}},r),{})}var iu,ye,su,vh=[];function Eh(e,t,r){var n,o,a,i={};for(a in t)a=="key"?n=t[a]:a=="ref"?o=t[a]:i[a]=t[a];if(arguments.length>2&&(i.children=arguments.length>3?iu.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)i[a]===void 0&&(i[a]=e.defaultProps[a]);return Sh(e,i,n,o)}function Sh(e,t,r,n,o){var a={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:++su,__i:-1,__u:0};return ye.vnode!=null&&ye.vnode(a),a}function Pt(e){return e.children}iu=vh.slice,ye={__e:function(e,t,r,n){for(var o,a,i;t=t.__;)if((o=t.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(e)),i=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,n||{}),i=o.__d),i)return o.__E=o}catch(s){e=s}throw e}},su=0,typeof Promise=="function"&&Promise.prototype.then.bind(Promise.resolve());var Li=/[\s\n\\/='"\0<>]/,Mi=/^(xlink|xmlns|xml)([A-Z])/,Ah=/^accessK|^auto[A-Z]|^cell|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z]/,xh=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,kh=new Set(["draggable","spellcheck"]),Th=/["&<]/;function Tr(e){if(e.length===0||Th.test(e)===!1)return e;for(var t=0,r=0,n="",o="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=o,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var Wi={},Rh=new Set(["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","fill-opacity","flex","flex-grow","flex-negative","flex-order","flex-positive","flex-shrink","flood-opacity","font-weight","grid-column","grid-row","line-clamp","line-height","opacity","order","orphans","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","widows","z-index","zoom"]),Ch=/[A-Z]/g;function Ph(e){var t="";for(var r in e){var n=e[r];if(n!=null&&n!==""){var o=r[0]=="-"?r:Wi[r]||(Wi[r]=r.replace(Ch,"-$&").toLowerCase()),a=";";typeof n!="number"||o.startsWith("--")||Rh.has(o)||(a="px;"),t=t+o+":"+n+a}}return t||void 0}function qi(){this.__d=!0}function Oh(e,t){return{__v:e,context:t,props:e.props,setState:qi,forceUpdate:qi,__d:!0,__h:new Array(0)}}var ta,mt,ir,Gt,Pa={},Hi=[],Vt=Array.isArray,ra=Object.assign,ve="";function Ih(e,t,r){var n=ye.__s;ye.__s=!0,ta=ye.__b,mt=ye.diffed,ir=ye.__r,Gt=ye.unmount;var o=Eh(Pt,null);o.__k=[e];try{var a=st(e,t||Pa,!1,void 0,o,!1,r);return Vt(a)?a.join(ve):a}catch(i){throw i.then?new Error('Use "renderToStringAsync" for suspenseful rendering.'):i}finally{ye.__c&&ye.__c(e,Hi),ye.__s=n,Hi.length=0}}function Ki(e,t){var r,n=e.type,o=!0;return e.__c?(o=!1,(r=e.__c).state=r.__s):r=new n(e.props,t),e.__c=r,r.__v=e,r.props=e.props,r.context=t,r.__d=!0,r.state==null&&(r.state=Pa),r.__s==null&&(r.__s=r.state),n.getDerivedStateFromProps?r.state=ra({},r.state,n.getDerivedStateFromProps(r.props,r.state)):o&&r.componentWillMount?(r.componentWillMount(),r.state=r.__s!==r.state?r.__s:r.state):!o&&r.componentWillUpdate&&r.componentWillUpdate(),ir&&ir(e),r.render(r.props,r.state,t)}function st(e,t,r,n,o,a,i){if(e==null||e===!0||e===!1||e===ve)return ve;var s=typeof e;if(s!="object")return s=="function"?ve:s=="string"?Tr(e):e+ve;if(Vt(e)){var c,l=ve;o.__k=e;for(var d=0;d<e.length;d++){var u=e[d];if(u!=null&&typeof u!="boolean"){var h,g=st(u,t,r,n,o,a,i);typeof g=="string"?l+=g:(c||(c=[]),l&&c.push(l),l=ve,Vt(g)?(h=c).push.apply(h,g):c.push(g))}}return c?(l&&c.push(l),c):l}if(e.constructor!==void 0)return ve;e.__=o,ta&&ta(e);var p=e.type,y=e.props;if(typeof p=="function"){var m,b,_,v=t;if(p===Pt){if("tpl"in y){for(var w=ve,f=0;f<y.tpl.length;f++)if(w+=y.tpl[f],y.exprs&&f<y.exprs.length){var A=y.exprs[f];if(A==null)continue;typeof A!="object"||A.constructor!==void 0&&!Vt(A)?w+=A:w+=st(A,t,r,n,e,a,i)}return w}if("UNSTABLE_comment"in y)return"<!--"+Tr(y.UNSTABLE_comment)+"-->";b=y.children}else{if((m=p.contextType)!=null){var E=t[m.__c];v=E?E.props.value:m.__}var S=p.prototype&&typeof p.prototype.render=="function";if(S)b=Ki(e,v),_=e.__c;else{e.__c=_=Oh(e,v);for(var x=0;_.__d&&x++<25;)_.__d=!1,ir&&ir(e),b=p.call(_,y,v);_.__d=!0}if(_.getChildContext!=null&&(t=ra({},t,_.getChildContext())),S&&ye.errorBoundaries&&(p.getDerivedStateFromError||_.componentDidCatch)){b=b!=null&&b.type===Pt&&b.key==null&&b.props.tpl==null?b.props.children:b;try{return st(b,t,r,n,e,a,i)}catch(W){return p.getDerivedStateFromError&&(_.__s=p.getDerivedStateFromError(W)),_.componentDidCatch&&_.componentDidCatch(W,Pa),_.__d?(b=Ki(e,t),(_=e.__c).getChildContext!=null&&(t=ra({},t,_.getChildContext())),st(b=b!=null&&b.type===Pt&&b.key==null&&b.props.tpl==null?b.props.children:b,t,r,n,e,a,i)):ve}finally{mt&&mt(e),e.__=null,Gt&&Gt(e)}}}b=b!=null&&b.type===Pt&&b.key==null&&b.props.tpl==null?b.props.children:b;try{var I=st(b,t,r,n,e,a,i);return mt&&mt(e),e.__=null,ye.unmount&&ye.unmount(e),I}catch(W){if(i&&i.onError){var M=i.onError(W,e,function(J){return st(J,t,r,n,e,a,i)});if(M!==void 0)return M;var U=ye.__e;return U&&U(W,e),ve}throw W}}var O,R="<"+p,D=ve;for(var C in y){var T=y[C];if(typeof T!="function"||C==="class"||C==="className"){switch(C){case"children":O=T;continue;case"key":case"ref":case"__self":case"__source":continue;case"htmlFor":if("for"in y)continue;C="for";break;case"className":if("class"in y)continue;C="class";break;case"defaultChecked":C="checked";break;case"defaultSelected":C="selected";break;case"defaultValue":case"value":switch(C="value",p){case"textarea":O=T;continue;case"select":n=T;continue;case"option":n!=T||"selected"in y||(R+=" selected")}break;case"dangerouslySetInnerHTML":D=T&&T.__html;continue;case"style":typeof T=="object"&&(T=Ph(T));break;case"acceptCharset":C="accept-charset";break;case"httpEquiv":C="http-equiv";break;default:if(Mi.test(C))C=C.replace(Mi,"$1:$2").toLowerCase();else{if(Li.test(C))continue;C[4]!=="-"&&!kh.has(C)||T==null?r?xh.test(C)&&(C=C==="panose1"?"panose-1":C.replace(/([A-Z])/g,"-$1").toLowerCase()):Ah.test(C)&&(C=C.toLowerCase()):T+=ve}}T!=null&&T!==!1&&(R=T===!0||T===ve?R+" "+C:R+" "+C+'="'+(typeof T=="string"?Tr(T):T+ve)+'"')}}if(Li.test(p))throw new Error(p+" is not a valid HTML tag name in "+R+">");if(D||(typeof O=="string"?D=Tr(O):O!=null&&O!==!1&&O!==!0&&(D=st(O,t,p==="svg"||p!=="foreignObject"&&r,n,e,a,i))),mt&&mt(e),e.__=null,Gt&&Gt(e),!D&&Uh.has(p))return R+"/>";var K="</"+p+">",B=R+">";return Vt(D)?[B].concat(D,[K]):typeof D!="string"?[B,D,K]:B+D+K}var Uh=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),$h=0;function P(e,t,r,n,o,a){t||(t={});var i,s,c=t;"ref"in t&&(i=t.ref,delete t.ref);var l={type:e,props:c,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--$h,__i:-1,__u:0,__source:o,__self:a};if(typeof e=="function"&&(i=e.defaultProps))for(s in i)c[s]===void 0&&(c[s]=i[s]);return ye.vnode&&ye.vnode(l),l}function Dh(e){const{url:t,error:r="default",theme:n}=e,o=`${t}/signin`,a={default:{status:200,heading:"Error",message:P("p",{children:P("a",{className:"site",href:t==null?void 0:t.origin,children:t==null?void 0:t.host})})},Configuration:{status:500,heading:"Server error",message:P("div",{children:[P("p",{children:"There is a problem with the server configuration."}),P("p",{children:"Check the server logs for more information."})]})},AccessDenied:{status:403,heading:"Access Denied",message:P("div",{children:[P("p",{children:"You do not have permission to sign in."}),P("p",{children:P("a",{className:"button",href:o,children:"Sign in"})})]})},Verification:{status:403,heading:"Unable to sign in",message:P("div",{children:[P("p",{children:"The sign in link is no longer valid."}),P("p",{children:"It may have been used already or it may have expired."})]}),signin:P("a",{className:"button",href:o,children:"Sign in"})}},{status:i,heading:s,message:c,signin:l}=a[r]??a.default;return{status:i,html:P("div",{className:"error",children:[(n==null?void 0:n.brandColor)&&P("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n==null?void 0:n.brandColor}
        }
      `}}),P("div",{className:"card",children:[(n==null?void 0:n.logo)&&P("img",{src:n==null?void 0:n.logo,alt:"Logo",className:"logo"}),P("h1",{children:s}),P("div",{className:"message",children:c}),l]})]})}}async function Nh(e,t){const r=window.SimpleWebAuthnBrowser;async function n(u){const h=new URL(`${e}/webauthn-options/${t}`);u&&h.searchParams.append("action",u),a().forEach(y=>{h.searchParams.append(y.name,y.value)});const p=await fetch(h);if(!p.ok){console.error("Failed to fetch options",p);return}return p.json()}function o(){const u=`#${t}-form`,h=document.querySelector(u);if(!h)throw new Error(`Form '${u}' not found`);return h}function a(){const u=o();return Array.from(u.querySelectorAll("input[data-form-field]"))}async function i(u,h){const g=o();if(u){const p=document.createElement("input");p.type="hidden",p.name="action",p.value=u,g.appendChild(p)}if(h){const p=document.createElement("input");p.type="hidden",p.name="data",p.value=JSON.stringify(h),g.appendChild(p)}return g.submit()}async function s(u,h){const g=await r.startAuthentication(u,h);return await i("authenticate",g)}async function c(u){a().forEach(p=>{if(p.required&&!p.value)throw new Error(`Missing required field: ${p.name}`)});const g=await r.startRegistration(u);return await i("register",g)}async function l(){if(!r.browserSupportsWebAuthnAutofill())return;const u=await n("authenticate");if(!u){console.error("Failed to fetch option for autofill authentication");return}try{await s(u.options,!0)}catch(h){console.error(h)}}async function d(){const u=o();if(!r.browserSupportsWebAuthn()){u.style.display="none";return}u&&u.addEventListener("submit",async h=>{h.preventDefault();const g=await n(void 0);if(!g){console.error("Failed to fetch options for form submission");return}if(g.action==="authenticate")try{await s(g.options,!1)}catch(p){console.error(p)}else if(g.action==="register")try{await c(g.options)}catch(p){console.error(p)}})}d(),l()}const Bi={default:"Unable to sign in.",Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallbackError:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page."};function jh(e){const t=`
const currentURL = window.location.href;
const authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));
(${Nh})(authURL, "${e}");
`;return P(Pt,{children:P("script",{dangerouslySetInnerHTML:{__html:t}})})}function Lh(e){var d;const{csrfToken:t,providers:r=[],callbackUrl:n,theme:o,email:a,error:i}=e;typeof document<"u"&&(o!=null&&o.brandColor)&&document.documentElement.style.setProperty("--brand-color",o.brandColor),typeof document<"u"&&(o!=null&&o.buttonText)&&document.documentElement.style.setProperty("--button-text-color",o.buttonText);const s=i&&(Bi[i]??Bi.default),c="https://authjs.dev/img/providers",l=(d=r.find(u=>u.type==="webauthn"&&u.enableConditionalUI))==null?void 0:d.id;return P("div",{className:"signin",children:[(o==null?void 0:o.brandColor)&&P("style",{dangerouslySetInnerHTML:{__html:`:root {--brand-color: ${o.brandColor}}`}}),(o==null?void 0:o.buttonText)&&P("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${o.buttonText}
        }
      `}}),P("div",{className:"card",children:[s&&P("div",{className:"error",children:P("p",{children:s})}),(o==null?void 0:o.logo)&&P("img",{src:o.logo,alt:"Logo",className:"logo"}),r.map((u,h)=>{let g,p,y;(u.type==="oauth"||u.type==="oidc")&&({bg:g="#fff",brandColor:p,logo:y=`${c}/${u.id}.svg`}=u.style??{});const m=p??g??"#fff";return P("div",{className:"provider",children:[u.type==="oauth"||u.type==="oidc"?P("form",{action:u.signinUrl,method:"POST",children:[P("input",{type:"hidden",name:"csrfToken",value:t}),n&&P("input",{type:"hidden",name:"callbackUrl",value:n}),P("button",{type:"submit",className:"button",style:{"--provider-brand-color":m},tabIndex:0,children:[P("span",{style:{filter:"invert(1) grayscale(1) brightness(1.3) contrast(9000)","mix-blend-mode":"luminosity",opacity:.95},children:["Sign in with ",u.name]}),y&&P("img",{loading:"lazy",height:24,src:y})]})]}):null,(u.type==="email"||u.type==="credentials"||u.type==="webauthn")&&h>0&&r[h-1].type!=="email"&&r[h-1].type!=="credentials"&&r[h-1].type!=="webauthn"&&P("hr",{}),u.type==="email"&&P("form",{action:u.signinUrl,method:"POST",children:[P("input",{type:"hidden",name:"csrfToken",value:t}),P("label",{className:"section-header",htmlFor:`input-email-for-${u.id}-provider`,children:"Email"}),P("input",{id:`input-email-for-${u.id}-provider`,autoFocus:!0,type:"email",name:"email",value:a,placeholder:"email@example.com",required:!0}),P("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",u.name]})]}),u.type==="credentials"&&P("form",{action:u.callbackUrl,method:"POST",children:[P("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(u.credentials).map(b=>P("div",{children:[P("label",{className:"section-header",htmlFor:`input-${b}-for-${u.id}-provider`,children:u.credentials[b].label??b}),P("input",{name:b,id:`input-${b}-for-${u.id}-provider`,type:u.credentials[b].type??"text",placeholder:u.credentials[b].placeholder??"",...u.credentials[b]})]},`input-group-${u.id}`)),P("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",u.name]})]}),u.type==="webauthn"&&P("form",{action:u.callbackUrl,method:"POST",id:`${u.id}-form`,children:[P("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(u.formFields).map(b=>P("div",{children:[P("label",{className:"section-header",htmlFor:`input-${b}-for-${u.id}-provider`,children:u.formFields[b].label??b}),P("input",{name:b,"data-form-field":!0,id:`input-${b}-for-${u.id}-provider`,type:u.formFields[b].type??"text",placeholder:u.formFields[b].placeholder??"",...u.formFields[b]})]},`input-group-${u.id}`)),P("button",{id:`submitButton-${u.id}`,type:"submit",tabIndex:0,children:["Sign in with ",u.name]})]}),(u.type==="email"||u.type==="credentials"||u.type==="webauthn")&&h+1<r.length&&P("hr",{})]},u.id)})]}),l&&jh(l)]})}function Mh(e){const{url:t,csrfToken:r,theme:n}=e;return P("div",{className:"signout",children:[(n==null?void 0:n.brandColor)&&P("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n.brandColor}
        }
      `}}),(n==null?void 0:n.buttonText)&&P("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${n.buttonText}
        }
      `}}),P("div",{className:"card",children:[(n==null?void 0:n.logo)&&P("img",{src:n.logo,alt:"Logo",className:"logo"}),P("h1",{children:"Signout"}),P("p",{children:"Are you sure you want to sign out?"}),P("form",{action:t==null?void 0:t.toString(),method:"POST",children:[P("input",{type:"hidden",name:"csrfToken",value:r}),P("button",{id:"submitButton",type:"submit",children:"Sign out"})]})]})]})}const Wh=`:root {
  --border-width: 1px;
  --border-radius: 0.5rem;
  --color-error: #c94b4b;
  --color-info: #157efb;
  --color-info-hover: #0f6ddb;
  --color-info-text: #fff;
}

.__next-auth-theme-auto,
.__next-auth-theme-light {
  --color-background: #ececec;
  --color-background-hover: rgba(236, 236, 236, 0.8);
  --color-background-card: #fff;
  --color-text: #000;
  --color-primary: #444;
  --color-control-border: #bbb;
  --color-button-active-background: #f9f9f9;
  --color-button-active-border: #aaa;
  --color-separator: #ccc;
  --provider-bg: #fff;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #fff
  );
}

.__next-auth-theme-dark {
  --color-background: #161b22;
  --color-background-hover: rgba(22, 27, 34, 0.8);
  --color-background-card: #0d1117;
  --color-text: #fff;
  --color-primary: #ccc;
  --color-control-border: #555;
  --color-button-active-background: #060606;
  --color-button-active-border: #666;
  --color-separator: #444;
  --provider-bg: #161b22;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #000
  );
}

.__next-auth-theme-dark img[src$="42-school.svg"],
  .__next-auth-theme-dark img[src$="apple.svg"],
  .__next-auth-theme-dark img[src$="boxyhq-saml.svg"],
  .__next-auth-theme-dark img[src$="eveonline.svg"],
  .__next-auth-theme-dark img[src$="github.svg"],
  .__next-auth-theme-dark img[src$="mailchimp.svg"],
  .__next-auth-theme-dark img[src$="medium.svg"],
  .__next-auth-theme-dark img[src$="okta.svg"],
  .__next-auth-theme-dark img[src$="patreon.svg"],
  .__next-auth-theme-dark img[src$="ping-id.svg"],
  .__next-auth-theme-dark img[src$="roblox.svg"],
  .__next-auth-theme-dark img[src$="threads.svg"],
  .__next-auth-theme-dark img[src$="wikimedia.svg"] {
    filter: invert(1);
  }

.__next-auth-theme-dark #submitButton {
    background-color: var(--provider-bg, var(--color-info));
  }

@media (prefers-color-scheme: dark) {
  .__next-auth-theme-auto {
    --color-background: #161b22;
    --color-background-hover: rgba(22, 27, 34, 0.8);
    --color-background-card: #0d1117;
    --color-text: #fff;
    --color-primary: #ccc;
    --color-control-border: #555;
    --color-button-active-background: #060606;
    --color-button-active-border: #666;
    --color-separator: #444;
    --provider-bg: #161b22;
    --provider-bg-hover: color-mix(
      in srgb,
      var(--provider-brand-color) 30%,
      #000
    );
  }
    .__next-auth-theme-auto img[src$="42-school.svg"],
    .__next-auth-theme-auto img[src$="apple.svg"],
    .__next-auth-theme-auto img[src$="boxyhq-saml.svg"],
    .__next-auth-theme-auto img[src$="eveonline.svg"],
    .__next-auth-theme-auto img[src$="github.svg"],
    .__next-auth-theme-auto img[src$="mailchimp.svg"],
    .__next-auth-theme-auto img[src$="medium.svg"],
    .__next-auth-theme-auto img[src$="okta.svg"],
    .__next-auth-theme-auto img[src$="patreon.svg"],
    .__next-auth-theme-auto img[src$="ping-id.svg"],
    .__next-auth-theme-auto img[src$="roblox.svg"],
    .__next-auth-theme-auto img[src$="threads.svg"],
    .__next-auth-theme-auto img[src$="wikimedia.svg"] {
      filter: invert(1);
    }
    .__next-auth-theme-auto #submitButton {
      background-color: var(--provider-bg, var(--color-info));
    }
}

html {
  box-sizing: border-box;
}

*,
*:before,
*:after {
  box-sizing: inherit;
  margin: 0;
  padding: 0;
}

body {
  background-color: var(--color-background);
  margin: 0;
  padding: 0;
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    "Noto Sans",
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    "Noto Color Emoji";
}

h1 {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  font-weight: 400;
  color: var(--color-text);
}

p {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  color: var(--color-text);
}

form {
  margin: 0;
  padding: 0;
}

label {
  font-weight: 500;
  text-align: left;
  margin-bottom: 0.25rem;
  display: block;
  color: var(--color-text);
}

input[type] {
  box-sizing: border-box;
  display: block;
  width: 100%;
  padding: 0.5rem 1rem;
  border: var(--border-width) solid var(--color-control-border);
  background: var(--color-background-card);
  font-size: 1rem;
  border-radius: var(--border-radius);
  color: var(--color-text);
}

p {
  font-size: 1.1rem;
  line-height: 2rem;
}

a.button {
  text-decoration: none;
  line-height: 1rem;
}

a.button:link,
  a.button:visited {
    background-color: var(--color-background);
    color: var(--color-primary);
  }

button,
a.button {
  padding: 0.75rem 1rem;
  color: var(--provider-color, var(--color-primary));
  background-color: var(--provider-bg, var(--color-background));
  border: 1px solid #00000031;
  font-size: 0.9rem;
  height: 50px;
  border-radius: var(--border-radius);
  transition: background-color 250ms ease-in-out;
  font-weight: 300;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

:is(button,a.button):hover {
    background-color: var(--provider-bg-hover, var(--color-background-hover));
    cursor: pointer;
  }

:is(button,a.button):active {
    cursor: pointer;
  }

:is(button,a.button) span {
    color: var(--provider-bg);
  }

#submitButton {
  color: var(--button-text-color, var(--color-info-text));
  background-color: var(--brand-color, var(--color-info));
  width: 100%;
}

#submitButton:hover {
    background-color: var(
      --button-hover-bg,
      var(--color-info-hover)
    ) !important;
  }

a.site {
  color: var(--color-primary);
  text-decoration: none;
  font-size: 1rem;
  line-height: 2rem;
}

a.site:hover {
    text-decoration: underline;
  }

.page {
  position: absolute;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.page > div {
    text-align: center;
  }

.error a.button {
    padding-left: 2rem;
    padding-right: 2rem;
    margin-top: 0.5rem;
  }

.error .message {
    margin-bottom: 1.5rem;
  }

.signin input[type="text"] {
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

.signin hr {
    display: block;
    border: 0;
    border-top: 1px solid var(--color-separator);
    margin: 2rem auto 1rem auto;
    overflow: visible;
  }

.signin hr::before {
      content: "or";
      background: var(--color-background-card);
      color: #888;
      padding: 0 0.4rem;
      position: relative;
      top: -0.7rem;
    }

.signin .error {
    background: #f5f5f5;
    font-weight: 500;
    border-radius: 0.3rem;
    background: var(--color-error);
  }

.signin .error p {
      text-align: left;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      line-height: 1.2rem;
      color: var(--color-info-text);
    }

.signin > div,
  .signin form {
    display: block;
  }

.signin > div input[type], .signin form input[type] {
      margin-bottom: 0.5rem;
    }

.signin > div button, .signin form button {
      width: 100%;
    }

.signin .provider + .provider {
    margin-top: 1rem;
  }

.logo {
  display: inline-block;
  max-width: 150px;
  margin: 1.25rem 0;
  max-height: 70px;
}

.card {
  background-color: var(--color-background-card);
  border-radius: 1rem;
  padding: 1.25rem 2rem;
}

.card .header {
    color: var(--color-primary);
  }

.card input[type]::-moz-placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type]::placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type] {
    background: color-mix(in srgb, var(--color-background-card) 95%, black);
  }

.section-header {
  color: var(--color-text);
}

@media screen and (min-width: 450px) {
  .card {
    margin: 2rem 0;
    width: 368px;
  }
}

@media screen and (max-width: 450px) {
  .card {
    margin: 1rem 0;
    width: 343px;
  }
}
`;function qh(e){const{url:t,theme:r}=e;return P("div",{className:"verify-request",children:[r.brandColor&&P("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${r.brandColor}
        }
      `}}),P("div",{className:"card",children:[r.logo&&P("img",{src:r.logo,alt:"Logo",className:"logo"}),P("h1",{children:"Check your email"}),P("p",{children:"A sign in link has been sent to your email address."}),P("p",{children:P("a",{className:"site",href:t.origin,children:t.host})})]})]})}function Rr({html:e,title:t,status:r,cookies:n,theme:o,headTags:a}){return{cookies:n,status:r,headers:{"Content-Type":"text/html"},body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${Wh}</style><title>${t}</title>${a??""}</head><body class="__next-auth-theme-${(o==null?void 0:o.colorScheme)??"auto"}"><div class="page">${Ih(e)}</div></body></html>`}}function cu(e){const{url:t,theme:r,query:n,cookies:o,pages:a,providers:i}=e;return{csrf(s,c,l){return s?(c.logger.warn("csrf-disabled"),l.push({name:c.cookies.csrfToken.name,value:"",options:{...c.cookies.csrfToken.options,maxAge:0}}),{status:404,cookies:l}):{headers:{"Content-Type":"application/json","Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"},body:{csrfToken:c.csrfToken},cookies:l}},providers(s){return{headers:{"Content-Type":"application/json"},body:s.reduce((c,{id:l,name:d,type:u,signinUrl:h,callbackUrl:g})=>(c[l]={id:l,name:d,type:u,signinUrl:h,callbackUrl:g},c),{})}},signin(s,c){var u;if(s)throw new ct("Unsupported action");if(a!=null&&a.signIn){let h=`${a.signIn}${a.signIn.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:e.callbackUrl??"/"})}`;return c&&(h=`${h}&${new URLSearchParams({error:c})}`),{redirect:h,cookies:o}}const l=i==null?void 0:i.find(h=>h.type==="webauthn"&&h.enableConditionalUI&&!!h.simpleWebAuthnBrowserVersion);let d="";if(l){const{simpleWebAuthnBrowserVersion:h}=l;d=`<script src="https://unpkg.com/@simplewebauthn/browser@${h}/dist/bundle/index.umd.min.js" crossorigin="anonymous"><\/script>`}return Rr({cookies:o,theme:r,html:Lh({csrfToken:e.csrfToken,providers:(u=e.providers)==null?void 0:u.filter(h=>["email","oauth","oidc"].includes(h.type)||h.type==="credentials"&&h.credentials||h.type==="webauthn"&&h.formFields||!1),callbackUrl:e.callbackUrl,theme:e.theme,error:c,...n}),title:"Sign In",headTags:d})},signout(){return a!=null&&a.signOut?{redirect:a.signOut,cookies:o}:Rr({cookies:o,theme:r,html:Mh({csrfToken:e.csrfToken,url:t,theme:r}),title:"Sign Out"})},verifyRequest(s){return a!=null&&a.verifyRequest?{redirect:`${a.verifyRequest}${(t==null?void 0:t.search)??""}`,cookies:o}:Rr({cookies:o,theme:r,html:qh({url:t,theme:r,...s}),title:"Verify Request"})},error(s){return a!=null&&a.error?{redirect:`${a.error}${a.error.includes("?")?"&":"?"}error=${s}`,cookies:o}:Rr({cookies:o,theme:r,...Dh({url:t,theme:r,error:s}),title:"Error"})}}}function gt(e,t=Date.now()){return new Date(t+e*1e3)}async function no(e,t,r,n){var x,I,M,U,O,R,D,C;if(!(r!=null&&r.providerAccountId)||!r.type)throw new Error("Missing or invalid provider account");if(!["email","oauth","oidc","webauthn"].includes(r.type))throw new Error("Provider not supported");const{adapter:o,jwt:a,events:i,session:{strategy:s,generateSessionToken:c}}=n;if(!o)return{user:t,account:r};const l=t;let d=r;const{createUser:u,updateUser:h,getUser:g,getUserByAccount:p,getUserByEmail:y,linkAccount:m,createSession:b,getSessionAndUser:_,deleteSession:v}=o;let w=null,f=null,A=!1;const E=s==="jwt";if(e)if(E)try{const T=n.cookies.sessionToken.name;w=await a.decode({...a,token:e,salt:T}),w&&"sub"in w&&w.sub&&(f=await g(w.sub))}catch{}else{const T=await _(e);T&&(w=T.session,f=T.user)}if(d.type==="email"){const T=await y(l.email);return T?((f==null?void 0:f.id)!==T.id&&!E&&e&&await v(e),f=await h({id:T.id,emailVerified:new Date}),await((x=i.updateUser)==null?void 0:x.call(i,{user:f}))):(f=await u({...l,emailVerified:new Date}),await((I=i.createUser)==null?void 0:I.call(i,{user:f})),A=!0),w=E?{}:await b({sessionToken:c(),userId:f.id,expires:gt(n.session.maxAge)}),{session:w,user:f,isNewUser:A}}else if(d.type==="webauthn"){const T=await p({providerAccountId:d.providerAccountId,provider:d.provider});if(T){if(f){if(T.id===f.id){const B={...d,userId:f.id};return{session:w,user:f,isNewUser:A,account:B}}throw new Fo("The account is already associated with another user",{provider:d.provider})}w=E?{}:await b({sessionToken:c(),userId:T.id,expires:gt(n.session.maxAge)});const K={...d,userId:T.id};return{session:w,user:T,isNewUser:A,account:K}}else{if(f){await m({...d,userId:f.id}),await((M=i.linkAccount)==null?void 0:M.call(i,{user:f,account:d,profile:l}));const W={...d,userId:f.id};return{session:w,user:f,isNewUser:A,account:W}}if(l.email?await y(l.email):null)throw new Fo("Another account already exists with the same e-mail address",{provider:d.provider});f=await u({...l}),await((U=i.createUser)==null?void 0:U.call(i,{user:f})),await m({...d,userId:f.id}),await((O=i.linkAccount)==null?void 0:O.call(i,{user:f,account:d,profile:l})),w=E?{}:await b({sessionToken:c(),userId:f.id,expires:gt(n.session.maxAge)});const B={...d,userId:f.id};return{session:w,user:f,isNewUser:!0,account:B}}}const S=await p({providerAccountId:d.providerAccountId,provider:d.provider});if(S){if(f){if(S.id===f.id)return{session:w,user:f,isNewUser:A};throw new zo("The account is already associated with another user",{provider:d.provider})}return w=E?{}:await b({sessionToken:c(),userId:S.id,expires:gt(n.session.maxAge)}),{session:w,user:S,isNewUser:A}}else{const{provider:T}=n,{type:K,provider:B,providerAccountId:W,userId:J,...V}=d,F={providerAccountId:W,provider:B,type:K,userId:J};if(d=Object.assign(T.account(V)??{},F),f)return await m({...d,userId:f.id}),await((R=i.linkAccount)==null?void 0:R.call(i,{user:f,account:d,profile:l})),{session:w,user:f,isNewUser:A};const Z=l.email?await y(l.email):null;if(Z){const ee=n.provider;if(ee!=null&&ee.allowDangerousEmailAccountLinking)f=Z,A=!1;else throw new zo("Another account already exists with the same e-mail address",{provider:d.provider})}else f=await u({...l,emailVerified:null}),A=!0;return await((D=i.createUser)==null?void 0:D.call(i,{user:f})),await m({...d,userId:f.id}),await((C=i.linkAccount)==null?void 0:C.call(i,{user:f,account:d,profile:l})),w=E?{}:await b({sessionToken:c(),userId:f.id,expires:gt(n.session.maxAge)}),{session:w,user:f,isNewUser:A}}}let na;var $r,Ms;(typeof navigator>"u"||!((Ms=($r=navigator.userAgent)==null?void 0:$r.startsWith)!=null&&Ms.call($r,"Mozilla/5.0 ")))&&(na="oauth4webapi/v3.6.0");function hr(e,t){if(e==null)return!1;try{return e instanceof t||Object.getPrototypeOf(e)[Symbol.toStringTag]===t.prototype[Symbol.toStringTag]}catch{return!1}}const Ie="ERR_INVALID_ARG_VALUE",Pe="ERR_INVALID_ARG_TYPE";function re(e,t,r){const n=new TypeError(e,{cause:r});return Object.assign(n,{code:t}),n}const Ze=Symbol(),uu=Symbol(),Hh=Symbol(),Xe=Symbol(),lu=Symbol(),Vr=Symbol(),Kh=new TextEncoder,Bh=new TextDecoder;function We(e){return typeof e=="string"?Kh.encode(e):Bh.decode(e)}let oa;Uint8Array.prototype.toBase64?oa=e=>(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e.toBase64({alphabet:"base64url",omitPadding:!0})):oa=t=>{t instanceof ArrayBuffer&&(t=new Uint8Array(t));const r=[];for(let n=0;n<t.byteLength;n+=32768)r.push(String.fromCharCode.apply(null,t.subarray(n,n+32768)));return btoa(r.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")};let aa;Uint8Array.fromBase64?aa=e=>{try{return Uint8Array.fromBase64(e,{alphabet:"base64url"})}catch(t){throw re("The input to be decoded is not correctly encoded.",Ie,t)}}:aa=e=>{try{const t=atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}catch(t){throw re("The input to be decoded is not correctly encoded.",Ie,t)}};function He(e){return typeof e=="string"?aa(e):oa(e)}class De extends Error{constructor(r,n){var o;super(r,n);N(this,"code");this.name=this.constructor.name,this.code=Bp,(o=Error.captureStackTrace)==null||o.call(Error,this,this.constructor)}}class zh extends Error{constructor(r,n){var o;super(r,n);N(this,"code");this.name=this.constructor.name,n!=null&&n.code&&(this.code=n==null?void 0:n.code),(o=Error.captureStackTrace)==null||o.call(Error,this,this.constructor)}}function j(e,t,r){return new zh(e,{code:t,cause:r})}function Jh(e,t){if(!(e instanceof CryptoKey))throw re(`${t} must be a CryptoKey`,Pe)}function Fh(e,t){if(Jh(e,t),e.type!=="private")throw re(`${t} must be a private CryptoKey`,Ie)}function Xr(e){return!(e===null||typeof e!="object"||Array.isArray(e))}function dn(e){hr(e,Headers)&&(e=Object.fromEntries(e.entries()));const t=new Headers(e??{});if(na&&!t.has("user-agent")&&t.set("user-agent",na),t.has("authorization"))throw re('"options.headers" must not include the "authorization" header name',Ie);return t}function Oa(e,t){if(t!==void 0){if(typeof t=="function"&&(t=t(e.href)),!(t instanceof AbortSignal))throw re('"options.signal" must return or be an instance of AbortSignal',Pe);return t}}function du(e){return e.includes("//")?e.replace("//","/"):e}function Gh(e,t,r=!1){return e.pathname==="/"?e.pathname=t:e.pathname=du(`${t}/${r?e.pathname:e.pathname.replace(/(\/)$/,"")}`),e}function Vh(e,t){return e.pathname=du(`${e.pathname}/${t}`),e}async function Xh(e,t,r,n){if(!(e instanceof URL))throw re(`"${t}" must be an instance of URL`,Pe);Ia(e,(n==null?void 0:n[Ze])!==!0);const o=r(new URL(e.href)),a=dn(n==null?void 0:n.headers);return a.set("accept","application/json"),((n==null?void 0:n[Xe])||fetch)(o.href,{body:void 0,headers:Object.fromEntries(a.entries()),method:"GET",redirect:"manual",signal:Oa(o,n==null?void 0:n.signal)})}async function ia(e,t){return Xh(e,"issuerIdentifier",r=>{switch(t==null?void 0:t.algorithm){case void 0:case"oidc":Vh(r,".well-known/openid-configuration");break;case"oauth2":Gh(r,".well-known/oauth-authorization-server");break;default:throw re('"options.algorithm" must be "oidc" (default), or "oauth2"',Ie)}return r},t)}function rr(e,t,r,n,o){try{if(typeof e!="number"||!Number.isFinite(e))throw re(`${r} must be a number`,Pe,o);if(e>0)return;if(t){if(e!==0)throw re(`${r} must be a non-negative number`,Ie,o);return}throw re(`${r} must be a positive number`,Ie,o)}catch(a){throw n?j(a.message,n,o):a}}function he(e,t,r,n){try{if(typeof e!="string")throw re(`${t} must be a string`,Pe,n);if(e.length===0)throw re(`${t} must not be empty`,Ie,n)}catch(o){throw r?j(o.message,r,n):o}}async function sa(e,t){const r=e;if(!(r instanceof URL)&&r!==Gi)throw re('"expectedIssuerIdentifier" must be an instance of URL',Pe);if(!hr(t,Response))throw re('"response" must be an instance of Response',Pe);if(t.status!==200)throw j('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',Da,t);mn(t);const n=await Na(t);if(he(n.issuer,'"response" body "issuer" property',Y,{body:n}),r!==Gi&&new URL(n.issuer).href!==r.href)throw j('"response" body "issuer" property does not match the expected value',Au,{expected:r.href,body:n,attribute:"issuer"});return n}function fu(e){Qh(e,"application/json")}function Zh(e,...t){let r='"response" content-type must be ';if(t.length>2){const n=t.pop();r+=`${t.join(", ")}, or ${n}`}else t.length===2?r+=`${t[0]} or ${t[1]}`:r+=t[0];return j(r,Fp,e)}function Qh(e,t){if(gu(e)!==t)throw Zh(e,t)}function fn(){return He(crypto.getRandomValues(new Uint8Array(32)))}function Yh(){return fn()}function ep(){return fn()}function tp(){return fn()}async function rp(e){return he(e,"codeVerifier"),He(await crypto.subtle.digest("SHA-256",We(e)))}function np(e){return e instanceof CryptoKey?{key:e}:(e==null?void 0:e.key)instanceof CryptoKey?(e.kid!==void 0&&he(e.kid,'"kid"'),{key:e.key,kid:e.kid}):{}}function op(e){switch(e.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new De("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}}function ap(e){switch(e.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new De("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}}function ip(e){switch(e.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new De("unsupported EcKeyAlgorithm namedCurve",{cause:e})}}function sp(e){switch(e.algorithm.name){case"RSA-PSS":return op(e);case"RSASSA-PKCS1-v1_5":return ap(e);case"ECDSA":return ip(e);case"Ed25519":case"EdDSA":return"Ed25519";default:throw new De("unsupported CryptoKey algorithm name",{cause:e})}}function Ht(e){const t=e==null?void 0:e[uu];return typeof t=="number"&&Number.isFinite(t)?t:0}function hn(e){const t=e==null?void 0:e[Hh];return typeof t=="number"&&Number.isFinite(t)&&Math.sign(t)!==-1?t:30}function pn(){return Math.floor(Date.now()/1e3)}function pr(e){if(typeof e!="object"||e===null)throw re('"as" must be an object',Pe);he(e.issuer,'"as.issuer"')}function mr(e){if(typeof e!="object"||e===null)throw re('"client" must be an object',Pe);he(e.client_id,'"client.client_id"')}function cp(e){return he(e,'"clientSecret"'),(t,r,n,o)=>{n.set("client_id",r.client_id),n.set("client_secret",e)}}function hu(e,t){const r=pn()+Ht(t);return{jti:fn(),aud:e.issuer,exp:r+60,iat:r,nbf:r,iss:t.client_id,sub:t.client_id}}function up(e,t){const{key:r,kid:n}=np(e);return Fh(r,'"clientPrivateKey.key"'),async(o,a,i,s)=>{var d;const c={alg:sp(r),kid:n},l=hu(o,a);(d=t==null?void 0:t[lu])==null||d.call(t,c,l),i.set("client_id",a.client_id),i.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),i.set("client_assertion",await fp(c,l,r))}}function lp(e,t){he(e,'"clientSecret"');let r;return async(n,o,a,i)=>{r||(r=await crypto.subtle.importKey("raw",We(e),{hash:"SHA-256",name:"HMAC"},!1,["sign"]));const s={alg:"HS256"},c=hu(n,o),l=`${He(We(JSON.stringify(s)))}.${He(We(JSON.stringify(c)))}`,d=await crypto.subtle.sign(r.algorithm,r,We(l));a.set("client_id",o.client_id),a.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),a.set("client_assertion",`${l}.${He(new Uint8Array(d))}`)}}function dp(){return(e,t,r,n)=>{r.set("client_id",t.client_id)}}async function fp(e,t,r){if(!r.usages.includes("sign"))throw re('CryptoKey instances used for signing assertions must include "sign" in their "usages"',Ie);const n=`${He(We(JSON.stringify(e)))}.${He(We(JSON.stringify(t)))}`,o=He(await crypto.subtle.sign(Yp(r),r,We(n)));return`${n}.${o}`}const hp=URL.parse?(e,t)=>URL.parse(e,t):(e,t)=>{try{return new URL(e,t)}catch{return null}};function Ia(e,t){if(t&&e.protocol!=="https:")throw j("only requests to HTTPS are allowed",Gp,e);if(e.protocol!=="https:"&&e.protocol!=="http:")throw j("only HTTP and HTTPS requests are allowed",Vp,e)}function zi(e,t,r,n){let o;if(typeof e!="string"||!(o=hp(e)))throw j(`authorization server metadata does not contain a valid ${r?`"as.mtls_endpoint_aliases.${t}"`:`"as.${t}"`}`,e===void 0?Xp:Zp,{attribute:r?`mtls_endpoint_aliases.${t}`:t});return Ia(o,n),o}function pu(e,t,r,n){return r&&e.mtls_endpoint_aliases&&t in e.mtls_endpoint_aliases?zi(e.mtls_endpoint_aliases[t],t,r,n):zi(e[t],t,r,n)}class pp extends Error{constructor(r,n){var o;super(r,n);N(this,"cause");N(this,"code");N(this,"error");N(this,"status");N(this,"error_description");N(this,"response");this.name=this.constructor.name,this.code=Kp,this.cause=n.cause,this.error=n.cause.error,this.status=n.response.status,this.error_description=n.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:n.response}),(o=Error.captureStackTrace)==null||o.call(Error,this,this.constructor)}}class mu extends Error{constructor(r,n){var o;super(r,n);N(this,"cause");N(this,"code");N(this,"error");N(this,"error_description");this.name=this.constructor.name,this.code=zp,this.cause=n.cause,this.error=n.cause.get("error"),this.error_description=n.cause.get("error_description")??void 0,(o=Error.captureStackTrace)==null||o.call(Error,this,this.constructor)}}class mp extends Error{constructor(r,n){var o;super(r,n);N(this,"cause");N(this,"code");N(this,"response");N(this,"status");this.name=this.constructor.name,this.code=Hp,this.cause=n.cause,this.status=n.response.status,this.response=n.response,Object.defineProperty(this,"response",{enumerable:!1}),(o=Error.captureStackTrace)==null||o.call(Error,this,this.constructor)}}const Zr="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",yp="[a-zA-Z0-9\\-\\._\\~\\+\\/]+[=]{0,2}",gp='"((?:[^"\\\\]|\\\\.)*)"',bp="("+Zr+")\\s*=\\s*"+gp,wp="("+Zr+")\\s*=\\s*("+Zr+")",_p=new RegExp("^[,\\s]*("+Zr+")\\s(.*)"),vp=new RegExp("^[,\\s]*"+bp+"[,\\s]*(.*)"),Ep=new RegExp("^[,\\s]*"+wp+"[,\\s]*(.*)"),Sp=new RegExp("^("+yp+")(?:$|[,\\s])(.*)");function Ap(e){if(!hr(e,Response))throw re('"response" must be an instance of Response',Pe);const t=e.headers.get("www-authenticate");if(t===null)return;const r=[];let n=t;for(;n;){let o=n.match(_p);const a=o==null?void 0:o[1].toLowerCase();if(n=o==null?void 0:o["2"],!a)return;const i={};let s;for(;n;){let l,d;if(o=n.match(vp)){if([,l,d,n]=o,d.includes("\\"))try{d=JSON.parse(`"${d}"`)}catch{}i[l.toLowerCase()]=d;continue}if(o=n.match(Ep)){[,l,d,n]=o,i[l.toLowerCase()]=d;continue}if(o=n.match(Sp)){if(Object.keys(i).length)break;[,s,n]=o;break}return}const c={scheme:a,parameters:i};s&&(c.token68=s),r.push(c)}if(r.length)return r}async function xp(e){if(e.status>399&&e.status<500){mn(e),fu(e);try{const t=await e.clone().json();if(Xr(t)&&typeof t.error=="string"&&t.error.length)return t}catch{}}}async function kp(e,t,r){var n;if(e.status!==t){let o;throw(o=await xp(e))?(await((n=e.body)==null?void 0:n.cancel()),new pp("server responded with an error in the response body",{cause:o,response:e})):j(`"response" is not a conform ${r} response (unexpected HTTP status code)`,Da,e)}}function yu(e){if(!$a.has(e))throw re('"options.DPoP" is not a valid DPoPHandle',Ie)}async function Tp(e,t,r,n,o,a){var s;if(he(e,'"accessToken"'),!(r instanceof URL))throw re('"url" must be an instance of URL',Pe);Ia(r,(a==null?void 0:a[Ze])!==!0),n=dn(n),a!=null&&a.DPoP&&(yu(a.DPoP),await a.DPoP.addProof(r,n,t.toUpperCase(),e)),n.set("authorization",`${n.has("dpop")?"DPoP":"Bearer"} ${e}`);const i=await((a==null?void 0:a[Xe])||fetch)(r.href,{body:o,headers:Object.fromEntries(n.entries()),method:t,redirect:"manual",signal:Oa(r,a==null?void 0:a.signal)});return(s=a==null?void 0:a.DPoP)==null||s.cacheNonce(i),i}async function Ji(e,t,r,n){pr(e),mr(t);const o=pu(e,"userinfo_endpoint",t.use_mtls_endpoint_aliases,(n==null?void 0:n[Ze])!==!0),a=dn(n==null?void 0:n.headers);return t.userinfo_signed_response_alg?a.set("accept","application/jwt"):(a.set("accept","application/json"),a.append("accept","application/jwt")),Tp(r,"GET",o,a,null,{...n,[uu]:Ht(t)})}const Rp=Symbol();function gu(e){var t;return(t=e.headers.get("content-type"))==null?void 0:t.split(";")[0]}async function Cp(e,t,r,n,o){if(pr(e),mr(t),!hr(n,Response))throw re('"response" must be an instance of Response',Pe);if(vu(n),n.status!==200)throw j('"response" is not a conform UserInfo Endpoint response (unexpected HTTP status code)',Da,n);mn(n);let a;if(gu(n)==="application/jwt"){const{claims:i,jwt:s}=await xu(await n.text(),ku.bind(void 0,t.userinfo_signed_response_alg,e.userinfo_signing_alg_values_supported,void 0),Ht(t),hn(t),o==null?void 0:o[Vr]).then(Ip.bind(void 0,t.client_id)).then(Up.bind(void 0,e));wu.set(n,s),a=i}else{if(t.userinfo_signed_response_alg)throw j("JWT UserInfo Response expected",Jp,n);a=await Na(n)}switch(he(a.sub,'"response" body "sub" property',Y,{body:a}),r){case Rp:break;default:if(he(r,'"expectedSubject"'),a.sub!==r)throw j('unexpected "response" body "sub" property value',Au,{expected:r,body:a,attribute:"sub"})}return a}async function Pp(e,t,r,n,o,a,i){return await r(e,t,o,a),a.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),((i==null?void 0:i[Xe])||fetch)(n.href,{body:o,headers:Object.fromEntries(a.entries()),method:"POST",redirect:"manual",signal:Oa(n,i==null?void 0:i.signal)})}async function Op(e,t,r,n,o,a){var l;const i=pu(e,"token_endpoint",t.use_mtls_endpoint_aliases,(a==null?void 0:a[Ze])!==!0);o.set("grant_type",n);const s=dn(a==null?void 0:a.headers);s.set("accept","application/json"),(a==null?void 0:a.DPoP)!==void 0&&(yu(a.DPoP),await a.DPoP.addProof(i,s,"POST"));const c=await Pp(e,t,r,i,o,s,a);return(l=a==null?void 0:a.DPoP)==null||l.cacheNonce(c),c}const bu=new WeakMap,wu=new WeakMap;function Ua(e){if(!e.id_token)return;const t=bu.get(e);if(!t)throw re('"ref" was already garbage collected or did not resolve from the proper sources',Ie);return t}async function _u(e,t,r,n,o){if(pr(e),mr(t),!hr(r,Response))throw re('"response" must be an instance of Response',Pe);vu(r),await kp(r,200,"Token Endpoint"),mn(r);const a=await Na(r);if(he(a.access_token,'"response" body "access_token" property',Y,{body:a}),he(a.token_type,'"response" body "token_type" property',Y,{body:a}),a.token_type=a.token_type.toLowerCase(),a.token_type!=="dpop"&&a.token_type!=="bearer")throw new De("unsupported `token_type` value",{cause:{body:a}});if(a.expires_in!==void 0){let i=typeof a.expires_in!="number"?parseFloat(a.expires_in):a.expires_in;rr(i,!0,'"response" body "expires_in" property',Y,{body:a}),a.expires_in=i}if(a.refresh_token!==void 0&&he(a.refresh_token,'"response" body "refresh_token" property',Y,{body:a}),a.scope!==void 0&&typeof a.scope!="string")throw j('"response" body "scope" property must be a string',Y,{body:a});if(a.id_token!==void 0){he(a.id_token,'"response" body "id_token" property',Y,{body:a});const i=["aud","exp","iat","iss","sub"];t.require_auth_time===!0&&i.push("auth_time"),t.default_max_age!==void 0&&(rr(t.default_max_age,!0,'"client.default_max_age"'),i.push("auth_time")),n!=null&&n.length&&i.push(...n);const{claims:s,jwt:c}=await xu(a.id_token,ku.bind(void 0,t.id_token_signed_response_alg,e.id_token_signing_alg_values_supported,"RS256"),Ht(t),hn(t),o==null?void 0:o[Vr]).then(Lp.bind(void 0,i)).then(Su.bind(void 0,e)).then(Eu.bind(void 0,t.client_id));if(Array.isArray(s.aud)&&s.aud.length!==1){if(s.azp===void 0)throw j('ID Token "aud" (audience) claim includes additional untrusted audiences',lt,{claims:s,claim:"aud"});if(s.azp!==t.client_id)throw j('unexpected ID Token "azp" (authorized party) claim value',lt,{expected:t.client_id,claims:s,claim:"azp"})}s.auth_time!==void 0&&rr(s.auth_time,!1,'ID Token "auth_time" (authentication time)',Y,{claims:s}),wu.set(r,c),bu.set(a,s)}return a}function vu(e){let t;if(t=Ap(e))throw new mp("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:t,response:e})}function Ip(e,t){return t.claims.aud!==void 0?Eu(e,t):t}function Eu(e,t){if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e))throw j('unexpected JWT "aud" (audience) claim value',lt,{expected:e,claims:t.claims,claim:"aud"})}else if(t.claims.aud!==e)throw j('unexpected JWT "aud" (audience) claim value',lt,{expected:e,claims:t.claims,claim:"aud"});return t}function Up(e,t){return t.claims.iss!==void 0?Su(e,t):t}function Su(e,t){var n;const r=((n=e[rm])==null?void 0:n.call(e,t))??e.issuer;if(t.claims.iss!==r)throw j('unexpected JWT "iss" (issuer) claim value',lt,{expected:r,claims:t.claims,claim:"iss"});return t}const $a=new WeakSet;function $p(e){return $a.add(e),e}const Dp=Symbol();async function Np(e,t,r,n,o,a,i){if(pr(e),mr(t),!$a.has(n))throw re('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',Ie);he(o,'"redirectUri"');const s=yt(n,"code");if(!s)throw j('no authorization code in "callbackParameters"',Y);const c=new URLSearchParams(i==null?void 0:i.additionalParameters);return c.set("redirect_uri",o),c.set("code",s),a!==Dp&&(he(a,'"codeVerifier"'),c.set("code_verifier",a)),Op(e,t,r,"authorization_code",c,i)}const jp={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function Lp(e,t){for(const r of e)if(t.claims[r]===void 0)throw j(`JWT "${r}" (${jp[r]}) claim missing`,Y,{claims:t.claims});return t}const oo=Symbol(),ao=Symbol();async function Mp(e,t,r,n){return typeof(n==null?void 0:n.expectedNonce)=="string"||typeof(n==null?void 0:n.maxAge)=="number"||n!=null&&n.requireIdToken?Wp(e,t,r,n.expectedNonce,n.maxAge,{[Vr]:n[Vr]}):qp(e,t,r,n)}async function Wp(e,t,r,n,o,a){const i=[];switch(n){case void 0:n=oo;break;case oo:break;default:he(n,'"expectedNonce" argument'),i.push("nonce")}switch(o??(o=t.default_max_age),o){case void 0:o=ao;break;case ao:break;default:rr(o,!0,'"maxAge" argument'),i.push("auth_time")}const s=await _u(e,t,r,i,a);he(s.id_token,'"response" body "id_token" property',Y,{body:s});const c=Ua(s);if(o!==ao){const l=pn()+Ht(t),d=hn(t);if(c.auth_time+o<l-d)throw j("too much time has elapsed since the last End-User authentication",Qr,{claims:c,now:l,tolerance:d,claim:"auth_time"})}if(n===oo){if(c.nonce!==void 0)throw j('unexpected ID Token "nonce" claim value',lt,{expected:void 0,claims:c,claim:"nonce"})}else if(c.nonce!==n)throw j('unexpected ID Token "nonce" claim value',lt,{expected:n,claims:c,claim:"nonce"});return s}async function qp(e,t,r,n){const o=await _u(e,t,r,void 0,n),a=Ua(o);if(a){if(t.default_max_age!==void 0){rr(t.default_max_age,!0,'"client.default_max_age"');const i=pn()+Ht(t),s=hn(t);if(a.auth_time+t.default_max_age<i-s)throw j("too much time has elapsed since the last End-User authentication",Qr,{claims:a,now:i,tolerance:s,claim:"auth_time"})}if(a.nonce!==void 0)throw j('unexpected ID Token "nonce" claim value',lt,{expected:void 0,claims:a,claim:"nonce"})}return o}const Hp="OAUTH_WWW_AUTHENTICATE_CHALLENGE",Kp="OAUTH_RESPONSE_BODY_ERROR",Bp="OAUTH_UNSUPPORTED_OPERATION",zp="OAUTH_AUTHORIZATION_RESPONSE_ERROR",Jp="OAUTH_JWT_USERINFO_EXPECTED",ca="OAUTH_PARSE_ERROR",Y="OAUTH_INVALID_RESPONSE",Fp="OAUTH_RESPONSE_IS_NOT_JSON",Da="OAUTH_RESPONSE_IS_NOT_CONFORM",Gp="OAUTH_HTTP_REQUEST_FORBIDDEN",Vp="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",Qr="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",lt="OAUTH_JWT_CLAIM_COMPARISON_FAILED",Au="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",Xp="OAUTH_MISSING_SERVER_METADATA",Zp="OAUTH_INVALID_SERVER_METADATA";function mn(e){if(e.bodyUsed)throw re('"response" body has been used already',Ie)}function Fi(e){const{algorithm:t}=e;if(typeof t.modulusLength!="number"||t.modulusLength<2048)throw new De(`unsupported ${t.name} modulusLength`,{cause:e})}function Qp(e){const{algorithm:t}=e;switch(t.namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new De("unsupported ECDSA namedCurve",{cause:e})}}function Yp(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:Qp(e)};case"RSA-PSS":switch(Fi(e),e.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:e.algorithm.name,saltLength:parseInt(e.algorithm.hash.name.slice(-3),10)>>3};default:throw new De("unsupported RSA-PSS hash name",{cause:e})}case"RSASSA-PKCS1-v1_5":return Fi(e),e.algorithm.name;case"Ed25519":return e.algorithm.name}throw new De("unsupported CryptoKey algorithm name",{cause:e})}async function xu(e,t,r,n,o){let{0:a,1:i,length:s}=e.split(".");if(s===5)if(o!==void 0)e=await o(e),{0:a,1:i,length:s}=e.split(".");else throw new De("JWE decryption is not configured",{cause:e});if(s!==3)throw j("Invalid JWT",Y,e);let c;try{c=JSON.parse(We(He(a)))}catch(u){throw j("failed to parse JWT Header body as base64url encoded JSON",ca,u)}if(!Xr(c))throw j("JWT Header must be a top level object",Y,e);if(t(c),c.crit!==void 0)throw new De('no JWT "crit" header parameter extensions are supported',{cause:{header:c}});let l;try{l=JSON.parse(We(He(i)))}catch(u){throw j("failed to parse JWT Payload body as base64url encoded JSON",ca,u)}if(!Xr(l))throw j("JWT Payload must be a top level object",Y,e);const d=pn()+r;if(l.exp!==void 0){if(typeof l.exp!="number")throw j('unexpected JWT "exp" (expiration time) claim type',Y,{claims:l});if(l.exp<=d-n)throw j('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',Qr,{claims:l,now:d,tolerance:n,claim:"exp"})}if(l.iat!==void 0&&typeof l.iat!="number")throw j('unexpected JWT "iat" (issued at) claim type',Y,{claims:l});if(l.iss!==void 0&&typeof l.iss!="string")throw j('unexpected JWT "iss" (issuer) claim type',Y,{claims:l});if(l.nbf!==void 0){if(typeof l.nbf!="number")throw j('unexpected JWT "nbf" (not before) claim type',Y,{claims:l});if(l.nbf>d+n)throw j('unexpected JWT "nbf" (not before) claim value',Qr,{claims:l,now:d,tolerance:n,claim:"nbf"})}if(l.aud!==void 0&&typeof l.aud!="string"&&!Array.isArray(l.aud))throw j('unexpected JWT "aud" (audience) claim type',Y,{claims:l});return{header:c,claims:l,jwt:e}}function ku(e,t,r,n){if(e!==void 0){if(typeof e=="string"?n.alg!==e:!e.includes(n.alg))throw j('unexpected JWT "alg" header parameter',Y,{header:n,expected:e,reason:"client configuration"});return}if(Array.isArray(t)){if(!t.includes(n.alg))throw j('unexpected JWT "alg" header parameter',Y,{header:n,expected:t,reason:"authorization server metadata"});return}if(r!==void 0){if(typeof r=="string"?n.alg!==r:typeof r=="function"?!r(n.alg):!r.includes(n.alg))throw j('unexpected JWT "alg" header parameter',Y,{header:n,expected:r,reason:"default value"});return}throw j('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:e,issuer:t,fallback:r})}function yt(e,t){const{0:r,length:n}=e.getAll(t);if(n>1)throw j(`"${t}" parameter must be provided only once`,Y);return r}const Tu=Symbol(),em=Symbol();function tm(e,t,r,n){if(pr(e),mr(t),r instanceof URL&&(r=r.searchParams),!(r instanceof URLSearchParams))throw re('"parameters" must be an instance of URLSearchParams, or URL',Pe);if(yt(r,"response"))throw j('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',Y,{parameters:r});const o=yt(r,"iss"),a=yt(r,"state");if(!o&&e.authorization_response_iss_parameter_supported)throw j('response parameter "iss" (issuer) missing',Y,{parameters:r});if(o&&o!==e.issuer)throw j('unexpected "iss" (issuer) response parameter value',Y,{expected:e.issuer,parameters:r});switch(n){case void 0:case em:if(a!==void 0)throw j('unexpected "state" response parameter encountered',Y,{expected:void 0,parameters:r});break;case Tu:break;default:if(he(n,'"expectedState" argument'),a!==n)throw j(a===void 0?'response parameter "state" missing':'unexpected "state" response parameter value',Y,{expected:n,parameters:r})}if(yt(r,"error"))throw new mu("authorization response from the server is an error",{cause:r});const s=yt(r,"id_token"),c=yt(r,"token");if(s!==void 0||c!==void 0)throw new De("implicit and hybrid flows are not supported");return $p(new URLSearchParams(r))}async function Na(e,t=fu){let r;try{r=await e.json()}catch(n){throw t(e),j('failed to parse "response" body as JSON',ca,n)}if(!Xr(r))throw j('"response" body must be a top level object',Y,{body:r});return r}const Gi=Symbol(),rm=Symbol(),io=900;async function yn(e,t,r){const{cookies:n,logger:o}=r,a=n[e],i=new Date;i.setTime(i.getTime()+io*1e3),o.debug(`CREATE_${e.toUpperCase()}`,{name:a.name,payload:t,COOKIE_TTL:io,expires:i});const s=await sn({...r.jwt,maxAge:io,token:{value:t},salt:a.name}),c={...a.options,expires:i};return{name:a.name,value:s,options:c}}async function Ru(e,t,r){try{const{logger:n,cookies:o,jwt:a}=r;if(n.debug(`PARSE_${e.toUpperCase()}`,{cookie:t}),!t)throw new Lt(`${e} cookie was missing`);const i=await cn({...a,token:t,salt:o[e].name});if(i!=null&&i.value)return i.value;throw new Error("Invalid cookie")}catch(n){throw new Lt(`${e} value could not be parsed`,{cause:n})}}function Cu(e,t,r){const{logger:n,cookies:o}=t,a=o[e];n.debug(`CLEAR_${e.toUpperCase()}`,{cookie:a}),r.push({name:a.name,value:"",options:{...o[e].options,maxAge:0}})}function ja(e,t){return async function(r,n,o){var l;const{provider:a,logger:i}=o;if(!((l=a==null?void 0:a.checks)!=null&&l.includes(e)))return;const s=r==null?void 0:r[o.cookies[t].name];i.debug(`USE_${t.toUpperCase()}`,{value:s});const c=await Ru(t,s,o);return Cu(t,o,n),c}}const Pu={async create(e){const t=Yh(),r=await rp(t);return{cookie:await yn("pkceCodeVerifier",t,e),value:r}},use:ja("pkce","pkceCodeVerifier")},nm=900,Vi="encodedState",La={async create(e,t){const{provider:r}=e;if(!r.checks.includes("state")){if(t)throw new Lt("State data was provided but the provider is not configured to use state");return}const n={origin:t,random:ep()},o=await sn({secret:e.jwt.secret,token:n,salt:Vi,maxAge:nm});return{cookie:await yn("state",o,e),value:o}},use:ja("state","state"),async decode(e,t){try{t.logger.debug("DECODE_STATE",{state:e});const r=await cn({secret:t.jwt.secret,token:e,salt:Vi});if(r)return r;throw new Error("Invalid state")}catch(r){throw new Lt("State could not be decoded",{cause:r})}}},Ou={async create(e){if(!e.provider.checks.includes("nonce"))return;const t=tp();return{cookie:await yn("nonce",t,e),value:t}},use:ja("nonce","nonce")},om=900,Xi="encodedWebauthnChallenge",gn={async create(e,t,r){return{cookie:await yn("webauthnChallenge",await sn({secret:e.jwt.secret,token:{challenge:t,registerData:r},salt:Xi,maxAge:om}),e)}},async use(e,t,r){const n=t==null?void 0:t[e.cookies.webauthnChallenge.name],o=await Ru("webauthnChallenge",n,e),a=await cn({secret:e.jwt.secret,token:o,salt:Xi});if(Cu("webauthnChallenge",e,r),!a)throw new Lt("WebAuthn challenge was missing");return a}};function Zi(e){return encodeURIComponent(e).replace(/%20/g,"+")}function am(e,t){const r=Zi(e),n=Zi(t);return`Basic ${btoa(`${r}:${n}`)}`}async function im(e,t,r){var f,A,E;const{logger:n,provider:o}=r;let a;const{token:i,userinfo:s}=o;if((!(i!=null&&i.url)||i.url.host==="authjs.dev")&&(!(s!=null&&s.url)||s.url.host==="authjs.dev")){const S=new URL(o.issuer),x=await ia(S,{[Ze]:!0,[Xe]:o[Ve]});if(a=await sa(S,x),!a.token_endpoint)throw new TypeError("TODO: Authorization server did not provide a token endpoint.");if(!a.userinfo_endpoint)throw new TypeError("TODO: Authorization server did not provide a userinfo endpoint.")}else a={issuer:o.issuer??"https://authjs.dev",token_endpoint:i==null?void 0:i.url.toString(),userinfo_endpoint:s==null?void 0:s.url.toString()};const c={client_id:o.clientId,...o.client};let l;switch(c.token_endpoint_auth_method){case void 0:case"client_secret_basic":l=(S,x,I,M)=>{M.set("authorization",am(o.clientId,o.clientSecret))};break;case"client_secret_post":l=cp(o.clientSecret);break;case"client_secret_jwt":l=lp(o.clientSecret);break;case"private_key_jwt":l=up(o.token.clientPrivateKey,{[lu](S,x){x.aud=[a.issuer,a.token_endpoint]}});break;case"none":l=dp();break;default:throw new Error("unsupported client authentication method")}const d=[],u=await La.use(t,d,r);let h;try{h=tm(a,c,new URLSearchParams(e),o.checks.includes("state")?u:Tu)}catch(S){if(S instanceof mu){const x={providerId:o.id,...Object.fromEntries(S.cause.entries())};throw n.debug("OAuthCallbackError",x),new Jo("OAuth Provider returned an error",x)}throw S}const g=await Pu.use(t,d,r);let p=o.callbackUrl;!r.isOnRedirectProxy&&o.redirectProxyUrl&&(p=o.redirectProxyUrl);let y=await Np(a,c,l,h,p,g??"decoy",{[Ze]:!0,[Xe]:(...S)=>(o.checks.includes("pkce")||S[1].body.delete("code_verifier"),(o[Ve]??fetch)(...S))});(f=o.token)!=null&&f.conform&&(y=await o.token.conform(y.clone())??y);let m={};const b=yh(o);if(o[ji])switch(o.id){case"microsoft-entra-id":case"azure-ad":{const S=await y.clone().json();if(S.error){const I={providerId:o.id,...S};throw new Jo(`OAuth Provider returned an error: ${S.error}`,I)}const{tid:x}=Mf(S.id_token);if(typeof x=="string"){const I=/microsoftonline\.com\/(\w+)\/v2\.0/,M=((E=(A=a.issuer)==null?void 0:A.match(I))==null?void 0:E[1])??"common",U=new URL(a.issuer.replace(M,x)),O=await ia(U,{[Xe]:o[Ve]});a=await sa(U,O)}break}}const _=await Mp(a,c,y,{expectedNonce:await Ou.use(t,d,r),requireIdToken:b}),v=_;if(b){const S=Ua(_);if(m=S,o[ji]&&o.id==="apple")try{m.user=JSON.parse(e==null?void 0:e.user)}catch{}if(o.idToken===!1){const x=await Ji(a,c,_.access_token,{[Xe]:o[Ve],[Ze]:!0});m=await Cp(a,c,S.sub,x)}}else if(s!=null&&s.request){const S=await s.request({tokens:v,provider:o});S instanceof Object&&(m=S)}else if(s!=null&&s.url)m=await(await Ji(a,c,_.access_token,{[Xe]:o[Ve],[Ze]:!0})).json();else throw new TypeError("No userinfo endpoint configured");return v.expires_in&&(v.expires_at=Math.floor(Date.now()/1e3)+Number(v.expires_in)),{...await sm(m,o,v,n),profile:m,cookies:d}}async function sm(e,t,r,n){var o;try{const a=await t.profile(e,r);return{user:{...a,id:crypto.randomUUID(),email:(o=a.email)==null?void 0:o.toLowerCase()},account:{...r,provider:t.id,type:t.type,providerAccountId:a.id??crypto.randomUUID()}}}catch(a){n.debug("getProfile error details",e),n.error(new Sc(a,{provider:t.id}))}}function cm(e,t,r){const{user:n,exists:o=!1}=r??{};switch(e){case"authenticate":return"authenticate";case"register":{if(n&&t===o)return"register";break}case void 0:{if(!t)return n?o?"authenticate":"register":"authenticate";break}}return null}async function um(e,t,r,n){const o=await pm(e,t,r),{cookie:a}=await gn.create(e,o.challenge,r);return{status:200,cookies:[...n??[],a],body:{action:"register",options:o},headers:{"Content-Type":"application/json"}}}async function lm(e,t,r,n){const o=await hm(e,t,r),{cookie:a}=await gn.create(e,o.challenge);return{status:200,cookies:[...n??[],a],body:{action:"authenticate",options:o},headers:{"Content-Type":"application/json"}}}async function dm(e,t,r){const{adapter:n,provider:o}=e,a=t.body&&typeof t.body.data=="string"?JSON.parse(t.body.data):void 0;if(!a||typeof a!="object"||!("id"in a)||typeof a.id!="string")throw new H("Invalid WebAuthn Authentication response");const i=Nr(sr(a.id)),s=await n.getAuthenticator(i);if(!s)throw new H(`WebAuthn authenticator not found in database: ${JSON.stringify({credentialID:i})}`);const{challenge:c}=await gn.use(e,t.cookies,r);let l;try{const p=o.getRelayingParty(e,t);l=await o.simpleWebAuthn.verifyAuthenticationResponse({...o.verifyAuthenticationOptions,expectedChallenge:c,response:a,authenticator:mm(s),expectedOrigin:p.origin,expectedRPID:p.id})}catch(p){throw new ar(p)}const{verified:d,authenticationInfo:u}=l;if(!d)throw new ar("WebAuthn authentication response could not be verified");try{const{newCounter:p}=u;await n.updateAuthenticatorCounter(s.credentialID,p)}catch(p){throw new _a(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({credentialID:i,oldCounter:s.counter,newCounter:u.newCounter})}`,p)}const h=await n.getAccount(s.providerAccountId,o.id);if(!h)throw new H(`WebAuthn account not found in database: ${JSON.stringify({credentialID:i,providerAccountId:s.providerAccountId})}`);const g=await n.getUser(h.userId);if(!g)throw new H(`WebAuthn user not found in database: ${JSON.stringify({credentialID:i,providerAccountId:s.providerAccountId,userID:h.userId})}`);return{account:h,user:g}}async function fm(e,t,r){const{provider:n}=e,o=t.body&&typeof t.body.data=="string"?JSON.parse(t.body.data):void 0;if(!o||typeof o!="object"||!("id"in o)||typeof o.id!="string")throw new H("Invalid WebAuthn Registration response");const{challenge:a,registerData:i}=await gn.use(e,t.cookies,r);if(!i)throw new H("Missing user registration data in WebAuthn challenge cookie");let s;try{const d=n.getRelayingParty(e,t);s=await n.simpleWebAuthn.verifyRegistrationResponse({...n.verifyRegistrationOptions,expectedChallenge:a,response:o,expectedOrigin:d.origin,expectedRPID:d.id})}catch(d){throw new ar(d)}if(!s.verified||!s.registrationInfo)throw new ar("WebAuthn registration response could not be verified");const c={providerAccountId:Nr(s.registrationInfo.credentialID),provider:e.provider.id,type:n.type},l={providerAccountId:c.providerAccountId,counter:s.registrationInfo.counter,credentialID:Nr(s.registrationInfo.credentialID),credentialPublicKey:Nr(s.registrationInfo.credentialPublicKey),credentialBackedUp:s.registrationInfo.credentialBackedUp,credentialDeviceType:s.registrationInfo.credentialDeviceType,transports:ym(o.response.transports)};return{user:i,account:c,authenticator:l}}async function hm(e,t,r){const{provider:n,adapter:o}=e,a=r&&r.id?await o.listAuthenticatorsByUserId(r.id):null,i=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateAuthenticationOptions({...n.authenticationOptions,rpID:i.id,allowCredentials:a==null?void 0:a.map(s=>({id:sr(s.credentialID),type:"public-key",transports:Ma(s.transports)}))})}async function pm(e,t,r){const{provider:n,adapter:o}=e,a=r.id?await o.listAuthenticatorsByUserId(r.id):null,i=Ca(32),s=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateRegistrationOptions({...n.registrationOptions,userID:i,userName:r.email,userDisplayName:r.name??void 0,rpID:s.id,rpName:s.name,excludeCredentials:a==null?void 0:a.map(c=>({id:sr(c.credentialID),type:"public-key",transports:Ma(c.transports)}))})}function Iu(e){const{provider:t,adapter:r}=e;if(!r)throw new Yt("An adapter is required for the WebAuthn provider");if(!t||t.type!=="webauthn")throw new Kr("Provider must be WebAuthn");return{...e,provider:t,adapter:r}}function mm(e){return{...e,credentialDeviceType:e.credentialDeviceType,transports:Ma(e.transports),credentialID:sr(e.credentialID),credentialPublicKey:sr(e.credentialPublicKey)}}function sr(e){return new Uint8Array(Buffer.from(e,"base64"))}function Nr(e){return Buffer.from(e).toString("base64")}function ym(e){return e==null?void 0:e.join(",")}function Ma(e){return e?e.split(","):void 0}async function Qi(e,t,r,n){var w,f,A,E,S,x,I,M,U,O;if(!t.provider)throw new Kr("Callback route called without provider");const{query:o,body:a,method:i,headers:s}=e,{provider:c,adapter:l,url:d,callbackUrl:u,pages:h,jwt:g,events:p,callbacks:y,session:{strategy:m,maxAge:b},logger:_}=t,v=m==="jwt";try{if(c.type==="oauth"||c.type==="oidc"){const R=((w=c.authorization)==null?void 0:w.url.searchParams.get("response_mode"))==="form_post"?a:o;if(t.isOnRedirectProxy&&(R!=null&&R.state)){const Z=await La.decode(R.state,t);if((Z==null?void 0:Z.origin)&&new URL(Z.origin).origin!==t.url.origin){const X=`${Z.origin}?${new URLSearchParams(R)}`;return _.debug("Proxy redirecting to",X),{redirect:X,cookies:n}}}const D=await im(R,e.cookies,t);D.cookies.length&&n.push(...D.cookies),_.debug("authorization result",D);const{user:C,account:T,profile:K}=D;if(!C||!T||!K)return{redirect:`${d}/signin`,cookies:n};let B;if(l){const{getUserByAccount:Z}=l;B=await Z({providerAccountId:T.providerAccountId,provider:c.id})}const W=await Cr({user:B??C,account:T,profile:K},t);if(W)return{redirect:W,cookies:n};const{user:J,session:V,isNewUser:F}=await no(r.value,C,T,t);if(v){const Z={name:J.name,email:J.email,picture:J.image,sub:(f=J.id)==null?void 0:f.toString()},ee=await y.jwt({token:Z,user:J,account:T,profile:K,isNewUser:F,trigger:F?"signUp":"signIn"});if(ee===null)n.push(...r.clean());else{const X=t.cookies.sessionToken.name,oe=await g.encode({...g,token:ee,salt:X}),de=new Date;de.setTime(de.getTime()+b*1e3);const ke=r.chunk(oe,{expires:de});n.push(...ke)}}else n.push({name:t.cookies.sessionToken.name,value:V.sessionToken,options:{...t.cookies.sessionToken.options,expires:V.expires}});return await((A=p.signIn)==null?void 0:A.call(p,{user:J,account:T,profile:K,isNewUser:F})),F&&h.newUser?{redirect:`${h.newUser}${h.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:u})}`,cookies:n}:{redirect:u,cookies:n}}else if(c.type==="email"){const R=o==null?void 0:o.token,D=o==null?void 0:o.email;if(!R){const de=new TypeError("Missing token. The sign-in URL was manually opened without token or the link was not sent correctly in the email.",{cause:{hasToken:!!R}});throw de.name="Configuration",de}const C=c.secret??t.secret,T=await l.useVerificationToken({identifier:D,token:await Fr(`${R}${C}`)}),K=!!T,B=K&&T.expires.valueOf()<Date.now();if(!K||B||D&&T.identifier!==D)throw new Rc({hasInvite:K,expired:B});const{identifier:J}=T,V=await l.getUserByEmail(J)??{id:crypto.randomUUID(),email:J,emailVerified:null},F={providerAccountId:V.email,userId:V.id,type:"email",provider:c.id},Z=await Cr({user:V,account:F},t);if(Z)return{redirect:Z,cookies:n};const{user:ee,session:X,isNewUser:oe}=await no(r.value,V,F,t);if(v){const de={name:ee.name,email:ee.email,picture:ee.image,sub:(E=ee.id)==null?void 0:E.toString()},ke=await y.jwt({token:de,user:ee,account:F,isNewUser:oe,trigger:oe?"signUp":"signIn"});if(ke===null)n.push(...r.clean());else{const pe=t.cookies.sessionToken.name,ge=await g.encode({...g,token:ke,salt:pe}),_e=new Date;_e.setTime(_e.getTime()+b*1e3);const ht=r.chunk(ge,{expires:_e});n.push(...ht)}}else n.push({name:t.cookies.sessionToken.name,value:X.sessionToken,options:{...t.cookies.sessionToken.options,expires:X.expires}});return await((S=p.signIn)==null?void 0:S.call(p,{user:ee,account:F,isNewUser:oe})),oe&&h.newUser?{redirect:`${h.newUser}${h.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:u})}`,cookies:n}:{redirect:u,cookies:n}}else if(c.type==="credentials"&&i==="POST"){const R=a??{};Object.entries(o??{}).forEach(([J,V])=>d.searchParams.set(J,V));const C=await c.authorize(R,new Request(d,{headers:s,method:i,body:JSON.stringify(a)}));if(C)C.id=((x=C.id)==null?void 0:x.toString())??crypto.randomUUID();else throw new va;const T={providerAccountId:C.id,type:"credentials",provider:c.id},K=await Cr({user:C,account:T,credentials:R},t);if(K)return{redirect:K,cookies:n};const B={name:C.name,email:C.email,picture:C.image,sub:C.id},W=await y.jwt({token:B,user:C,account:T,isNewUser:!1,trigger:"signIn"});if(W===null)n.push(...r.clean());else{const J=t.cookies.sessionToken.name,V=await g.encode({...g,token:W,salt:J}),F=new Date;F.setTime(F.getTime()+b*1e3);const Z=r.chunk(V,{expires:F});n.push(...Z)}return await((I=p.signIn)==null?void 0:I.call(p,{user:C,account:T})),{redirect:u,cookies:n}}else if(c.type==="webauthn"&&i==="POST"){const R=(M=e.body)==null?void 0:M.action;if(typeof R!="string"||R!=="authenticate"&&R!=="register")throw new H("Invalid action parameter");const D=Iu(t);let C,T,K;switch(R){case"authenticate":{const F=await dm(D,e,n);C=F.user,T=F.account;break}case"register":{const F=await fm(t,e,n);C=F.user,T=F.account,K=F.authenticator;break}}await Cr({user:C,account:T},t);const{user:B,isNewUser:W,session:J,account:V}=await no(r.value,C,T,t);if(!V)throw new H("Error creating or finding account");if(K&&B.id&&await D.adapter.createAuthenticator({...K,userId:B.id}),v){const F={name:B.name,email:B.email,picture:B.image,sub:(U=B.id)==null?void 0:U.toString()},Z=await y.jwt({token:F,user:B,account:V,isNewUser:W,trigger:W?"signUp":"signIn"});if(Z===null)n.push(...r.clean());else{const ee=t.cookies.sessionToken.name,X=await g.encode({...g,token:Z,salt:ee}),oe=new Date;oe.setTime(oe.getTime()+b*1e3);const de=r.chunk(X,{expires:oe});n.push(...de)}}else n.push({name:t.cookies.sessionToken.name,value:J.sessionToken,options:{...t.cookies.sessionToken.options,expires:J.expires}});return await((O=p.signIn)==null?void 0:O.call(p,{user:B,account:V,isNewUser:W})),W&&h.newUser?{redirect:`${h.newUser}${h.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:u})}`,cookies:n}:{redirect:u,cookies:n}}throw new Kr(`Callback for provider type (${c.type}) is not supported`)}catch(R){if(R instanceof H)throw R;const D=new mc(R,{provider:c.id});throw _.debug("callback route error details",{method:i,query:o,body:a}),D}}async function Cr(e,t){let r;const{signIn:n,redirect:o}=t.callbacks;try{r=await n(e)}catch(a){throw a instanceof H?a:new or(a)}if(!r)throw new or("AccessDenied");if(typeof r=="string")return await o({url:r,baseUrl:t.url.origin})}async function Yi(e,t,r,n,o){var p,y,m,b,_,v,w;const{adapter:a,jwt:i,events:s,callbacks:c,logger:l,session:{strategy:d,maxAge:u}}=e,h={body:null,headers:{"Content-Type":"application/json",...!n&&{"Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"}},cookies:r},g=t.value;if(!g)return h;if(d==="jwt"){try{const f=e.cookies.sessionToken.name,A=await i.decode({...i,token:g,salt:f});if(!A)throw new Error("Invalid JWT");const E=await c.jwt({token:A,...n&&{trigger:"update"},session:o}),S=gt(u);if(E!==null){const x={user:{name:E.name,email:E.email,image:E.picture},expires:S.toISOString()},I=await c.session({session:x,token:E});h.body=I;const M=await i.encode({...i,token:E,salt:f}),U=t.chunk(M,{expires:S});(p=h.cookies)==null||p.push(...U),await((y=s.session)==null?void 0:y.call(s,{session:I,token:E}))}else(m=h.cookies)==null||m.push(...t.clean())}catch(f){l.error(new wc(f)),(b=h.cookies)==null||b.push(...t.clean())}return h}try{const{getSessionAndUser:f,deleteSession:A,updateSession:E}=a;let S=await f(g);if(S&&S.session.expires.valueOf()<Date.now()&&(await A(g),S=null),S){const{user:x,session:I}=S,M=e.session.updateAge,U=I.expires.valueOf()-u*1e3+M*1e3,O=gt(u);U<=Date.now()&&await E({sessionToken:g,expires:O});const R=await c.session({session:{...I,user:x},user:x,newSession:o,...n?{trigger:"update"}:{}});h.body=R,(_=h.cookies)==null||_.push({name:e.cookies.sessionToken.name,value:g,options:{...e.cookies.sessionToken.options,expires:O}}),await((v=s.session)==null?void 0:v.call(s,{session:R}))}else g&&((w=h.cookies)==null||w.push(...t.clean()))}catch(f){l.error(new Ac(f))}return h}async function gm(e,t){var h,g,p,y,m;const{logger:r,provider:n}=t;let o=(h=n.authorization)==null?void 0:h.url;if(!o||o.host==="authjs.dev"){const b=new URL(n.issuer),_=await ia(b,{[Xe]:n[Ve],[Ze]:!0}),v=await sa(b,_).catch(w=>{throw!(w instanceof TypeError)||w.message!=="Invalid URL"?w:new TypeError(`Discovery request responded with an invalid issuer. expected: ${b}`)});if(!v.authorization_endpoint)throw new TypeError("Authorization server did not provide an authorization endpoint.");o=new URL(v.authorization_endpoint)}const a=o.searchParams;let i=n.callbackUrl,s;!t.isOnRedirectProxy&&n.redirectProxyUrl&&(i=n.redirectProxyUrl,s=n.callbackUrl,r.debug("using redirect proxy",{redirect_uri:i,data:s}));const c=Object.assign({response_type:"code",client_id:n.clientId,redirect_uri:i,...(g=n.authorization)==null?void 0:g.params},Object.fromEntries(((p=n.authorization)==null?void 0:p.url.searchParams)??[]),e);for(const b in c)a.set(b,c[b]);const l=[];((y=n.authorization)==null?void 0:y.url.searchParams.get("response_mode"))==="form_post"&&(t.cookies.state.options.sameSite="none",t.cookies.state.options.secure=!0,t.cookies.nonce.options.sameSite="none",t.cookies.nonce.options.secure=!0);const d=await La.create(t,s);if(d&&(a.set("state",d.value),l.push(d.cookie)),(m=n.checks)!=null&&m.includes("pkce")){const{value:b,cookie:_}=await Pu.create(t);a.set("code_challenge",b),a.set("code_challenge_method","S256"),l.push(_)}const u=await Ou.create(t);return u&&(a.set("nonce",u.value),l.push(u.cookie)),n.type==="oidc"&&!o.searchParams.has("scope")&&o.searchParams.set("scope","openid profile email"),r.debug("authorization url is ready",{url:o,cookies:l,provider:n}),{redirect:o.toString(),cookies:l}}async function bm(e,t){var f,A;const{body:r}=e,{provider:n,callbacks:o,adapter:a}=t,s=(n.normalizeIdentifier??wm)(r==null?void 0:r.email),c={id:crypto.randomUUID(),email:s,emailVerified:null},l=await a.getUserByEmail(s)??c,d={providerAccountId:s,userId:l.id,type:"email",provider:n.id};let u;try{u=await o.signIn({user:l,account:d,email:{verificationRequest:!0}})}catch(E){throw new or(E)}if(!u)throw new or("AccessDenied");if(typeof u=="string")return{redirect:await o.redirect({url:u,baseUrl:t.url.origin})};const{callbackUrl:h,theme:g}=t,p=await((f=n.generateVerificationToken)==null?void 0:f.call(n))??Ca(32),y=86400,m=new Date(Date.now()+(n.maxAge??y)*1e3),b=n.secret??t.secret,_=new URL(t.basePath,t.url.origin),v=n.sendVerificationRequest({identifier:s,token:p,expires:m,url:`${_}/callback/${n.id}?${new URLSearchParams({callbackUrl:h,token:p,email:s})}`,provider:n,theme:g,request:uh(e)}),w=(A=a.createVerificationToken)==null?void 0:A.call(a,{identifier:s,token:await Fr(`${p}${b}`),expires:m});return await Promise.all([v,w]),{redirect:`${_}/verify-request?${new URLSearchParams({provider:n.id,type:n.type})}`}}function wm(e){if(!e)throw new Error("Missing email from request body.");let[t,r]=e.toLowerCase().trim().split("@");return r=r.split(",")[0],`${t}@${r}`}async function _m(e,t,r){const n=`${r.url.origin}${r.basePath}/signin`;if(!r.provider)return{redirect:n,cookies:t};switch(r.provider.type){case"oauth":case"oidc":{const{redirect:o,cookies:a}=await gm(e.query,r);return a&&t.push(...a),{redirect:o,cookies:t}}case"email":return{...await bm(e,r),cookies:t};default:return{redirect:n,cookies:t}}}async function vm(e,t,r){var l,d,u;const{jwt:n,events:o,callbackUrl:a,logger:i,session:s}=r,c=t.value;if(!c)return{redirect:a,cookies:e};try{if(s.strategy==="jwt"){const h=r.cookies.sessionToken.name,g=await n.decode({...n,token:c,salt:h});await((l=o.signOut)==null?void 0:l.call(o,{token:g}))}else{const h=await((d=r.adapter)==null?void 0:d.deleteSession(c));await((u=o.signOut)==null?void 0:u.call(o,{session:h}))}}catch(h){i.error(new xc(h))}return e.push(...t.clean()),{redirect:a,cookies:e}}async function Em(e,t){const{adapter:r,jwt:n,session:{strategy:o}}=e,a=t.value;if(!a)return null;if(o==="jwt"){const i=e.cookies.sessionToken.name,s=await n.decode({...n,token:a,salt:i});if(s&&s.sub)return{id:s.sub,name:s.name,email:s.email,image:s.picture}}else{const i=await(r==null?void 0:r.getSessionAndUser(a));if(i)return i.user}return null}async function Sm(e,t,r,n){const o=Iu(t),{provider:a}=o,{action:i}=e.query??{};if(i!=="register"&&i!=="authenticate"&&typeof i<"u")return{status:400,body:{error:"Invalid action"},cookies:n,headers:{"Content-Type":"application/json"}};const s=await Em(t,r),c=s?{user:s,exists:!0}:await a.getUserInfo(t,e),l=c==null?void 0:c.user;switch(cm(i,!!s,c)){case"authenticate":return lm(o,e,l,n);case"register":if(typeof(l==null?void 0:l.email)=="string")return um(o,e,l,n);break;default:return{status:400,body:{error:"Invalid request"},cookies:n,headers:{"Content-Type":"application/json"}}}}async function Am(e,t){var d,u,h,g;const{action:r,providerId:n,error:o,method:a}=e,i=t.skipCSRFCheck===un,{options:s,cookies:c}=await bh({authOptions:t,action:r,providerId:n,url:e.url,callbackUrl:((d=e.body)==null?void 0:d.callbackUrl)??((u=e.query)==null?void 0:u.callbackUrl),csrfToken:(h=e.body)==null?void 0:h.csrfToken,cookies:e.cookies,isPost:a==="POST",csrfDisabled:i}),l=new Od(s.cookies.sessionToken,e.cookies,s.logger);if(a==="GET"){const p=cu({...s,query:e.query,cookies:c});switch(r){case"callback":return await Qi(e,s,l,c);case"csrf":return p.csrf(i,s,c);case"error":return p.error(o);case"providers":return p.providers(s.providers);case"session":return await Yi(s,l,c);case"signin":return p.signin(n,o);case"signout":return p.signout();case"verify-request":return p.verifyRequest();case"webauthn-options":return await Sm(e,s,l,c)}}else{const{csrfTokenVerified:p}=s;switch(r){case"callback":return s.provider.type==="credentials"&&xr(r,p),await Qi(e,s,l,c);case"session":return xr(r,p),await Yi(s,l,c,!0,(g=e.body)==null?void 0:g.data);case"signin":return xr(r,p),await _m(e,c,s);case"signout":return xr(r,p),await vm(c,l,s)}}throw new ct(`Cannot handle action: ${r}`)}function xm(e,t,r=!1){var n;try{const o=e.AUTH_URL;o&&(t.basePath?r||fr(t).warn("env-url-basepath-redundant"):t.basePath=new URL(o).pathname)}catch{}finally{t.basePath??(t.basePath="/auth")}if(!((n=t.secret)!=null&&n.length)){t.secret=[];const o=e.AUTH_SECRET;o&&t.secret.push(o);for(const a of[1,2,3]){const i=e[`AUTH_SECRET_${a}`];i&&t.secret.unshift(i)}}t.redirectProxyUrl??(t.redirectProxyUrl=e.AUTH_REDIRECT_PROXY_URL),t.trustHost??(t.trustHost=!!(e.AUTH_URL??e.AUTH_TRUST_HOST??e.VERCEL??e.CF_PAGES??e.NODE_ENV!=="production")),t.providers=t.providers.map(o=>{const{id:a}=typeof o=="function"?o({}):o,i=a.toUpperCase().replace(/-/g,"_"),s=e[`AUTH_${i}_ID`],c=e[`AUTH_${i}_SECRET`],l=e[`AUTH_${i}_ISSUER`],d=e[`AUTH_${i}_KEY`],u=typeof o=="function"?o({clientId:s,clientSecret:c,issuer:l,apiKey:d}):o;return u.type==="oauth"||u.type==="oidc"?(u.clientId??(u.clientId=s),u.clientSecret??(u.clientSecret=c),u.issuer??(u.issuer=l)):u.type==="email"&&(u.apiKey??(u.apiKey=d)),u})}function bn(e,t,r,n,o){const a=o==null?void 0:o.basePath,i=n.AUTH_URL??n.NEXTAUTH_URL;let s;if(i)s=new URL(i),a&&a!=="/"&&s.pathname!=="/"&&(s.pathname!==a&&fr(o).warn("env-url-basepath-mismatch"),s.pathname="/");else{const l=r.get("x-forwarded-host")??r.get("host"),d=r.get("x-forwarded-proto")??t??"https",u=d.endsWith(":")?d:d+":";s=new URL(`${u}//${l}`)}const c=s.toString().replace(/\/$/,"");if(a){const l=(a==null?void 0:a.replace(/(^\/|\/$)/g,""))??"";return new URL(`${c}/${l}/${e}`)}return new URL(`${c}/${e}`)}async function Mt(e,t){var s,c,l;const r=fr(t),n=await ch(e,t);if(!n)return Response.json("Bad request.",{status:400});const o=Wd(n,t);if(Array.isArray(o))o.forEach(r.warn);else if(o){if(r.error(o),!new Set(["signin","signout","error","verify-request"]).has(n.action)||n.method!=="GET")return Response.json({message:"There was a problem with the server configuration. Check the server logs for more information."},{status:500});const{pages:u,theme:h}=t,g=(u==null?void 0:u.error)&&((s=n.url.searchParams.get("callbackUrl"))==null?void 0:s.startsWith(u.error));if(!(u!=null&&u.error)||g){g&&r.error(new yc(`The error page ${u==null?void 0:u.error} should not require authentication`));const y=cu({theme:h}).error("Configuration");return Ni(y)}const p=`${n.url.origin}${u.error}?error=Configuration`;return Response.redirect(p)}const a=(c=e.headers)==null?void 0:c.has("X-Auth-Return-Redirect"),i=t.raw===ln;try{const d=await Am(n,t);if(i)return d;const u=Ni(d),h=u.headers.get("Location");return!a||!h?u:Response.json({url:h},{headers:u.headers})}catch(d){const u=d;r.error(u);const h=u instanceof H;if(h&&i&&!a)throw u;if(e.method==="POST"&&n.action==="session")return Response.json(null,{status:400});const p=Dd(u)?u.type:"Configuration",y=new URLSearchParams({error:p});u instanceof va&&y.set("code",u.code);const m=h&&u.kind||"error",b=((l=t.pages)==null?void 0:l[m])??`${t.basePath}/${m.toLowerCase()}`,_=`${n.url.origin}${b}?${y}`;return a?Response.json({url:_}):Response.redirect(_)}}var Pr={exports:{}},so={},co={},uo={},es;function km(){return es||(es=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"detectDomainLocale",{enumerable:!0,get:function(){return t}});function t(r,n,o){if(r){o&&(o=o.toLowerCase());for(const s of r){var a,i;const c=(a=s.domain)==null?void 0:a.split(":",1)[0].toLowerCase();if(n===c||o===s.defaultLocale.toLowerCase()||(i=s.locales)!=null&&i.some(l=>l.toLowerCase()===o))return s}}}}(uo)),uo}var lo={},ts;function Tm(){return ts||(ts=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getHostname",{enumerable:!0,get:function(){return t}});function t(r,n){let o;if(n!=null&&n.host&&!Array.isArray(n.host))o=n.host.toString().split(":",1)[0];else if(r.hostname)o=r.hostname;else return;return o.toLowerCase()}}(lo)),lo}var rs;function Uu(){return rs||(rs=1,function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NextURL",{enumerable:!0,get:function(){return l}});const r=km(),n=Yu(),o=Tm(),a=el(),i=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function s(d,u){return new URL(String(d).replace(i,"localhost"),u&&String(u).replace(i,"localhost"))}const c=Symbol("NextURLInternal");class l{constructor(u,h,g){let p,y;typeof h=="object"&&"pathname"in h||typeof h=="string"?(p=h,y=g||{}):y=g||h||{},this[c]={url:s(u,p??y.base),options:y,basePath:""},this.analyze()}analyze(){var u,h,g,p,y;const m=(0,a.getNextPathnameInfo)(this[c].url.pathname,{nextConfig:this[c].options.nextConfig,parseData:!t.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE,i18nProvider:this[c].options.i18nProvider}),b=(0,o.getHostname)(this[c].url,this[c].options.headers);this[c].domainLocale=this[c].options.i18nProvider?this[c].options.i18nProvider.detectDomainLocale(b):(0,r.detectDomainLocale)((h=this[c].options.nextConfig)==null||(u=h.i18n)==null?void 0:u.domains,b);const _=((g=this[c].domainLocale)==null?void 0:g.defaultLocale)||((y=this[c].options.nextConfig)==null||(p=y.i18n)==null?void 0:p.defaultLocale);this[c].url.pathname=m.pathname,this[c].defaultLocale=_,this[c].basePath=m.basePath??"",this[c].buildId=m.buildId,this[c].locale=m.locale??_,this[c].trailingSlash=m.trailingSlash}formatPathname(){return(0,n.formatNextPathnameInfo)({basePath:this[c].basePath,buildId:this[c].buildId,defaultLocale:this[c].options.forceLocale?void 0:this[c].defaultLocale,locale:this[c].locale,pathname:this[c].url.pathname,trailingSlash:this[c].trailingSlash})}formatSearch(){return this[c].url.search}get buildId(){return this[c].buildId}set buildId(u){this[c].buildId=u}get locale(){return this[c].locale??""}set locale(u){var h,g;if(!this[c].locale||!(!((g=this[c].options.nextConfig)==null||(h=g.i18n)==null)&&h.locales.includes(u)))throw Object.defineProperty(new TypeError(`The NextURL configuration includes no locale "${u}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[c].locale=u}get defaultLocale(){return this[c].defaultLocale}get domainLocale(){return this[c].domainLocale}get searchParams(){return this[c].url.searchParams}get host(){return this[c].url.host}set host(u){this[c].url.host=u}get hostname(){return this[c].url.hostname}set hostname(u){this[c].url.hostname=u}get port(){return this[c].url.port}set port(u){this[c].url.port=u}get protocol(){return this[c].url.protocol}set protocol(u){this[c].url.protocol=u}get href(){const u=this.formatPathname(),h=this.formatSearch();return`${this.protocol}//${this.host}${u}${h}${this.hash}`}set href(u){this[c].url=s(u),this.analyze()}get origin(){return this[c].url.origin}get pathname(){return this[c].url.pathname}set pathname(u){this[c].url.pathname=u}get hash(){return this[c].url.hash}set hash(u){this[c].url.hash=u}get search(){return this[c].url.search}set search(u){this[c].url.search=u}get password(){return this[c].url.password}set password(u){this[c].url.password=u}get username(){return this[c].url.username}set username(u){this[c].url.username=u}get basePath(){return this[c].basePath}set basePath(u){this[c].basePath=u.startsWith("/")?u:`/${u}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new l(String(this),this[c].options)}}}(co)),co}var fo={},ns;function $u(){return ns||(ns=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(c,l){for(var d in l)Object.defineProperty(c,d,{enumerable:!0,get:l[d]})}t(e,{fromNodeOutgoingHttpHeaders:function(){return n},normalizeNextQueryParam:function(){return s},splitCookiesString:function(){return o},toNodeOutgoingHttpHeaders:function(){return a},validateURL:function(){return i}});const r=Vu();function n(c){const l=new Headers;for(let[d,u]of Object.entries(c)){const h=Array.isArray(u)?u:[u];for(let g of h)typeof g>"u"||(typeof g=="number"&&(g=g.toString()),l.append(d,g))}return l}function o(c){var l=[],d=0,u,h,g,p,y;function m(){for(;d<c.length&&/\s/.test(c.charAt(d));)d+=1;return d<c.length}function b(){return h=c.charAt(d),h!=="="&&h!==";"&&h!==","}for(;d<c.length;){for(u=d,y=!1;m();)if(h=c.charAt(d),h===","){for(g=d,d+=1,m(),p=d;d<c.length&&b();)d+=1;d<c.length&&c.charAt(d)==="="?(y=!0,d=p,l.push(c.substring(u,g)),u=d):d=g+1}else d+=1;(!y||d>=c.length)&&l.push(c.substring(u,c.length))}return l}function a(c){const l={},d=[];if(c)for(const[u,h]of c.entries())u.toLowerCase()==="set-cookie"?(d.push(...o(h)),l[u]=d.length===1?d[0]:d):l[u]=h;return l}function i(c){try{return String(new URL(String(c)))}catch(l){throw Object.defineProperty(new Error(`URL is malformed "${String(c)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:l}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}function s(c){const l=[r.NEXT_QUERY_PARAM_PREFIX,r.NEXT_INTERCEPTION_MARKER_PREFIX];for(const d of l)if(c!==d&&c.startsWith(d))return c.substring(d.length);return null}}(fo)),fo}var ho={},os;function Rm(){return os||(os=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(a,i){for(var s in i)Object.defineProperty(a,s,{enumerable:!0,get:i[s]})}t(e,{PageSignatureError:function(){return r},RemovedPageError:function(){return n},RemovedUAError:function(){return o}});class r extends Error{constructor({page:i}){super(`The middleware "${i}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class n extends Error{constructor(){super("The request.page has been deprecated in favour of `URLPattern`.\n  Read more: https://nextjs.org/docs/messages/middleware-request-page\n  ")}}class o extends Error{constructor(){super("The request.ua has been removed in favour of `userAgent` function.\n  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n  ")}}}(ho)),ho}var po={},mo,as;function Du(){if(as)return mo;as=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.prototype.hasOwnProperty,o=(f,A)=>{for(var E in A)e(f,E,{get:A[E],enumerable:!0})},a=(f,A,E,S)=>{if(A&&typeof A=="object"||typeof A=="function")for(let x of r(A))!n.call(f,x)&&x!==E&&e(f,x,{get:()=>A[x],enumerable:!(S=t(A,x))||S.enumerable});return f},i=f=>a(e({},"__esModule",{value:!0}),f),s={};o(s,{RequestCookies:()=>b,ResponseCookies:()=>_,parseCookie:()=>l,parseSetCookie:()=>d,stringifyCookie:()=>c}),mo=i(s);function c(f){var A;const E=["path"in f&&f.path&&`Path=${f.path}`,"expires"in f&&(f.expires||f.expires===0)&&`Expires=${(typeof f.expires=="number"?new Date(f.expires):f.expires).toUTCString()}`,"maxAge"in f&&typeof f.maxAge=="number"&&`Max-Age=${f.maxAge}`,"domain"in f&&f.domain&&`Domain=${f.domain}`,"secure"in f&&f.secure&&"Secure","httpOnly"in f&&f.httpOnly&&"HttpOnly","sameSite"in f&&f.sameSite&&`SameSite=${f.sameSite}`,"partitioned"in f&&f.partitioned&&"Partitioned","priority"in f&&f.priority&&`Priority=${f.priority}`].filter(Boolean),S=`${f.name}=${encodeURIComponent((A=f.value)!=null?A:"")}`;return E.length===0?S:`${S}; ${E.join("; ")}`}function l(f){const A=new Map;for(const E of f.split(/; */)){if(!E)continue;const S=E.indexOf("=");if(S===-1){A.set(E,"true");continue}const[x,I]=[E.slice(0,S),E.slice(S+1)];try{A.set(x,decodeURIComponent(I??"true"))}catch{}}return A}function d(f){if(!f)return;const[[A,E],...S]=l(f),{domain:x,expires:I,httponly:M,maxage:U,path:O,samesite:R,secure:D,partitioned:C,priority:T}=Object.fromEntries(S.map(([B,W])=>[B.toLowerCase().replace(/-/g,""),W])),K={name:A,value:decodeURIComponent(E),domain:x,...I&&{expires:new Date(I)},...M&&{httpOnly:!0},...typeof U=="string"&&{maxAge:Number(U)},path:O,...R&&{sameSite:g(R)},...D&&{secure:!0},...T&&{priority:y(T)},...C&&{partitioned:!0}};return u(K)}function u(f){const A={};for(const E in f)f[E]&&(A[E]=f[E]);return A}var h=["strict","lax","none"];function g(f){return f=f.toLowerCase(),h.includes(f)?f:void 0}var p=["low","medium","high"];function y(f){return f=f.toLowerCase(),p.includes(f)?f:void 0}function m(f){if(!f)return[];var A=[],E=0,S,x,I,M,U;function O(){for(;E<f.length&&/\s/.test(f.charAt(E));)E+=1;return E<f.length}function R(){return x=f.charAt(E),x!=="="&&x!==";"&&x!==","}for(;E<f.length;){for(S=E,U=!1;O();)if(x=f.charAt(E),x===","){for(I=E,E+=1,O(),M=E;E<f.length&&R();)E+=1;E<f.length&&f.charAt(E)==="="?(U=!0,E=M,A.push(f.substring(S,I)),S=E):E=I+1}else E+=1;(!U||E>=f.length)&&A.push(f.substring(S,f.length))}return A}var b=class{constructor(f){this._parsed=new Map,this._headers=f;const A=f.get("cookie");if(A){const E=l(A);for(const[S,x]of E)this._parsed.set(S,{name:S,value:x})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...f){const A=typeof f[0]=="string"?f[0]:f[0].name;return this._parsed.get(A)}getAll(...f){var A;const E=Array.from(this._parsed);if(!f.length)return E.map(([x,I])=>I);const S=typeof f[0]=="string"?f[0]:(A=f[0])==null?void 0:A.name;return E.filter(([x])=>x===S).map(([x,I])=>I)}has(f){return this._parsed.has(f)}set(...f){const[A,E]=f.length===1?[f[0].name,f[0].value]:f,S=this._parsed;return S.set(A,{name:A,value:E}),this._headers.set("cookie",Array.from(S).map(([x,I])=>c(I)).join("; ")),this}delete(f){const A=this._parsed,E=Array.isArray(f)?f.map(S=>A.delete(S)):A.delete(f);return this._headers.set("cookie",Array.from(A).map(([S,x])=>c(x)).join("; ")),E}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(f=>`${f.name}=${encodeURIComponent(f.value)}`).join("; ")}},_=class{constructor(f){this._parsed=new Map;var A,E,S;this._headers=f;const x=(S=(E=(A=f.getSetCookie)==null?void 0:A.call(f))!=null?E:f.get("set-cookie"))!=null?S:[],I=Array.isArray(x)?x:m(x);for(const M of I){const U=d(M);U&&this._parsed.set(U.name,U)}}get(...f){const A=typeof f[0]=="string"?f[0]:f[0].name;return this._parsed.get(A)}getAll(...f){var A;const E=Array.from(this._parsed.values());if(!f.length)return E;const S=typeof f[0]=="string"?f[0]:(A=f[0])==null?void 0:A.name;return E.filter(x=>x.name===S)}has(f){return this._parsed.has(f)}set(...f){const[A,E,S]=f.length===1?[f[0].name,f[0].value,f[0]]:f,x=this._parsed;return x.set(A,w({name:A,value:E,...S})),v(x,this._headers),this}delete(...f){const[A,E]=typeof f[0]=="string"?[f[0]]:[f[0].name,f[0]];return this.set({...E,name:A,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(c).join("; ")}};function v(f,A){A.delete("set-cookie");for(const[,E]of f){const S=c(E);A.append("set-cookie",S)}}function w(f={name:"",value:""}){return typeof f.expires=="number"&&(f.expires=new Date(f.expires)),f.maxAge&&(f.expires=new Date(Date.now()+f.maxAge*1e3)),(f.path===null||f.path===void 0)&&(f.path="/"),f}return mo}var is;function ua(){return is||(is=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(n,o){for(var a in o)Object.defineProperty(n,a,{enumerable:!0,get:o[a]})}t(e,{RequestCookies:function(){return r.RequestCookies},ResponseCookies:function(){return r.ResponseCookies},stringifyCookie:function(){return r.stringifyCookie}});const r=Du()}(po)),po}var ss;function Cm(){return ss||(ss=1,function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0});function r(l,d){for(var u in d)Object.defineProperty(l,u,{enumerable:!0,get:d[u]})}r(e,{INTERNALS:function(){return s},NextRequest:function(){return c}});const n=Uu(),o=$u(),a=Rm(),i=ua(),s=Symbol("internal request");class c extends Request{constructor(d,u={}){const h=typeof d!="string"&&"url"in d?d.url:String(d);(0,o.validateURL)(h),u.body&&u.duplex!=="half"&&(u.duplex="half"),d instanceof Request?super(d,u):super(h,u);const g=new n.NextURL(h,{headers:(0,o.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:u.nextConfig});this[s]={cookies:new i.RequestCookies(this.headers),nextUrl:g,url:t.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE?h:g.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[s].cookies}get nextUrl(){return this[s].nextUrl}get page(){throw new a.RemovedPageError}get ua(){throw new a.RemovedUAError}get url(){return this[s].url}}}(so)),so}var yo={},go={},cs;function Nu(){return cs||(cs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ReflectAdapter",{enumerable:!0,get:function(){return t}});class t{static get(n,o,a){const i=Reflect.get(n,o,a);return typeof i=="function"?i.bind(n):i}static set(n,o,a,i){return Reflect.set(n,o,a,i)}static has(n,o){return Reflect.has(n,o)}static deleteProperty(n,o){return Reflect.deleteProperty(n,o)}}}(go)),go}var us;function Pm(){return us||(us=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NextResponse",{enumerable:!0,get:function(){return l}});const t=ua(),r=Uu(),n=$u(),o=Nu(),a=ua(),i=Symbol("internal response"),s=new Set([301,302,303,307,308]);function c(d,u){var h;if(!(d==null||(h=d.request)==null)&&h.headers){if(!(d.request.headers instanceof Headers))throw Object.defineProperty(new Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});const g=[];for(const[p,y]of d.request.headers)u.set("x-middleware-request-"+p,y),g.push(p);u.set("x-middleware-override-headers",g.join(","))}}class l extends Response{constructor(u,h={}){super(u,h);const g=this.headers,p=new a.ResponseCookies(g),y=new Proxy(p,{get(m,b,_){switch(b){case"delete":case"set":return(...v)=>{const w=Reflect.apply(m[b],m,v),f=new Headers(g);return w instanceof a.ResponseCookies&&g.set("x-middleware-set-cookie",w.getAll().map(A=>(0,t.stringifyCookie)(A)).join(",")),c(h,f),w};default:return o.ReflectAdapter.get(m,b,_)}}});this[i]={cookies:y,url:h.url?new r.NextURL(h.url,{headers:(0,n.toNodeOutgoingHttpHeaders)(g),nextConfig:h.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[i].cookies}static json(u,h){const g=Response.json(u,h);return new l(g.body,g)}static redirect(u,h){const g=typeof h=="number"?h:(h==null?void 0:h.status)??307;if(!s.has(g))throw Object.defineProperty(new RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});const p=typeof h=="object"?h:{},y=new Headers(p==null?void 0:p.headers);return y.set("Location",(0,n.validateURL)(u)),new l(null,{...p,headers:y,status:g})}static rewrite(u,h){const g=new Headers(h==null?void 0:h.headers);return g.set("x-middleware-rewrite",(0,n.validateURL)(u)),c(h,g),new l(null,{...h,headers:g})}static next(u){const h=new Headers(u==null?void 0:u.headers);return h.set("x-middleware-next","1"),c(u,h),new l(null,{...u,headers:h})}}}(yo)),yo}var bo={},ls;function Om(){return ls||(ls=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ImageResponse",{enumerable:!0,get:function(){return t}});function t(){throw Object.defineProperty(new Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}}(bo)),bo}var wo={},_o={exports:{}},ds;function Im(){return ds||(ds=1,(()=>{var e={226:function(o,a){(function(i,s){var c="1.0.35",l="",d="?",u="function",h="undefined",g="object",p="string",y="major",m="model",b="name",_="type",v="vendor",w="version",f="architecture",A="console",E="mobile",S="tablet",x="smarttv",I="wearable",M="embedded",U=350,O="Amazon",R="Apple",D="ASUS",C="BlackBerry",T="Browser",K="Chrome",B="Edge",W="Firefox",J="Google",V="Huawei",F="LG",Z="Microsoft",ee="Motorola",X="Opera",oe="Samsung",de="Sharp",ke="Sony",pe="Xiaomi",ge="Zebra",_e="Facebook",ht="Chromium OS",Kt="Mac OS",gr=function(z,te){var q={};for(var ne in z)te[ne]&&te[ne].length%2===0?q[ne]=te[ne].concat(z[ne]):q[ne]=z[ne];return q},xt=function(z){for(var te={},q=0;q<z.length;q++)te[z[q].toUpperCase()]=z[q];return te},Ke=function(z,te){return typeof z===p?tt(te).indexOf(tt(z))!==-1:!1},tt=function(z){return z.toLowerCase()},wn=function(z){return typeof z===p?z.replace(/[^\d\.]/g,l).split(".")[0]:s},Bt=function(z,te){if(typeof z===p)return z=z.replace(/^\s\s*/,l),typeof te===h?z:z.substring(0,U)},Be=function(z,te){for(var q=0,ne,rt,je,Q,L,Le;q<te.length&&!L;){var _n=te[q],Ka=te[q+1];for(ne=rt=0;ne<_n.length&&!L&&_n[ne];)if(L=_n[ne++].exec(z),L)for(je=0;je<Ka.length;je++)Le=L[++rt],Q=Ka[je],typeof Q===g&&Q.length>0?Q.length===2?typeof Q[1]==u?this[Q[0]]=Q[1].call(this,Le):this[Q[0]]=Q[1]:Q.length===3?typeof Q[1]===u&&!(Q[1].exec&&Q[1].test)?this[Q[0]]=Le?Q[1].call(this,Le,Q[2]):s:this[Q[0]]=Le?Le.replace(Q[1],Q[2]):s:Q.length===4&&(this[Q[0]]=Le?Q[3].call(this,Le.replace(Q[1],Q[2])):s):this[Q]=Le||s;q+=2}},br=function(z,te){for(var q in te)if(typeof te[q]===g&&te[q].length>0){for(var ne=0;ne<te[q].length;ne++)if(Ke(te[q][ne],z))return q===d?s:q}else if(Ke(te[q],z))return q===d?s:q;return z},Ha={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ie={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ue={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[w,[b,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[w,[b,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[b,w],[/opios[\/ ]+([\w\.]+)/i],[w,[b,X+" Mini"]],[/\bopr\/([\w\.]+)/i],[w,[b,X]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[b,w],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[w,[b,"UC"+T]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[w,[b,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[w,[b,"WeChat"]],[/konqueror\/([\w\.]+)/i],[w,[b,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[w,[b,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[w,[b,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[b,/(.+)/,"$1 Secure "+T],w],[/\bfocus\/([\w\.]+)/i],[w,[b,W+" Focus"]],[/\bopt\/([\w\.]+)/i],[w,[b,X+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[w,[b,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[w,[b,"Dolphin"]],[/coast\/([\w\.]+)/i],[w,[b,X+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[w,[b,"MIUI "+T]],[/fxios\/([-\w\.]+)/i],[w,[b,W]],[/\bqihu|(qi?ho?o?|360)browser/i],[[b,"360 "+T]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[b,/(.+)/,"$1 "+T],w],[/(comodo_dragon)\/([\w\.]+)/i],[[b,/_/g," "],w],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[b,w],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[b],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[b,_e],w],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[b,w],[/\bgsa\/([\w\.]+) .*safari\//i],[w,[b,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[w,[b,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[w,[b,K+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[b,K+" WebView"],w],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[w,[b,"Android "+T]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[b,w],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[w,[b,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[w,b],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[b,[w,br,Ha]],[/(webkit|khtml)\/([\w\.]+)/i],[b,w],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[b,"Netscape"],w],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[w,[b,W+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[b,w],[/(cobalt)\/([\w\.]+)/i],[b,[w,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,tt]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,l,tt]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,tt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[m,[v,oe],[_,S]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[m,[v,oe],[_,E]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[m,[v,R],[_,E]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[m,[v,R],[_,S]],[/(macintosh);/i],[m,[v,R]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[m,[v,de],[_,E]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[m,[v,V],[_,S]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[m,[v,V],[_,E]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[m,/_/g," "],[v,pe],[_,E]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[m,/_/g," "],[v,pe],[_,S]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[m,[v,"OPPO"],[_,E]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[m,[v,"Vivo"],[_,E]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[m,[v,"Realme"],[_,E]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[m,[v,ee],[_,E]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[m,[v,ee],[_,S]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[m,[v,F],[_,S]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[m,[v,F],[_,E]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[m,[v,"Lenovo"],[_,S]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[m,/_/g," "],[v,"Nokia"],[_,E]],[/(pixel c)\b/i],[m,[v,J],[_,S]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[m,[v,J],[_,E]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[m,[v,ke],[_,E]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[m,"Xperia Tablet"],[v,ke],[_,S]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[m,[v,"OnePlus"],[_,E]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[m,[v,O],[_,S]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[m,/(.+)/g,"Fire Phone $1"],[v,O],[_,E]],[/(playbook);[-\w\),; ]+(rim)/i],[m,v,[_,S]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[m,[v,C],[_,E]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[m,[v,D],[_,S]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[m,[v,D],[_,E]],[/(nexus 9)/i],[m,[v,"HTC"],[_,S]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[v,[m,/_/g," "],[_,E]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[m,[v,"Acer"],[_,S]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[m,[v,"Meizu"],[_,E]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[v,m,[_,E]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[v,m,[_,S]],[/(surface duo)/i],[m,[v,Z],[_,S]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[m,[v,"Fairphone"],[_,E]],[/(u304aa)/i],[m,[v,"AT&T"],[_,E]],[/\bsie-(\w*)/i],[m,[v,"Siemens"],[_,E]],[/\b(rct\w+) b/i],[m,[v,"RCA"],[_,S]],[/\b(venue[\d ]{2,7}) b/i],[m,[v,"Dell"],[_,S]],[/\b(q(?:mv|ta)\w+) b/i],[m,[v,"Verizon"],[_,S]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[m,[v,"Barnes & Noble"],[_,S]],[/\b(tm\d{3}\w+) b/i],[m,[v,"NuVision"],[_,S]],[/\b(k88) b/i],[m,[v,"ZTE"],[_,S]],[/\b(nx\d{3}j) b/i],[m,[v,"ZTE"],[_,E]],[/\b(gen\d{3}) b.+49h/i],[m,[v,"Swiss"],[_,E]],[/\b(zur\d{3}) b/i],[m,[v,"Swiss"],[_,S]],[/\b((zeki)?tb.*\b) b/i],[m,[v,"Zeki"],[_,S]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[v,"Dragon Touch"],m,[_,S]],[/\b(ns-?\w{0,9}) b/i],[m,[v,"Insignia"],[_,S]],[/\b((nxa|next)-?\w{0,9}) b/i],[m,[v,"NextBook"],[_,S]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[v,"Voice"],m,[_,E]],[/\b(lvtel\-)?(v1[12]) b/i],[[v,"LvTel"],m,[_,E]],[/\b(ph-1) /i],[m,[v,"Essential"],[_,E]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[m,[v,"Envizen"],[_,S]],[/\b(trio[-\w\. ]+) b/i],[m,[v,"MachSpeed"],[_,S]],[/\btu_(1491) b/i],[m,[v,"Rotor"],[_,S]],[/(shield[\w ]+) b/i],[m,[v,"Nvidia"],[_,S]],[/(sprint) (\w+)/i],[v,m,[_,E]],[/(kin\.[onetw]{3})/i],[[m,/\./g," "],[v,Z],[_,E]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[m,[v,ge],[_,S]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[m,[v,ge],[_,E]],[/smart-tv.+(samsung)/i],[v,[_,x]],[/hbbtv.+maple;(\d+)/i],[[m,/^/,"SmartTV"],[v,oe],[_,x]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[v,F],[_,x]],[/(apple) ?tv/i],[v,[m,R+" TV"],[_,x]],[/crkey/i],[[m,K+"cast"],[v,J],[_,x]],[/droid.+aft(\w)( bui|\))/i],[m,[v,O],[_,x]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[m,[v,de],[_,x]],[/(bravia[\w ]+)( bui|\))/i],[m,[v,ke],[_,x]],[/(mitv-\w{5}) bui/i],[m,[v,pe],[_,x]],[/Hbbtv.*(technisat) (.*);/i],[v,m,[_,x]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[v,Bt],[m,Bt],[_,x]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[_,x]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[v,m,[_,A]],[/droid.+; (shield) bui/i],[m,[v,"Nvidia"],[_,A]],[/(playstation [345portablevi]+)/i],[m,[v,ke],[_,A]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[m,[v,Z],[_,A]],[/((pebble))app/i],[v,m,[_,I]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[m,[v,R],[_,I]],[/droid.+; (glass) \d/i],[m,[v,J],[_,I]],[/droid.+; (wt63?0{2,3})\)/i],[m,[v,ge],[_,I]],[/(quest( 2| pro)?)/i],[m,[v,_e],[_,I]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[v,[_,M]],[/(aeobc)\b/i],[m,[v,O],[_,M]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[m,[_,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[m,[_,S]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[_,S]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[_,E]],[/(android[-\w\. ]{0,9});.+buil/i],[m,[v,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[w,[b,B+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[w,[b,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[b,w],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[w,b]],os:[[/microsoft (windows) (vista|xp)/i],[b,w],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[b,[w,br,ie]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[b,"Windows"],[w,br,ie]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[w,/_/g,"."],[b,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[b,Kt],[w,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[w,b],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[b,w],[/\(bb(10);/i],[w,[b,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[w,[b,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[w,[b,W+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[w,[b,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[w,[b,"watchOS"]],[/crkey\/([\d\.]+)/i],[w,[b,K+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[b,ht],w],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[b,w],[/(sunos) ?([\w\.\d]*)/i],[[b,"Solaris"],w],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[b,w]]},me=function(z,te){if(typeof z===g&&(te=z,z=s),!(this instanceof me))return new me(z,te).getResult();var q=typeof i!==h&&i.navigator?i.navigator:s,ne=z||(q&&q.userAgent?q.userAgent:l),rt=q&&q.userAgentData?q.userAgentData:s,je=te?gr(Ue,te):Ue,Q=q&&q.userAgent==ne;return this.getBrowser=function(){var L={};return L[b]=s,L[w]=s,Be.call(L,ne,je.browser),L[y]=wn(L[w]),Q&&q&&q.brave&&typeof q.brave.isBrave==u&&(L[b]="Brave"),L},this.getCPU=function(){var L={};return L[f]=s,Be.call(L,ne,je.cpu),L},this.getDevice=function(){var L={};return L[v]=s,L[m]=s,L[_]=s,Be.call(L,ne,je.device),Q&&!L[_]&&rt&&rt.mobile&&(L[_]=E),Q&&L[m]=="Macintosh"&&q&&typeof q.standalone!==h&&q.maxTouchPoints&&q.maxTouchPoints>2&&(L[m]="iPad",L[_]=S),L},this.getEngine=function(){var L={};return L[b]=s,L[w]=s,Be.call(L,ne,je.engine),L},this.getOS=function(){var L={};return L[b]=s,L[w]=s,Be.call(L,ne,je.os),Q&&!L[b]&&rt&&rt.platform!="Unknown"&&(L[b]=rt.platform.replace(/chrome os/i,ht).replace(/macos/i,Kt)),L},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ne},this.setUA=function(L){return ne=typeof L===p&&L.length>U?Bt(L,U):L,this},this.setUA(ne),this};me.VERSION=c,me.BROWSER=xt([b,w,y]),me.CPU=xt([f]),me.DEVICE=xt([m,v,_,A,E,x,S,I,M]),me.ENGINE=me.OS=xt([b,w]),typeof a!==h?(o.exports&&(a=o.exports=me),a.UAParser=me):typeof i!==h&&(i.UAParser=me);var be=typeof i!==h&&(i.jQuery||i.Zepto);if(be&&!be.ua){var Ne=new me;be.ua=Ne.getResult(),be.ua.get=function(){return Ne.getUA()},be.ua.set=function(z){Ne.setUA(z);var te=Ne.getResult();for(var q in te)be.ua[q]=te[q]}}})(typeof window=="object"?window:this)}},t={};function r(o){var a=t[o];if(a!==void 0)return a.exports;var i=t[o]={exports:{}},s=!0;try{e[o].call(i.exports,i,i.exports,r),s=!1}finally{s&&delete t[o]}return i.exports}typeof r<"u"&&(r.ab=__dirname+"/");var n=r(226);_o.exports=n})()),_o.exports}var fs;function hs(){return fs||(fs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,c){for(var l in c)Object.defineProperty(s,l,{enumerable:!0,get:c[l]})}t(e,{isBot:function(){return o},userAgent:function(){return i},userAgentFromString:function(){return a}});const r=n(Im());function n(s){return s&&s.__esModule?s:{default:s}}function o(s){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(s)}function a(s){return{...(0,r.default)(s),isBot:s===void 0?!1:o(s)}}function i({headers:s}){return a(s.get("user-agent")||void 0)}}(wo)),wo}var vo={},ps;function Um(){return ps||(ps=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"URLPattern",{enumerable:!0,get:function(){return t}});const t=typeof URLPattern>"u"?void 0:URLPattern}(vo)),vo}var Eo={},So={},ms;function $m(){return ms||(ms=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"after",{enumerable:!0,get:function(){return r}});const t=lr();function r(n){const o=t.workAsyncStorage.getStore();if(!o)throw Object.defineProperty(new Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});const{afterContext:a}=o;return a.after(n)}}(So)),So}var ys;function Dm(){return ys||(ys=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),t($m(),e);function t(r,n){return Object.keys(r).forEach(function(o){o!=="default"&&!Object.prototype.hasOwnProperty.call(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:function(){return r[o]}})}),r}}(Eo)),Eo}var Ao={},xo={},ko={},To={},gs;function Nm(){return gs||(gs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"afterTaskAsyncStorageInstance",{enumerable:!0,get:function(){return r}});const r=(0,tl().createAsyncLocalStorage)()}(To)),To}var bs;function jm(){return bs||(bs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"afterTaskAsyncStorage",{enumerable:!0,get:function(){return t.afterTaskAsyncStorageInstance}});const t=Nm()}(ko)),ko}var ws;function ju(){return ws||(ws=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(c,l){for(var d in l)Object.defineProperty(c,d,{enumerable:!0,get:l[d]})}t(e,{isRequestAPICallableInsideAfter:function(){return s},throwForSearchParamsAccessInUseCache:function(){return i},throwWithStaticGenerationBailoutError:function(){return o},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return a}});const r=en(),n=jm();function o(c,l){throw Object.defineProperty(new r.StaticGenBailoutError(`Route ${c} couldn't be rendered statically because it used ${l}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E576",enumerable:!1,configurable:!0})}function a(c,l){throw Object.defineProperty(new r.StaticGenBailoutError(`Route ${c} with \`dynamic = "error"\` couldn't be rendered statically because it used ${l}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function i(c){const l=Object.defineProperty(new Error(`Route ${c.route} used "searchParams" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "searchParams" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E634",enumerable:!1,configurable:!0});throw c.invalidUsageError??(c.invalidUsageError=l),l}function s(){const c=n.afterTaskAsyncStorage.getStore();return(c==null?void 0:c.rootTaskSpawnPhase)==="action"}}(xo)),xo}var _s;function Lm(){return _s||(_s=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"connection",{enumerable:!0,get:function(){return s}});const t=lr(),r=tn(),n=rn(),o=en(),a=fa(),i=ju();function s(){const c=t.workAsyncStorage.getStore(),l=r.workUnitAsyncStorage.getStore();if(c){if(l&&l.phase==="after"&&!(0,i.isRequestAPICallableInsideAfter)())throw Object.defineProperty(new Error(`Route ${c.route} used "connection" inside "after(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but "after(...)" executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E186",enumerable:!1,configurable:!0});if(c.forceStatic)return Promise.resolve(void 0);if(l){if(l.type==="cache")throw Object.defineProperty(new Error(`Route ${c.route} used "connection" inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E111",enumerable:!1,configurable:!0});if(l.type==="unstable-cache")throw Object.defineProperty(new Error(`Route ${c.route} used "connection" inside a function cached with "unstable_cache(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E1",enumerable:!1,configurable:!0})}if(c.dynamicShouldError)throw Object.defineProperty(new o.StaticGenBailoutError(`Route ${c.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E562",enumerable:!1,configurable:!0});if(l){if(l.type==="prerender")return(0,a.makeHangingPromise)(l.renderSignal,"`connection()`");l.type==="prerender-ppr"?(0,n.postponeWithTracking)(c.route,"connection",l.dynamicTracking):l.type==="prerender-legacy"&&(0,n.throwToInterruptStaticGeneration)("connection",c,l)}(0,n.trackDynamicDataInDynamicRender)(c,l)}return Promise.resolve(void 0)}}(Ao)),Ao}var Ro={},Co={},vs;function Mm(){return vs||(vs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"InvariantError",{enumerable:!0,get:function(){return t}});class t extends Error{constructor(n,o){super("Invariant: "+(n.endsWith(".")?n:n+".")+" This is a bug in Next.js.",o),this.name="InvariantError"}}}(Co)),Co}var Po={},Es;function Wm(){return Es||(Es=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(i,s){for(var c in s)Object.defineProperty(i,c,{enumerable:!0,get:s[c]})}t(e,{describeHasCheckingStringProperty:function(){return o},describeStringPropertyAccess:function(){return n},wellKnownProperties:function(){return a}});const r=/^[A-Za-z_$][A-Za-z0-9_$]*$/;function n(i,s){return r.test(s)?"`"+i+"."+s+"`":"`"+i+"["+JSON.stringify(s)+"]`"}function o(i,s){const c=JSON.stringify(s);return"`Reflect.has("+i+", "+c+")`, `"+c+" in "+i+"`, or similar"}const a=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","then","catch","finally","status","displayName","toJSON","$$typeof","__esModule"])}(Po)),Po}var Ss;function qm(){return Ss||(Ss=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"unstable_rootParams",{enumerable:!0,get:function(){return c}});const t=Mm(),r=rn(),n=lr(),o=tn(),a=fa(),i=Wm(),s=new WeakMap;async function c(){const u=n.workAsyncStorage.getStore();if(!u)throw Object.defineProperty(new t.InvariantError("Missing workStore in unstable_rootParams"),"__NEXT_ERROR_CODE",{value:"E615",enumerable:!1,configurable:!0});const h=o.workUnitAsyncStorage.getStore();if(!h)throw Object.defineProperty(new Error(`Route ${u.route} used \`unstable_rootParams()\` in Pages Router. This API is only available within App Router.`),"__NEXT_ERROR_CODE",{value:"E641",enumerable:!1,configurable:!0});switch(h.type){case"unstable-cache":case"cache":throw Object.defineProperty(new Error(`Route ${u.route} used \`unstable_rootParams()\` inside \`"use cache"\` or \`unstable_cache\`. Support for this API inside cache scopes is planned for a future version of Next.js.`),"__NEXT_ERROR_CODE",{value:"E642",enumerable:!1,configurable:!0});case"prerender":case"prerender-ppr":case"prerender-legacy":return l(h.rootParams,u,h);default:return Promise.resolve(h.rootParams)}}function l(u,h,g){const p=h.fallbackRouteParams;if(p){let y=!1;for(const m in u)if(p.has(m)){y=!0;break}if(y){if(g.type==="prerender"){const m=s.get(u);if(m)return m;const b=(0,a.makeHangingPromise)(g.renderSignal,"`unstable_rootParams`");return s.set(u,b),b}return d(u,p,h,g)}}return Promise.resolve(u)}function d(u,h,g,p){const y=s.get(u);if(y)return y;const m={...u},b=Promise.resolve(m);return s.set(u,b),Object.keys(u).forEach(_=>{i.wellKnownProperties.has(_)||(h.has(_)?Object.defineProperty(m,_,{get(){const v=(0,i.describeStringPropertyAccess)("unstable_rootParams",_);p.type==="prerender-ppr"?(0,r.postponeWithTracking)(g.route,v,p.dynamicTracking):(0,r.throwToInterruptStaticGeneration)(v,g,p)},enumerable:!0}):b[_]=u[_])}),b}}(Ro)),Ro}var As;function Hm(){return As||(As=1,function(e,t){const r={NextRequest:Cm().NextRequest,NextResponse:Pm().NextResponse,ImageResponse:Om().ImageResponse,userAgentFromString:hs().userAgentFromString,userAgent:hs().userAgent,URLPattern:Um().URLPattern,after:Dm().after,connection:Lm().connection,unstable_rootParams:qm().unstable_rootParams};e.exports=r,t.NextRequest=r.NextRequest,t.NextResponse=r.NextResponse,t.ImageResponse=r.ImageResponse,t.userAgentFromString=r.userAgentFromString,t.userAgent=r.userAgent,t.URLPattern=r.URLPattern,t.after=r.after,t.connection=r.connection,t.unstable_rootParams=r.unstable_rootParams}(Pr,Pr.exports)),Pr.exports}var jr=Hm(),bt={};function la(e){const t=bt.AUTH_URL??bt.NEXTAUTH_URL;if(!t)return e;const{origin:r}=new URL(t),{href:n,origin:o}=e.nextUrl;return new jr.NextRequest(n.replace(o,r),e)}function kt(e){try{e.secret??(e.secret=bt.AUTH_SECRET??bt.NEXTAUTH_SECRET);const t=bt.AUTH_URL??bt.NEXTAUTH_URL;if(!t)return;const{pathname:r}=new URL(t);if(r==="/")return;e.basePath||(e.basePath=r)}catch{}finally{e.basePath||(e.basePath="/api/auth"),xm(bt,e,!0)}}var Oo={},Io={},xs;function Lu(){return xs||(xs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return s}});const t=n(At());function r(c){if(typeof WeakMap!="function")return null;var l=new WeakMap,d=new WeakMap;return(r=function(u){return u?d:l})(c)}function n(c,l){if(c&&c.__esModule)return c;if(c===null||typeof c!="object"&&typeof c!="function")return{default:c};var d=r(l);if(d&&d.has(c))return d.get(c);var u={__proto__:null},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in c)if(g!=="default"&&Object.prototype.hasOwnProperty.call(c,g)){var p=h?Object.getOwnPropertyDescriptor(c,g):null;p&&(p.get||p.set)?Object.defineProperty(u,g,p):u[g]=c[g]}return u.default=c,d&&d.set(c,u),u}const o={current:null},a=typeof t.cache=="function"?t.cache:c=>c,i=console.warn;a(c=>{try{i(o.current)}finally{o.current=null}});function s(c){return function(...d){const u=c(...d);i(u)}}}(Io)),Io}var ks;function Km(){return ks||(ks=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"draftMode",{enumerable:!0,get:function(){return s}});const t=tn(),r=lr(),n=rn(),o=Lu(),a=en(),i=rl();function s(){const p="draftMode",y=r.workAsyncStorage.getStore(),m=t.workUnitAsyncStorage.getStore();switch((!y||!m)&&(0,t.throwForMissingRequestStore)(p),m.type){case"request":return c(m.draftMode);case"cache":case"unstable-cache":const b=(0,t.getDraftModeProviderForCacheScope)(y,m);if(b)return c(b);case"prerender":case"prerender-ppr":case"prerender-legacy":return d(null);default:return m}}function c(p,y){const m=l.get(s);if(m)return m;let b;return b=d(p),l.set(p,b),b}const l=new WeakMap;function d(p){const y=new u(p),m=Promise.resolve(y);return Object.defineProperty(m,"isEnabled",{get(){return y.isEnabled},set(b){Object.defineProperty(m,"isEnabled",{value:b,writable:!0,enumerable:!0})},enumerable:!0,configurable:!0}),m.enable=y.enable.bind(y),m.disable=y.disable.bind(y),m}class u{constructor(y){this._provider=y}get isEnabled(){return this._provider!==null?this._provider.isEnabled:!1}enable(){g("draftMode().enable()"),this._provider!==null&&this._provider.enable()}disable(){g("draftMode().disable()"),this._provider!==null&&this._provider.disable()}}(0,o.createDedupedByCallsiteServerErrorLoggerDev)(h);function h(p,y){const m=p?`Route "${p}" `:"This route ";return Object.defineProperty(new Error(`${m}used ${y}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E377",enumerable:!1,configurable:!0})}function g(p){const y=r.workAsyncStorage.getStore(),m=t.workUnitAsyncStorage.getStore();if(y){if(m){if(m.type==="cache")throw Object.defineProperty(new Error(`Route ${y.route} used "${p}" inside "use cache". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E246",enumerable:!1,configurable:!0});if(m.type==="unstable-cache")throw Object.defineProperty(new Error(`Route ${y.route} used "${p}" inside a function cached with "unstable_cache(...)". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E259",enumerable:!1,configurable:!0});if(m.phase==="after")throw Object.defineProperty(new Error(`Route ${y.route} used "${p}" inside \`after\`. The enabled status of draftMode can be read inside \`after\` but you cannot enable or disable draftMode. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E348",enumerable:!1,configurable:!0})}if(y.dynamicShouldError)throw Object.defineProperty(new a.StaticGenBailoutError(`Route ${y.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${p}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(m){if(m.type==="prerender"){const b=Object.defineProperty(new Error(`Route ${y.route} used ${p} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});(0,n.abortAndThrowOnSynchronousRequestDataAccess)(y.route,p,b,m)}else if(m.type==="prerender-ppr")(0,n.postponeWithTracking)(y.route,p,m.dynamicTracking);else if(m.type==="prerender-legacy"){m.revalidate=0;const b=Object.defineProperty(new i.DynamicServerError(`Route ${y.route} couldn't be rendered statically because it used \`${p}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw y.dynamicUsageDescription=p,y.dynamicUsageStack=b.stack,b}}}}}(Oo)),Oo}var Bm=Km(),Uo={},$o={},Ts;function Mu(){return Ts||(Ts=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(a,i){for(var s in i)Object.defineProperty(a,s,{enumerable:!0,get:i[s]})}t(e,{HeadersAdapter:function(){return o},ReadonlyHeadersError:function(){return n}});const r=Nu();class n extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new n}}class o extends Headers{constructor(i){super(),this.headers=new Proxy(i,{get(s,c,l){if(typeof c=="symbol")return r.ReflectAdapter.get(s,c,l);const d=c.toLowerCase(),u=Object.keys(i).find(h=>h.toLowerCase()===d);if(!(typeof u>"u"))return r.ReflectAdapter.get(s,u,l)},set(s,c,l,d){if(typeof c=="symbol")return r.ReflectAdapter.set(s,c,l,d);const u=c.toLowerCase(),h=Object.keys(i).find(g=>g.toLowerCase()===u);return r.ReflectAdapter.set(s,h??c,l,d)},has(s,c){if(typeof c=="symbol")return r.ReflectAdapter.has(s,c);const l=c.toLowerCase(),d=Object.keys(i).find(u=>u.toLowerCase()===l);return typeof d>"u"?!1:r.ReflectAdapter.has(s,d)},deleteProperty(s,c){if(typeof c=="symbol")return r.ReflectAdapter.deleteProperty(s,c);const l=c.toLowerCase(),d=Object.keys(i).find(u=>u.toLowerCase()===l);return typeof d>"u"?!0:r.ReflectAdapter.deleteProperty(s,d)}})}static seal(i){return new Proxy(i,{get(s,c,l){switch(c){case"append":case"delete":case"set":return n.callable;default:return r.ReflectAdapter.get(s,c,l)}}})}merge(i){return Array.isArray(i)?i.join(", "):i}static from(i){return i instanceof Headers?i:new o(i)}append(i,s){const c=this.headers[i];typeof c=="string"?this.headers[i]=[c,s]:Array.isArray(c)?c.push(s):this.headers[i]=s}delete(i){delete this.headers[i]}get(i){const s=this.headers[i];return typeof s<"u"?this.merge(s):null}has(i){return typeof this.headers[i]<"u"}set(i,s){this.headers[i]=s}forEach(i,s){for(const[c,l]of this.entries())i.call(s,l,c,this)}*entries(){for(const i of Object.keys(this.headers)){const s=i.toLowerCase(),c=this.get(s);yield[s,c]}}*keys(){for(const i of Object.keys(this.headers))yield i.toLowerCase()}*values(){for(const i of Object.keys(this.headers))yield this.get(i)}[Symbol.iterator](){return this.entries()}}}($o)),$o}var Rs;function zm(){return Rs||(Rs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"headers",{enumerable:!0,get:function(){return l}});const t=Mu(),r=lr(),n=tn(),o=rn(),a=en(),i=fa(),s=Lu();nl();const c=ju();function l(){const y=r.workAsyncStorage.getStore(),m=n.workUnitAsyncStorage.getStore();if(y){if(m&&m.phase==="after"&&!(0,c.isRequestAPICallableInsideAfter)())throw Object.defineProperty(new Error(`Route ${y.route} used "headers" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "headers" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E367",enumerable:!1,configurable:!0});if(y.forceStatic){const _=t.HeadersAdapter.seal(new Headers({}));return h(_)}if(m){if(m.type==="cache")throw Object.defineProperty(new Error(`Route ${y.route} used "headers" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E304",enumerable:!1,configurable:!0});if(m.type==="unstable-cache")throw Object.defineProperty(new Error(`Route ${y.route} used "headers" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E127",enumerable:!1,configurable:!0})}if(y.dynamicShouldError)throw Object.defineProperty(new a.StaticGenBailoutError(`Route ${y.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E525",enumerable:!1,configurable:!0});if(m){if(m.type==="prerender")return u(y.route,m);m.type==="prerender-ppr"?(0,o.postponeWithTracking)(y.route,"headers",m.dynamicTracking):m.type==="prerender-legacy"&&(0,o.throwToInterruptStaticGeneration)("headers",y,m)}(0,o.trackDynamicDataInDynamicRender)(y,m)}const b=(0,n.getExpectedRequestStore)("headers");return h(b.headers)}const d=new WeakMap;function u(y,m){const b=d.get(m);if(b)return b;const _=(0,i.makeHangingPromise)(m.renderSignal,"`headers()`");return d.set(m,_),Object.defineProperties(_,{append:{value:function(){const w=`\`headers().append(${g(arguments[0])}, ...)\``,f=p(y,w);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(y,w,f,m)}},delete:{value:function(){const w=`\`headers().delete(${g(arguments[0])})\``,f=p(y,w);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(y,w,f,m)}},get:{value:function(){const w=`\`headers().get(${g(arguments[0])})\``,f=p(y,w);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(y,w,f,m)}},has:{value:function(){const w=`\`headers().has(${g(arguments[0])})\``,f=p(y,w);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(y,w,f,m)}},set:{value:function(){const w=`\`headers().set(${g(arguments[0])}, ...)\``,f=p(y,w);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(y,w,f,m)}},getSetCookie:{value:function(){const w="`headers().getSetCookie()`",f=p(y,w);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(y,w,f,m)}},forEach:{value:function(){const w="`headers().forEach(...)`",f=p(y,w);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(y,w,f,m)}},keys:{value:function(){const w="`headers().keys()`",f=p(y,w);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(y,w,f,m)}},values:{value:function(){const w="`headers().values()`",f=p(y,w);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(y,w,f,m)}},entries:{value:function(){const w="`headers().entries()`",f=p(y,w);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(y,w,f,m)}},[Symbol.iterator]:{value:function(){const v="`headers()[Symbol.iterator]()`",w=p(y,v);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(y,v,w,m)}}}),_}function h(y){const m=d.get(y);if(m)return m;const b=Promise.resolve(y);return d.set(y,b),Object.defineProperties(b,{append:{value:y.append.bind(y)},delete:{value:y.delete.bind(y)},get:{value:y.get.bind(y)},has:{value:y.has.bind(y)},set:{value:y.set.bind(y)},getSetCookie:{value:y.getSetCookie.bind(y)},forEach:{value:y.forEach.bind(y)},keys:{value:y.keys.bind(y)},values:{value:y.values.bind(y)},entries:{value:y.entries.bind(y)},[Symbol.iterator]:{value:y[Symbol.iterator].bind(y)}}),b}function g(y){return typeof y=="string"?`'${y}'`:"..."}(0,s.createDedupedByCallsiteServerErrorLoggerDev)(p);function p(y,m){const b=y?`Route "${y}" `:"This route ";return Object.defineProperty(new Error(`${b}used ${m}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E277",enumerable:!1,configurable:!0})}}(Uo)),Uo}var Jm=zm(),Fm=Mu(),Gm=Du(),Wu=class extends Fm.HeadersAdapter{constructor(){super({}),this.append=we(super.append.bind(this)).mockName("next/headers::headers().append"),this.delete=we(super.delete.bind(this)).mockName("next/headers::headers().delete"),this.get=we(super.get.bind(this)).mockName("next/headers::headers().get"),this.has=we(super.has.bind(this)).mockName("next/headers::headers().has"),this.set=we(super.set.bind(this)).mockName("next/headers::headers().set"),this.forEach=we(super.forEach.bind(this)).mockName("next/headers::headers().forEach"),this.entries=we(super.entries.bind(this)).mockName("next/headers::headers().entries"),this.keys=we(super.keys.bind(this)).mockName("next/headers::headers().keys"),this.values=we(super.values.bind(this)).mockName("next/headers::headers().values")}},Lr,Ye=()=>(Lr||(Lr=new Wu),Lr);Ye.mockRestore=()=>{Lr=new Wu};var qu=class extends Gm.RequestCookies{constructor(){super(...arguments),this.get=we(super.get.bind(this)).mockName("next/headers::cookies().get"),this.getAll=we(super.getAll.bind(this)).mockName("next/headers::cookies().getAll"),this.has=we(super.has.bind(this)).mockName("next/headers::cookies().has"),this.set=we(super.set.bind(this)).mockName("next/headers::cookies().set"),this.delete=we(super.delete.bind(this)).mockName("next/headers::cookies().delete")}},Mr,yr=we(()=>(Mr||(Mr=new qu(Ye())),Mr)).mockName("next/headers::cookies()"),Vm=yr.mockRestore.bind(null);yr.mockRestore=()=>{Vm(),Ye.mockRestore(),Mr=new qu(Ye())};we(Bm.draftMode??Jm.draftMode).mockName("draftMode");var Xm={};async function Xt(e,t){const r=bn("session",e.get("x-forwarded-proto"),e,Xm,t),n=new Request(r,{headers:{cookie:e.get("cookie")??""}});return Mt(n,{...t,callbacks:{...t.callbacks,async session(...o){var s,c,l,d;const a=await((c=(s=t.callbacks)==null?void 0:s.session)==null?void 0:c.call(s,...o))??{...o[0].session,expires:((d=(l=o[0].session.expires)==null?void 0:l.toISOString)==null?void 0:d.call(l))??o[0].session.expires};return{user:o[0].user??o[0].token,...a}}}})}function Cs(e){return typeof e=="function"}function Ps(e,t){return typeof e=="function"?async(...r)=>{if(!r.length){const i=await Ye(),s=await e(void 0);return t==null||t(s),Xt(i,s).then(c=>c.json())}if(r[0]instanceof Request){const i=r[0],s=r[1],c=await e(i);return t==null||t(c),Or([i,s],c)}if(Cs(r[0])){const i=r[0];return async(...s)=>{const c=await e(s[0]);return t==null||t(c),Or(s,c,i)}}const n="req"in r[0]?r[0].req:r[0],o="res"in r[0]?r[0].res:r[1],a=await e(n);return t==null||t(a),Xt(new Headers(n.headers),a).then(async i=>{const s=await i.json();for(const c of i.headers.getSetCookie())"headers"in o?o.headers.append("set-cookie",c):o.appendHeader("set-cookie",c);return s})}:(...r)=>{if(!r.length)return Promise.resolve(Ye()).then(a=>Xt(a,e).then(i=>i.json()));if(r[0]instanceof Request){const a=r[0],i=r[1];return Or([a,i],e)}if(Cs(r[0])){const a=r[0];return async(...i)=>Or(i,e,a).then(s=>s)}const n="req"in r[0]?r[0].req:r[0],o="res"in r[0]?r[0].res:r[1];return Xt(new Headers(n.headers),e).then(async a=>{const i=await a.json();for(const s of a.headers.getSetCookie())"headers"in o?o.headers.append("set-cookie",s):o.appendHeader("set-cookie",s);return i})}}async function Or(e,t,r){var l,d,u,h;const n=la(e[0]),o=await Xt(n.headers,t),a=await o.json();let i=!0;(l=t.callbacks)!=null&&l.authorized&&(i=await t.callbacks.authorized({request:n,auth:a}));let s=(u=(d=jr.NextResponse).next)==null?void 0:u.call(d);if(i instanceof Response){s=i;const g=i.headers.get("Location"),{pathname:p}=n.nextUrl;g&&Zm(p,new URL(g).pathname,t)&&(i=!0)}else if(r){const g=n;g.auth=a,s=await r(g,e[1])??jr.NextResponse.next()}else if(!i){const g=((h=t.pages)==null?void 0:h.signIn)??`${t.basePath}/signin`;if(n.nextUrl.pathname!==g){const p=n.nextUrl.clone();p.pathname=g,p.searchParams.set("callbackUrl",n.nextUrl.href),s=jr.NextResponse.redirect(p)}}const c=new Response(s==null?void 0:s.body,s);for(const g of o.headers.getSetCookie())c.headers.append("set-cookie",g);return c}function Zm(e,t,r){const n=t.replace(`${e}/`,""),o=Object.values(r.pages??{});return(Qm.has(n)||o.includes(t))&&t===e}const Qm=new Set(["providers","session","csrf","signin","signout","callback","verify-request","error"]);var Wa={};async function Os(e,t={},r,n){const o=new Headers(await Ye()),{redirect:a=!0,redirectTo:i,...s}=t instanceof FormData?Object.fromEntries(t):t,c=(i==null?void 0:i.toString())??o.get("Referer")??"/",l=bn("signin",o.get("x-forwarded-proto"),o,Wa,n);if(!e)return l.searchParams.append("callbackUrl",c),a&&Dr(l.toString()),l.toString();let d=`${l}/${e}?${new URLSearchParams(r)}`,u={};for(const _ of n.providers){const{options:v,...w}=typeof _=="function"?_():_,f=(v==null?void 0:v.id)??w.id;if(f===e){u={id:f,type:(v==null?void 0:v.type)??w.type};break}}if(!u.id){const _=`${l}?${new URLSearchParams({callbackUrl:c})}`;return a&&Dr(_),_}u.type==="credentials"&&(d=d.replace("signin","callback")),o.set("Content-Type","application/x-www-form-urlencoded");const h=new URLSearchParams({...s,callbackUrl:c}),g=new Request(d,{method:"POST",headers:o,body:h}),p=await Mt(g,{...n,raw:ln,skipCSRFCheck:un}),y=await yr();for(const _ of(p==null?void 0:p.cookies)??[])y.set(_.name,_.value,_.options);const b=(p instanceof Response?p.headers.get("Location"):p.redirect)??d;return a?Dr(b):b}async function Is(e,t){const r=new Headers(await Ye());r.set("Content-Type","application/x-www-form-urlencoded");const n=bn("signout",r.get("x-forwarded-proto"),r,Wa,t),o=(e==null?void 0:e.redirectTo)??r.get("Referer")??"/",a=new URLSearchParams({callbackUrl:o}),i=new Request(n,{method:"POST",headers:r,body:a}),s=await Mt(i,{...t,raw:ln,skipCSRFCheck:un}),c=await yr();for(const l of(s==null?void 0:s.cookies)??[])c.set(l.name,l.value,l.options);return(e==null?void 0:e.redirect)??!0?Dr(s.redirect):s}async function Us(e,t){const r=new Headers(await Ye());r.set("Content-Type","application/json");const n=bn("session",r.get("x-forwarded-proto"),r,Wa,t),o=JSON.stringify({data:e}),a=new Request(n,{method:"POST",headers:r,body:o}),i=await Mt(a,{...t,raw:ln,skipCSRFCheck:un}),s=await yr();for(const c of(i==null?void 0:i.cookies)??[])s.set(c.name,c.value,c.options);return i.body}function Ym(e){if(typeof e=="function"){const r=async n=>{const o=await e(n);return kt(o),Mt(la(n),o)};return{handlers:{GET:r,POST:r},auth:Ps(e,n=>kt(n)),signIn:async(n,o,a)=>{const i=await e(void 0);return kt(i),Os(n,o,a,i)},signOut:async n=>{const o=await e(void 0);return kt(o),Is(n,o)},unstable_update:async n=>{const o=await e(void 0);return kt(o),Us(n,o)}}}kt(e);const t=r=>Mt(la(r),e);return{handlers:{GET:t,POST:t},auth:Ps(e),signIn:(r,n,o)=>Os(r,n,o,e),signOut:r=>Is(r,e),unstable_update:r=>Us(r,e)}}function ey(e){return{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:e}}function ty(e){return{id:"kakao",name:"Kakao",type:"oauth",authorization:"https://kauth.kakao.com/oauth/authorize?scope",token:"https://kauth.kakao.com/oauth/token",userinfo:"https://kapi.kakao.com/v2/user/me",client:{token_endpoint_auth_method:"client_secret_post"},profile(t){var r,n,o,a,i;return{id:t.id.toString(),name:(n=(r=t.kakao_account)==null?void 0:r.profile)==null?void 0:n.nickname,email:(o=t.kakao_account)==null?void 0:o.email,image:(i=(a=t.kakao_account)==null?void 0:a.profile)==null?void 0:i.profile_image_url}},options:e}}class Zt extends Error{}Zt.prototype.name="InvalidTokenError";function ry(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function ny(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return ry(t)}catch{return atob(t)}}function oy(e,t){if(typeof e!="string")throw new Zt("Invalid token specified: must be a string");t||(t={});const r=t.header===!0?0:1,n=e.split(".")[r];if(typeof n!="string")throw new Zt(`Invalid token specified: missing part #${r+1}`);let o;try{o=ny(n)}catch(a){throw new Zt(`Invalid token specified: invalid base64 for part #${r+1} (${a.message})`)}try{return JSON.parse(o)}catch(a){throw new Zt(`Invalid token specified: invalid json for part #${r+1} (${a.message})`)}}function $s(e){try{const t=oy(e);return t.exp?t.exp*1e3:null}catch{return null}}const Qt=qo.create({prefixUrl:"https://www.dev.mokkoji.p-e.kr/api/dev"});var Do={};const{auth:Ds,handlers:Ry,signIn:Cy,signOut:Py}=Ym({secret:Do.NEXTAUTH_SECRET,trustHost:!0,pages:{error:"/login?callbackUrl=/"},providers:[ty({clientId:Do.KAKAO_CLIENT_ID,clientSecret:Do.KAKAO_SECRET_KEY}),ey({name:"credentials",credentials:{studentId:{label:"학번",type:"text"},password:{label:"비밀번호",type:"password"}},async authorize(e){try{const r=await(await Qt.post("users/auth/login",{json:e})).json(),o=await(await Qt.get("users",{headers:{Authorization:`Bearer ${r.data.accessToken}`}})).json();return{accessToken:r.data.accessToken,refreshToken:r.data.refreshToken,user:o.data.user}}catch{return null}}})],callbacks:{jwt:async({token:e,account:t,user:r})=>{if((t==null?void 0:t.provider)==="kakao")return{...e,accessToken:t.access_token,refreshToken:t.refresh_token};if(r&&(t==null?void 0:t.provider)==="credentials"){const n=$s(r.accessToken);try{const o={Authorization:`Bearer ${r.accessToken}`},i=await(await Qt.get("users/roles",{headers:o})).json();return{accessToken:r.accessToken,refreshToken:r.refreshToken,expiresAt:n,user:r.user,role:i.data.role}}catch{return{accessToken:r.accessToken,refreshToken:r.refreshToken,expiresAt:n,user:r.user}}}if(Date.now()>e.expiresAt-600*1e3)try{const o=await(await Qt.post("users/auth/refresh",{headers:{Authorization:`Bearer ${e.refreshToken}`}})).json();return{...e,accessToken:o.data.accessToken,expiresAt:$s(o.data.accessToken)}}catch{return null}return e},session:async({session:e,token:t})=>({expiresAt:t.expiresAt,user:t.user,role:t.role,accessToken:t.accessToken,refreshToken:t.refreshToken}),redirect:async({url:e,baseUrl:t})=>{if(e.startsWith("/"))return`${t}${e}`;if(e){const{search:r,origin:n}=new URL(e),o=new URLSearchParams(r).get("callbackUrl");if(o)return o.startsWith("/")?`${t}${o}`:o;if(n===t)return e}return t}}});async function Hu(){return qo.create({prefixUrl:"https://www.dev.mokkoji.p-e.kr/api/dev",hooks:{beforeRequest:[async e=>{if(!e.headers.get("Authorization")){const t=await Ds();return!t||!t.accessToken||e.headers.set("Authorization",`Bearer ${t.accessToken}`),e}return e}],afterResponse:[async(e,t,r)=>{if(r.status!==401)return r;const n=await Ds();if(!n||!n.refreshToken)return r;const a=await(await Qt.post("users/auth/refresh",{headers:{Authorization:`Bearer ${n.refreshToken}`}})).json();return e.headers.set("Authorization",`Bearer ${a.data.accessToken}`),qo(e)}]}})}function Ns(e){if(e instanceof Wr)switch(e.response.status){case 400:return"잘못된 요청입니다.";case 401:return"로그인이 필요합니다.";case 403:return"권한이 없습니다.";case 404:return"요청한 자원을 찾을 수 없습니다.";case 409:return"이미 등록된 동아리입니다.";case 500:return"서버 오류가 발생했습니다. 다시 시도해주세요.";default:return"알 수 없는 오류가 발생했습니다. 다시 시도해주세요."}return"알 수 없는 오류가 발생했습니다. 다시 시도해주세요."}function Ku(e,t){if(e instanceof Wr){if(t){const r=t.find(n=>n.status===e.response.status);return{ok:!1,message:(r==null?void 0:r.message)||Ns(e),data:void 0}}return{ok:!1,message:Ns(e),data:void 0}}return{ok:!1,message:"알 수 없는 오류가 발생했습니다.",data:void 0}}async function ay(e){try{return await(await Hu()).post(`favorites/${e}`),{ok:!0,message:"즐겨찾기가 등록되었습니다."}}catch(t){return Ku(t,[{status:409,message:"이미 즐겨찾기한 동아리입니다."}])}}async function iy(e){try{return await(await Hu()).delete(`favorites/${e}`),{ok:!0,message:"즐겨찾기가 삭제되었습니다."}}catch(t){return Ku(t,[{status:404,message:"즐겨찾기한 동아리가 없습니다."}])}}function sy({isFavorite:e,clubId:t,customClass:r,session:n}){const[o,a]=G.useState(e),i=G.useMemo(()=>ld(async()=>{if(!n){ae.dismiss(),ae.error("로그인 후 이용하실 수 있습니다.");return}try{o?await iy(Number(t)):await ay(Number(t)),a(s=>!s)}catch{}},300),[o,n,t]);return xe.jsx(ic,{favorite:o,setFavoriteAction:i,customClass:r})}sy.__docgenInfo={description:"",methods:[],displayName:"FavoriteButton",props:{isFavorite:{required:!0,tsType:{name:"boolean"},description:""},clubId:{required:!0,tsType:{name:"string"},description:""},customClass:{required:!1,tsType:{name:"string"},description:""},session:{required:!1,tsType:{name:"Session"},description:""}}};class cy extends H{}class uy extends H{}async function qa(e,t,r,n={}){var a;const o=`${ly(t)}/${e}`;try{const i={headers:{"Content-Type":"application/json",...(a=n==null?void 0:n.headers)!=null&&a.cookie?{cookie:n.headers.cookie}:{}}};n!=null&&n.body&&(i.body=JSON.stringify(n.body),i.method="POST");const s=await fetch(o,i),c=await s.json();if(!s.ok)throw c;return c}catch(i){return r.error(new cy(i.message,i)),null}}function ly(e){return typeof window>"u"?`${e.baseUrlServer}${e.basePathServer}`:e.basePath}function dy(){const[e,t]=G.useState(typeof navigator<"u"?navigator.onLine:!1),r=()=>t(!0),n=()=>t(!1);return G.useEffect(()=>(window.addEventListener("online",r),window.addEventListener("offline",n),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}),[]),e}function Ir(){return Math.floor(Date.now()/1e3)}function Ur(e){const t=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e=`https://${e}`);const r=new URL(e||t),n=(r.pathname==="/"?t.pathname:r.pathname).replace(/\/$/,""),o=`${r.origin}${n}`;return{origin:r.origin,host:r.host,path:n,base:o,toString:()=>o}}var at={};const se={baseUrl:Ur(at.NEXTAUTH_URL??at.VERCEL_URL).origin,basePath:Ur(at.NEXTAUTH_URL).path,baseUrlServer:Ur(at.NEXTAUTH_URL_INTERNAL??at.NEXTAUTH_URL??at.VERCEL_URL).origin,basePathServer:Ur(at.NEXTAUTH_URL_INTERNAL??at.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}};let No=null;function Bu(){return new BroadcastChannel("next-auth")}function jo(){return typeof BroadcastChannel>"u"?{postMessage:()=>{},addEventListener:()=>{},removeEventListener:()=>{}}:(No===null&&(No=Bu()),No)}const Yr={debug:console.debug,error:console.error,warn:console.warn};var Ws,qs;const js=(qs=(Ws=G).createContext)==null?void 0:qs.call(Ws,void 0);async function Ls(e){const t=await qa("session",se,Yr,e);return((e==null?void 0:e.broadcast)??!0)&&Bu().postMessage({event:"session",data:{trigger:"getSession"}}),t}async function fy(){const e=await qa("csrf",se,Yr);return(e==null?void 0:e.csrfToken)??""}function Oy(e){if(!js)throw new Error("React Context is unavailable in Server Components");const{children:t,basePath:r,refetchInterval:n,refetchWhenOffline:o}=e;r&&(se.basePath=r);const a=e.session!==void 0;se._lastSync=a?Ir():0;const[i,s]=G.useState(()=>(a&&(se._session=e.session),e.session)),[c,l]=G.useState(!a);G.useEffect(()=>(se._getSession=async({event:g}={})=>{try{const p=g==="storage";if(p||se._session===void 0){se._lastSync=Ir(),se._session=await Ls({broadcast:!p}),s(se._session);return}if(!g||se._session===null||Ir()<se._lastSync)return;se._lastSync=Ir(),se._session=await Ls(),s(se._session)}catch(p){Yr.error(new uy(p.message,p))}finally{l(!1)}},se._getSession(),()=>{se._lastSync=0,se._session=void 0,se._getSession=()=>{}}),[]),G.useEffect(()=>{const g=()=>se._getSession({event:"storage"});return jo().addEventListener("message",g),()=>jo().removeEventListener("message",g)},[]),G.useEffect(()=>{const{refetchOnWindowFocus:g=!0}=e,p=()=>{g&&document.visibilityState==="visible"&&se._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",p,!1),()=>document.removeEventListener("visibilitychange",p,!1)},[e.refetchOnWindowFocus]);const d=dy(),u=o!==!1||d;G.useEffect(()=>{if(n&&u){const g=setInterval(()=>{se._session&&se._getSession({event:"poll"})},n*1e3);return()=>clearInterval(g)}},[n,u]);const h=G.useMemo(()=>({data:i,status:c?"loading":i?"authenticated":"unauthenticated",async update(g){if(c)return;l(!0);const p=await qa("session",se,Yr,typeof g>"u"?void 0:{body:{csrfToken:await fy(),data:g}});return l(!1),p&&(s(p),jo().postMessage({event:"session",data:{trigger:"getSession"}})),p}}),[i,c]);return xe.jsx(js.Provider,{value:h,children:t})}export{Dl as A,sy as F,Oy as S,Nl as a,jl as b};
