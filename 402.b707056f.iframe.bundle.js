/*! For license information please see 402.b707056f.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkmokkoji_fe_migration=self.webpackChunkmokkoji_fe_migration||[]).push([[402],{"./node_modules/.pnpm/@auth+core@0.39.1/node_modules/@auth/core/errors.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{CM:()=>ErrorPageLoop,Hj:()=>InvalidProvider,Lx:()=>UnsupportedStrategy,OZ:()=>MissingAdapter,Oy:()=>AccessDenied,P8:()=>UnknownAction,PM:()=>EventError,QU:()=>SessionTokenError,SW:()=>JWTSessionError,WS:()=>AccountNotLinked,XP:()=>OAuthAccountNotLinked,_2:()=>isClientError,_z:()=>OAuthProfileParseError,dy:()=>MissingCSRF,eH:()=>SignOutError,gs:()=>InvalidEndpoints,i8:()=>MissingAdapterMethods,jo:()=>MissingSecret,k9:()=>InvalidCheck,lR:()=>AuthError,me:()=>InvalidCallbackUrl,nd:()=>MissingWebAuthnAutocomplete,o6:()=>Verification,om:()=>AdapterError,rk:()=>OAuthCallbackError,s5:()=>DuplicateConditionalUI,t3:()=>CallbackRouteError,tP:()=>UntrustedHost,u$:()=>MissingAuthorize,w2:()=>WebAuthnVerificationError,xm:()=>ExperimentalFeatureNotEnabled,xz:()=>CredentialsSignin});class AuthError extends Error{constructor(message,errorOptions){message instanceof Error?super(void 0,{cause:{err:message,...message.cause,...errorOptions}}):"string"==typeof message?(errorOptions instanceof Error&&(errorOptions={err:errorOptions,...errorOptions.cause}),super(message,errorOptions)):super(void 0,message),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);const url=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${url}`}}class SignInError extends AuthError{}SignInError.kind="signIn";class AdapterError extends AuthError{}AdapterError.type="AdapterError";class AccessDenied extends AuthError{}AccessDenied.type="AccessDenied";class CallbackRouteError extends AuthError{}CallbackRouteError.type="CallbackRouteError";class ErrorPageLoop extends AuthError{}ErrorPageLoop.type="ErrorPageLoop";class EventError extends AuthError{}EventError.type="EventError";class InvalidCallbackUrl extends AuthError{}InvalidCallbackUrl.type="InvalidCallbackUrl";class CredentialsSignin extends SignInError{constructor(){super(...arguments),this.code="credentials"}}CredentialsSignin.type="CredentialsSignin";class InvalidEndpoints extends AuthError{}InvalidEndpoints.type="InvalidEndpoints";class InvalidCheck extends AuthError{}InvalidCheck.type="InvalidCheck";class JWTSessionError extends AuthError{}JWTSessionError.type="JWTSessionError";class MissingAdapter extends AuthError{}MissingAdapter.type="MissingAdapter";class MissingAdapterMethods extends AuthError{}MissingAdapterMethods.type="MissingAdapterMethods";class MissingAuthorize extends AuthError{}MissingAuthorize.type="MissingAuthorize";class MissingSecret extends AuthError{}MissingSecret.type="MissingSecret";class OAuthAccountNotLinked extends SignInError{}OAuthAccountNotLinked.type="OAuthAccountNotLinked";class OAuthCallbackError extends SignInError{}OAuthCallbackError.type="OAuthCallbackError";class OAuthProfileParseError extends AuthError{}OAuthProfileParseError.type="OAuthProfileParseError";class SessionTokenError extends AuthError{}SessionTokenError.type="SessionTokenError";(class OAuthSignInError extends SignInError{}).type="OAuthSignInError";(class EmailSignInError extends SignInError{}).type="EmailSignInError";class SignOutError extends AuthError{}SignOutError.type="SignOutError";class UnknownAction extends AuthError{}UnknownAction.type="UnknownAction";class UnsupportedStrategy extends AuthError{}UnsupportedStrategy.type="UnsupportedStrategy";class InvalidProvider extends AuthError{}InvalidProvider.type="InvalidProvider";class UntrustedHost extends AuthError{}UntrustedHost.type="UntrustedHost";class Verification extends AuthError{}Verification.type="Verification";class MissingCSRF extends SignInError{}MissingCSRF.type="MissingCSRF";const clientErrors=new Set(["CredentialsSignin","OAuthAccountNotLinked","OAuthCallbackError","AccessDenied","Verification","MissingCSRF","AccountNotLinked","WebAuthnVerificationError"]);function isClientError(error){return error instanceof AuthError&&clientErrors.has(error.type)}class DuplicateConditionalUI extends AuthError{}DuplicateConditionalUI.type="DuplicateConditionalUI";class MissingWebAuthnAutocomplete extends AuthError{}MissingWebAuthnAutocomplete.type="MissingWebAuthnAutocomplete";class WebAuthnVerificationError extends AuthError{}WebAuthnVerificationError.type="WebAuthnVerificationError";class AccountNotLinked extends SignInError{}AccountNotLinked.type="AccountNotLinked";class ExperimentalFeatureNotEnabled extends AuthError{}ExperimentalFeatureNotEnabled.type="ExperimentalFeatureNotEnabled"},"./node_modules/.pnpm/@auth+core@0.39.1/node_modules/@auth/core/providers/credentials.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function Credentials(config){return{id:"credentials",name:"Credentials",type:"credentials",credentials:{},authorize:()=>null,options:config}}__webpack_require__.d(__webpack_exports__,{A:()=>Credentials})},"./node_modules/.pnpm/@auth+core@0.39.1/node_modules/@auth/core/providers/kakao.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function Kakao(options){return{id:"kakao",name:"Kakao",type:"oauth",authorization:"https://kauth.kakao.com/oauth/authorize?scope",token:"https://kauth.kakao.com/oauth/token",userinfo:"https://kapi.kakao.com/v2/user/me",client:{token_endpoint_auth_method:"client_secret_post"},profile:profile=>({id:profile.id.toString(),name:profile.kakao_account?.profile?.nickname,email:profile.kakao_account?.email,image:profile.kakao_account?.profile?.profile_image_url}),options}}__webpack_require__.d(__webpack_exports__,{A:()=>Kakao})},"./node_modules/.pnpm/jwt-decode@4.0.0/node_modules/jwt-decode/build/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{s:()=>jwtDecode});class InvalidTokenError extends Error{}function base64UrlDecode(str){let output=str.replace(/-/g,"+").replace(/_/g,"/");switch(output.length%4){case 0:break;case 2:output+="==";break;case 3:output+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function b64DecodeUnicode(str){return decodeURIComponent(atob(str).replace(/(.)/g,(m,p)=>{let code=p.charCodeAt(0).toString(16).toUpperCase();return code.length<2&&(code="0"+code),"%"+code}))}(output)}catch(err){return atob(output)}}function jwtDecode(token,options){if("string"!=typeof token)throw new InvalidTokenError("Invalid token specified: must be a string");options||(options={});const pos=!0===options.header?0:1,part=token.split(".")[pos];if("string"!=typeof part)throw new InvalidTokenError(`Invalid token specified: missing part #${pos+1}`);let decoded;try{decoded=base64UrlDecode(part)}catch(e){throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos+1} (${e.message})`)}try{return JSON.parse(decoded)}catch(e){throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos+1} (${e.message})`)}}InvalidTokenError.prototype.name="InvalidTokenError"},"./node_modules/.pnpm/ky@1.8.2/node_modules/ky/distribution/errors/HTTPError.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H:()=>HTTPError});class HTTPError extends Error{response;request;options;constructor(response,request,options){const status=`${response.status||0===response.status?response.status:""} ${response.statusText||""}`.trim();super(`Request failed with ${status?`status code ${status}`:"an unknown error"}: ${request.method} ${request.url}`),this.name="HTTPError",this.response=response,this.request=request,this.options=options}}},"./node_modules/.pnpm/ky@1.8.2/node_modules/ky/distribution/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>distribution});var HTTPError=__webpack_require__("./node_modules/.pnpm/ky@1.8.2/node_modules/ky/distribution/errors/HTTPError.js");class TimeoutError extends Error{request;constructor(request){super(`Request timed out: ${request.method} ${request.url}`),this.name="TimeoutError",this.request=request}}const supportsRequestStreams=(()=>{let duplexAccessed=!1,hasContentType=!1;const supportsReadableStream="function"==typeof globalThis.ReadableStream,supportsRequest="function"==typeof globalThis.Request;if(supportsReadableStream&&supportsRequest)try{hasContentType=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return duplexAccessed=!0,"half"}}).headers.has("Content-Type")}catch(error){if(error instanceof Error&&"unsupported BodyInit type"===error.message)return!1;throw error}return duplexAccessed&&!hasContentType})(),supportsAbortController="function"==typeof globalThis.AbortController,supportsAbortSignal="function"==typeof globalThis.AbortSignal&&"function"==typeof globalThis.AbortSignal.any,supportsResponseStreams="function"==typeof globalThis.ReadableStream,supportsFormData="function"==typeof globalThis.FormData,requestMethods=["get","post","put","patch","head","delete"],responseTypes={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*"},usualFormBoundarySize=(new TextEncoder).encode("------WebKitFormBoundaryaxpyiPgbbPti10Rw").length,stop=Symbol("stop"),kyOptionKeys={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,onUploadProgress:!0,fetch:!0},requestOptionsRegistry={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0},streamRequest=(request,onUploadProgress)=>{const totalBytes=(body=>{if(!body)return 0;if(body instanceof FormData){let size=0;for(const[key,value]of body)size+=usualFormBoundarySize,size+=(new TextEncoder).encode(`Content-Disposition: form-data; name="${key}"`).length,size+="string"==typeof value?(new TextEncoder).encode(value).length:value.size;return size}if(body instanceof Blob)return body.size;if(body instanceof ArrayBuffer)return body.byteLength;if("string"==typeof body)return(new TextEncoder).encode(body).length;if(body instanceof URLSearchParams)return(new TextEncoder).encode(body.toString()).length;if("byteLength"in body)return body.byteLength;if("object"==typeof body&&null!==body)try{const jsonString=JSON.stringify(body);return(new TextEncoder).encode(jsonString).length}catch{return 0}return 0})(request.body);let transferredBytes=0;return new Request(request,{duplex:"half",body:new ReadableStream({async start(controller){const reader=request.body instanceof ReadableStream?request.body.getReader():new Response("").body.getReader();await async function read(){const{done,value}=await reader.read();if(done)return onUploadProgress&&onUploadProgress({percent:1,transferredBytes,totalBytes:Math.max(totalBytes,transferredBytes)},new Uint8Array),void controller.close();transferredBytes+=value.byteLength;let percent=0===totalBytes?0:transferredBytes/totalBytes;(totalBytes<transferredBytes||1===percent)&&(percent=.99),onUploadProgress&&onUploadProgress({percent:Number(percent.toFixed(2)),transferredBytes,totalBytes},value),controller.enqueue(value),await read()}()}})})},isObject=value=>null!==value&&"object"==typeof value,validateAndMerge=(...sources)=>{for(const source of sources)if((!isObject(source)||Array.isArray(source))&&void 0!==source)throw new TypeError("The `options` argument must be an object");return deepMerge({},...sources)},mergeHeaders=(source1={},source2={})=>{const result=new globalThis.Headers(source1),isHeadersInstance=source2 instanceof globalThis.Headers,source=new globalThis.Headers(source2);for(const[key,value]of source.entries())isHeadersInstance&&"undefined"===value||void 0===value?result.delete(key):result.set(key,value);return result};function newHookValue(original,incoming,property){return Object.hasOwn(incoming,property)&&void 0===incoming[property]?[]:deepMerge(original[property]??[],incoming[property]??[])}const mergeHooks=(original={},incoming={})=>({beforeRequest:newHookValue(original,incoming,"beforeRequest"),beforeRetry:newHookValue(original,incoming,"beforeRetry"),afterResponse:newHookValue(original,incoming,"afterResponse"),beforeError:newHookValue(original,incoming,"beforeError")}),deepMerge=(...sources)=>{let returnValue={},headers={},hooks={};for(const source of sources)if(Array.isArray(source))Array.isArray(returnValue)||(returnValue=[]),returnValue=[...returnValue,...source];else if(isObject(source)){for(let[key,value]of Object.entries(source))isObject(value)&&key in returnValue&&(value=deepMerge(returnValue[key],value)),returnValue={...returnValue,[key]:value};isObject(source.hooks)&&(hooks=mergeHooks(hooks,source.hooks),returnValue.hooks=hooks),isObject(source.headers)&&(headers=mergeHeaders(headers,source.headers),returnValue.headers=headers)}return returnValue},normalizeRequestMethod=input=>requestMethods.includes(input)?input.toUpperCase():input,defaultRetryOptions={limit:2,methods:["get","put","head","delete","options","trace"],statusCodes:[408,413,429,500,502,503,504],afterStatusCodes:[413,429,503],maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:attemptCount=>.3*2**(attemptCount-1)*1e3},normalizeRetryOptions=(retry={})=>{if("number"==typeof retry)return{...defaultRetryOptions,limit:retry};if(retry.methods&&!Array.isArray(retry.methods))throw new Error("retry.methods must be an array");if(retry.statusCodes&&!Array.isArray(retry.statusCodes))throw new Error("retry.statusCodes must be an array");return{...defaultRetryOptions,...retry}};class Ky{static create(input,options){const ky=new Ky(input,options),function_=async()=>{if("number"==typeof ky._options.timeout&&ky._options.timeout>2147483647)throw new RangeError("The `timeout` option cannot be greater than 2147483647");await Promise.resolve();let response=await ky._fetch();for(const hook of ky._options.hooks.afterResponse){const modifiedResponse=await hook(ky.request,ky._options,ky._decorateResponse(response.clone()));modifiedResponse instanceof globalThis.Response&&(response=modifiedResponse)}if(ky._decorateResponse(response),!response.ok&&ky._options.throwHttpErrors){let error=new HTTPError.H(response,ky.request,ky._options);for(const hook of ky._options.hooks.beforeError)error=await hook(error);throw error}if(ky._options.onDownloadProgress){if("function"!=typeof ky._options.onDownloadProgress)throw new TypeError("The `onDownloadProgress` option must be a function");if(!supportsResponseStreams)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return((response,onDownloadProgress)=>{const totalBytes=Number(response.headers.get("content-length"))||0;let transferredBytes=0;return 204===response.status?(onDownloadProgress&&onDownloadProgress({percent:1,totalBytes,transferredBytes},new Uint8Array),new Response(null,{status:response.status,statusText:response.statusText,headers:response.headers})):new Response(new ReadableStream({async start(controller){const reader=response.body.getReader();onDownloadProgress&&onDownloadProgress({percent:0,transferredBytes:0,totalBytes},new Uint8Array),await async function read(){const{done,value}=await reader.read();done?controller.close():(onDownloadProgress&&(transferredBytes+=value.byteLength,onDownloadProgress({percent:0===totalBytes?0:transferredBytes/totalBytes,transferredBytes,totalBytes},value)),controller.enqueue(value),await read())}()}}),{status:response.status,statusText:response.statusText,headers:response.headers})})(response.clone(),ky._options.onDownloadProgress)}return response},result=(ky._options.retry.methods.includes(ky.request.method.toLowerCase())?ky._retry(function_):function_()).finally(async()=>{ky.request.bodyUsed||await(ky.request.body?.cancel())});for(const[type,mimeType]of Object.entries(responseTypes))result[type]=async()=>{ky.request.headers.set("accept",ky.request.headers.get("accept")||mimeType);const response=await result;if("json"===type){if(204===response.status)return"";if(0===(await response.clone().arrayBuffer()).byteLength)return"";if(options.parseJson)return options.parseJson(await response.text())}return response[type]()};return result}request;abortController;_retryCount=0;_input;_options;constructor(input,options={}){if(this._input=input,this._options={...options,headers:mergeHeaders(this._input.headers,options.headers),hooks:mergeHooks({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},options.hooks),method:normalizeRequestMethod(options.method??this._input.method??"GET"),prefixUrl:String(options.prefixUrl||""),retry:normalizeRetryOptions(options.retry),throwHttpErrors:!1!==options.throwHttpErrors,timeout:options.timeout??1e4,fetch:options.fetch??globalThis.fetch.bind(globalThis)},"string"!=typeof this._input&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&"string"==typeof this._input){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(supportsAbortController&&supportsAbortSignal){const originalSignal=this._options.signal??this._input.signal;this.abortController=new globalThis.AbortController,this._options.signal=originalSignal?AbortSignal.any([originalSignal,this.abortController.signal]):this.abortController.signal}if(supportsRequestStreams&&(this._options.duplex="half"),void 0!==this._options.json&&(this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),this._options.searchParams){const searchParams="?"+("string"==typeof this._options.searchParams?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(this._options.searchParams).toString()),url=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,searchParams);!(supportsFormData&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)||this._options.headers&&this._options.headers["content-type"]||this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(url,{...this.request}),this._options)}if(this._options.onUploadProgress){if("function"!=typeof this._options.onUploadProgress)throw new TypeError("The `onUploadProgress` option must be a function");if(!supportsRequestStreams)throw new Error("Request streams are not supported in your environment. The `duplex` option for `Request` is not available.");this.request.body&&(this.request=streamRequest(this.request,this._options.onUploadProgress))}}_calculateRetryDelay(error){if(this._retryCount++,this._retryCount>this._options.retry.limit||error instanceof TimeoutError)throw error;if(error instanceof HTTPError.H){if(!this._options.retry.statusCodes.includes(error.response.status))throw error;const retryAfter=error.response.headers.get("Retry-After")??error.response.headers.get("RateLimit-Reset")??error.response.headers.get("X-RateLimit-Reset")??error.response.headers.get("X-Rate-Limit-Reset");if(retryAfter&&this._options.retry.afterStatusCodes.includes(error.response.status)){let after=1e3*Number(retryAfter);Number.isNaN(after)?after=Date.parse(retryAfter)-Date.now():after>=Date.parse("2024-01-01")&&(after-=Date.now());const max=this._options.retry.maxRetryAfter??after;return after<max?after:max}if(413===error.response.status)throw error}const retryDelay=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,retryDelay)}_decorateResponse(response){return this._options.parseJson&&(response.json=async()=>this._options.parseJson(await response.text())),response}async _retry(function_){try{return await function_()}catch(error){const ms=Math.min(this._calculateRetryDelay(error),2147483647);if(this._retryCount<1)throw error;await async function delay(ms,{signal}){return new Promise((resolve,reject)=>{function abortHandler(){clearTimeout(timeoutId),reject(signal.reason)}signal&&(signal.throwIfAborted(),signal.addEventListener("abort",abortHandler,{once:!0}));const timeoutId=setTimeout(()=>{signal?.removeEventListener("abort",abortHandler),resolve()},ms)})}(ms,{signal:this._options.signal});for(const hook of this._options.hooks.beforeRetry){if(await hook({request:this.request,options:this._options,error,retryCount:this._retryCount})===stop)return}return this._retry(function_)}}async _fetch(){for(const hook of this._options.hooks.beforeRequest){const result=await hook(this.request,this._options);if(result instanceof Request){this.request=result;break}if(result instanceof Response)return result}const nonRequestOptions=((request,options)=>{const unknownOptions={};for(const key in options)key in requestOptionsRegistry||key in kyOptionKeys||key in request||(unknownOptions[key]=options[key]);return unknownOptions})(this.request,this._options),mainRequest=this.request;return this.request=mainRequest.clone(),!1===this._options.timeout?this._options.fetch(mainRequest,nonRequestOptions):async function timeout(request,init,abortController,options){return new Promise((resolve,reject)=>{const timeoutId=setTimeout(()=>{abortController&&abortController.abort(),reject(new TimeoutError(request))},options.timeout);options.fetch(request,init).then(resolve).catch(reject).then(()=>{clearTimeout(timeoutId)})})}(mainRequest,nonRequestOptions,this.abortController,this._options)}}const createInstance=defaults=>{const ky=(input,options)=>Ky.create(input,validateAndMerge(defaults,options));for(const method of requestMethods)ky[method]=(input,options)=>Ky.create(input,validateAndMerge(defaults,options,{method}));return ky.create=newDefaults=>createInstance(validateAndMerge(newDefaults)),ky.extend=newDefaults=>("function"==typeof newDefaults&&(newDefaults=newDefaults(defaults??{})),createInstance(validateAndMerge(defaults,newDefaults))),ky.stop=stop,ky},distribution=createInstance()},"./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_Symbol.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Symbol=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_root.js").Symbol;module.exports=Symbol},"./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseGetTag.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Symbol=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_Symbol.js"),getRawTag=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_getRawTag.js"),objectToString=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_objectToString.js"),symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function baseGetTag(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}},"./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseTrim.js":(module,__unused_webpack_exports,__webpack_require__)=>{var trimmedEndIndex=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_trimmedEndIndex.js"),reTrimStart=/^\s+/;module.exports=function baseTrim(string){return string?string.slice(0,trimmedEndIndex(string)+1).replace(reTrimStart,""):string}},"./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_freeGlobal.js":(module,__unused_webpack_exports,__webpack_require__)=>{var freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g;module.exports=freeGlobal},"./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_getRawTag.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Symbol=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_Symbol.js"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;module.exports=function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}},"./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_objectToString.js":module=>{var nativeObjectToString=Object.prototype.toString;module.exports=function objectToString(value){return nativeObjectToString.call(value)}},"./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_root.js":(module,__unused_webpack_exports,__webpack_require__)=>{var freeGlobal=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_freeGlobal.js"),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module.exports=root},"./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_trimmedEndIndex.js":module=>{var reWhitespace=/\s/;module.exports=function trimmedEndIndex(string){for(var index=string.length;index--&&reWhitespace.test(string.charAt(index)););return index}},"./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/debounce.js":(module,__unused_webpack_exports,__webpack_require__)=>{var isObject=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isObject.js"),now=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/now.js"),toNumber=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/toNumber.js"),nativeMax=Math.max,nativeMin=Math.min;module.exports=function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError("Expected a function");function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime;return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&time-lastInvokeTime>=maxWait}function timerExpired(){var time=now();if(shouldInvoke(time))return trailingEdge(time);timerId=setTimeout(timerExpired,function remainingWait(time){var timeWaiting=wait-(time-lastCallTime);return maxing?nativeMin(timeWaiting,maxWait-(time-lastInvokeTime)):timeWaiting}(time))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}(lastCallTime);if(maxing)return clearTimeout(timerId),timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxWait=(maxing="maxWait"in options)?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0},debounced.flush=function flush(){return void 0===timerId?result:trailingEdge(now())},debounced}},"./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isObject.js":module=>{module.exports=function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}},"./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isObjectLike.js":module=>{module.exports=function isObjectLike(value){return null!=value&&"object"==typeof value}},"./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isSymbol.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetTag=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseGetTag.js"),isObjectLike=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isObjectLike.js");module.exports=function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&"[object Symbol]"==baseGetTag(value)}},"./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/now.js":(module,__unused_webpack_exports,__webpack_require__)=>{var root=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_root.js");module.exports=function(){return root.Date.now()}},"./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/throttle.js":(module,__unused_webpack_exports,__webpack_require__)=>{var debounce=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/debounce.js"),isObject=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isObject.js");module.exports=function throttle(func,wait,options){var leading=!0,trailing=!0;if("function"!=typeof func)throw new TypeError("Expected a function");return isObject(options)&&(leading="leading"in options?!!options.leading:leading,trailing="trailing"in options?!!options.trailing:trailing),debounce(func,wait,{leading,maxWait:wait,trailing})}},"./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/toNumber.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseTrim=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseTrim.js"),isObject=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isObject.js"),isSymbol=__webpack_require__("./node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isSymbol.js"),reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;module.exports=function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NaN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=baseTrim(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NaN:+value}},"./node_modules/.pnpm/lucide-react@0.525.0_react@19.1.1/node_modules/lucide-react/dist/esm/createLucideIcon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>createLucideIcon});var react=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/compiled/react/index.js");const toPascalCase=string=>{const camelCase=(string=>string.replace(/^([A-Z])|[\s-_]+(\w)/g,(match,p1,p2)=>p2?p2.toUpperCase():p1.toLowerCase()))(string);return camelCase.charAt(0).toUpperCase()+camelCase.slice(1)},mergeClasses=(...classes)=>classes.filter((className,index,array)=>Boolean(className)&&""!==className.trim()&&array.indexOf(className)===index).join(" ").trim(),hasA11yProp=props=>{for(const prop in props)if(prop.startsWith("aria-")||"role"===prop||"title"===prop)return!0};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Icon=(0,react.forwardRef)(({color="currentColor",size=24,strokeWidth=2,absoluteStrokeWidth,className="",children,iconNode,...rest},ref)=>(0,react.createElement)("svg",{ref,...defaultAttributes,width:size,height:size,stroke:color,strokeWidth:absoluteStrokeWidth?24*Number(strokeWidth)/Number(size):strokeWidth,className:mergeClasses("lucide",className),...!children&&!hasA11yProp(rest)&&{"aria-hidden":"true"},...rest},[...iconNode.map(([tag,attrs])=>(0,react.createElement)(tag,attrs)),...Array.isArray(children)?children:[children]])),createLucideIcon=(iconName,iconNode)=>{const Component=(0,react.forwardRef)(({className,...props},ref)=>{return(0,react.createElement)(Icon,{ref,iconNode,className:mergeClasses(`lucide-${string=toPascalCase(iconName),string.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${iconName}`,className),...props});var string});return Component.displayName=toPascalCase(iconName),Component}},"./node_modules/.pnpm/lucide-react@0.525.0_react@19.1.1/node_modules/lucide-react/dist/esm/icons/star.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>Star});const Star=(0,__webpack_require__("./node_modules/.pnpm/lucide-react@0.525.0_react@19.1.1/node_modules/lucide-react/dist/esm/createLucideIcon.js").A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},"./node_modules/.pnpm/next-auth@5.0.0-beta.28_next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+t_4fgl65xwhnz7bnrslbc77vehim/node_modules/next-auth/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>NextAuth});var vendored_cookie_namespaceObject={};__webpack_require__.r(vendored_cookie_namespaceObject),__webpack_require__.d(vendored_cookie_namespaceObject,{q:()=>parse,l:()=>serialize});var _SessionStore_instances,_SessionStore_chunks,_SessionStore_option,_SessionStore_logger,_SessionStore_chunk,_SessionStore_clean,__classPrivateFieldSet=function(receiver,state,value,kind,f){if("m"===kind)throw new TypeError("Private method is not writable");if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===kind?f.call(receiver,value):f?f.value=value:state.set(receiver,value),value},__classPrivateFieldGet=function(receiver,state,kind,f){if("a"===kind&&!f)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof state?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kind?f:"a"===kind?f.call(receiver):f?f.value:state.get(receiver)};function cookie_defaultCookies(useSecureCookies){const cookiePrefix=useSecureCookies?"__Secure-":"";return{sessionToken:{name:`${cookiePrefix}authjs.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:useSecureCookies}},callbackUrl:{name:`${cookiePrefix}authjs.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:useSecureCookies}},csrfToken:{name:(useSecureCookies?"__Host-":"")+"authjs.csrf-token",options:{httpOnly:!0,sameSite:"lax",path:"/",secure:useSecureCookies}},pkceCodeVerifier:{name:`${cookiePrefix}authjs.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:useSecureCookies,maxAge:900}},state:{name:`${cookiePrefix}authjs.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:useSecureCookies,maxAge:900}},nonce:{name:`${cookiePrefix}authjs.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:useSecureCookies}},webauthnChallenge:{name:`${cookiePrefix}authjs.challenge`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:useSecureCookies,maxAge:900}}}}class cookie_SessionStore{constructor(option,cookies,logger){if(_SessionStore_instances.add(this),_SessionStore_chunks.set(this,{}),_SessionStore_option.set(this,void 0),_SessionStore_logger.set(this,void 0),__classPrivateFieldSet(this,_SessionStore_logger,logger,"f"),__classPrivateFieldSet(this,_SessionStore_option,option,"f"),!cookies)return;const{name:sessionCookiePrefix}=option;for(const[name,value]of Object.entries(cookies))name.startsWith(sessionCookiePrefix)&&value&&(__classPrivateFieldGet(this,_SessionStore_chunks,"f")[name]=value)}get value(){const sortedKeys=Object.keys(__classPrivateFieldGet(this,_SessionStore_chunks,"f")).sort((a,b)=>parseInt(a.split(".").pop()||"0")-parseInt(b.split(".").pop()||"0"));return sortedKeys.map(key=>__classPrivateFieldGet(this,_SessionStore_chunks,"f")[key]).join("")}chunk(value,options){const cookies=__classPrivateFieldGet(this,_SessionStore_instances,"m",_SessionStore_clean).call(this),chunked=__classPrivateFieldGet(this,_SessionStore_instances,"m",_SessionStore_chunk).call(this,{name:__classPrivateFieldGet(this,_SessionStore_option,"f").name,value,options:{...__classPrivateFieldGet(this,_SessionStore_option,"f").options,...options}});for(const chunk of chunked)cookies[chunk.name]=chunk;return Object.values(cookies)}clean(){return Object.values(__classPrivateFieldGet(this,_SessionStore_instances,"m",_SessionStore_clean).call(this))}}_SessionStore_chunks=new WeakMap,_SessionStore_option=new WeakMap,_SessionStore_logger=new WeakMap,_SessionStore_instances=new WeakSet,_SessionStore_chunk=function _SessionStore_chunk(cookie){const chunkCount=Math.ceil(cookie.value.length/3936);if(1===chunkCount)return __classPrivateFieldGet(this,_SessionStore_chunks,"f")[cookie.name]=cookie.value,[cookie];const cookies=[];for(let i=0;i<chunkCount;i++){const name=`${cookie.name}.${i}`,value=cookie.value.substr(3936*i,3936);cookies.push({...cookie,name,value}),__classPrivateFieldGet(this,_SessionStore_chunks,"f")[name]=value}return __classPrivateFieldGet(this,_SessionStore_logger,"f").debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:160,valueSize:cookie.value.length,chunks:cookies.map(c=>c.value.length+160)}),cookies},_SessionStore_clean=function _SessionStore_clean(){const cleanedChunks={};for(const name in __classPrivateFieldGet(this,_SessionStore_chunks,"f"))delete __classPrivateFieldGet(this,_SessionStore_chunks,"f")?.[name],cleanedChunks[name]={name,value:"",options:{...__classPrivateFieldGet(this,_SessionStore_option,"f").options,maxAge:0}};return cleanedChunks};var errors=__webpack_require__("./node_modules/.pnpm/@auth+core@0.39.1/node_modules/@auth/core/errors.js");let warned=!1;function isValidHttpUrl(url,baseUrl){try{return/^https?:/.test(new URL(url,url.startsWith("/")?baseUrl:void 0).protocol)}catch{return!1}}function isSemverString(version){return/^v\d+(?:\.\d+){0,2}$/.test(version)}let hasCredentials=!1,hasEmail=!1,hasWebAuthn=!1;const emailMethods=["createVerificationToken","useVerificationToken","getUserByEmail"],sessionMethods=["createUser","getUser","getUserByEmail","getUserByAccount","updateUser","linkAccount","createSession","getSessionAndUser","updateSession","deleteSession"],webauthnMethods=["createUser","getUser","linkAccount","getAccount","getAuthenticator","createAuthenticator","listAuthenticatorsByUserId","updateAuthenticatorCounter"];const hkdf=async(digest,ikm,salt,info,keylen)=>{const{crypto:{subtle}}=(()=>{if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;throw new Error("unable to locate global object")})();return new Uint8Array(await subtle.deriveBits({name:"HKDF",hash:`SHA-${digest.substr(3)}`,salt,info},await subtle.importKey("raw",ikm,"HKDF",!1,["deriveBits"]),keylen<<3))};function normalizeUint8Array(input,label){if("string"==typeof input)return(new TextEncoder).encode(input);if(!(input instanceof Uint8Array))throw new TypeError(`"${label}"" must be an instance of Uint8Array or a string`);return input}async function web_hkdf(digest,ikm,salt,info,keylen){return hkdf(function normalizeDigest(digest){switch(digest){case"sha256":case"sha384":case"sha512":case"sha1":return digest;default:throw new TypeError('unsupported "digest" value')}}(digest),function normalizeIkm(input){const ikm=normalizeUint8Array(input,"ikm");if(!ikm.byteLength)throw new TypeError('"ikm" must be at least one byte in length');return ikm}(ikm),normalizeUint8Array(salt,"salt"),function normalizeInfo(input){const info=normalizeUint8Array(input,"info");if(info.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return info}(info),function normalizeKeylen(input,digest){if("number"!=typeof input||!Number.isInteger(input)||input<1)throw new TypeError('"keylen" must be a positive integer');if(input>255*(parseInt(digest.substr(3),10)>>3||20))throw new TypeError('"keylen" too large');return input}(keylen,digest))}const digest=async(algorithm,data)=>{const subtleDigest=`SHA-${algorithm.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(subtleDigest,data))},encoder=new TextEncoder,decoder=new TextDecoder;function concat(...buffers){const size=buffers.reduce((acc,{length})=>acc+length,0),buf=new Uint8Array(size);let i=0;for(const buffer of buffers)buf.set(buffer,i),i+=buffer.length;return buf}function writeUInt32BE(buf,value,offset){if(value<0||value>=4294967296)throw new RangeError(`value must be >= 0 and <= 4294967295. Received ${value}`);buf.set([value>>>24,value>>>16,value>>>8,255&value],offset)}function uint64be(value){const high=Math.floor(value/4294967296),low=value%4294967296,buf=new Uint8Array(8);return writeUInt32BE(buf,high,0),writeUInt32BE(buf,low,4),buf}function uint32be(value){const buf=new Uint8Array(4);return writeUInt32BE(buf,value),buf}function decode(input){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof input?input:decoder.decode(input),{alphabet:"base64url"});let encoded=input;encoded instanceof Uint8Array&&(encoded=decoder.decode(encoded)),encoded=encoded.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return function decodeBase64(encoded){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(encoded);const binary=atob(encoded),bytes=new Uint8Array(binary.length);for(let i=0;i<binary.length;i++)bytes[i]=binary.charCodeAt(i);return bytes}(encoded)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}function encode(input){let unencoded=input;return"string"==typeof unencoded&&(unencoded=encoder.encode(unencoded)),Uint8Array.prototype.toBase64?unencoded.toBase64({alphabet:"base64url",omitPadding:!0}):function encodeBase64(input){if(Uint8Array.prototype.toBase64)return input.toBase64();const arr=[];for(let i=0;i<input.length;i+=32768)arr.push(String.fromCharCode.apply(null,input.subarray(i,i+32768)));return btoa(arr.join(""))}(unencoded).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class JOSEError extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(message,options){super(message,options),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class JWTClaimValidationFailed extends JOSEError{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(message,payload,claim="unspecified",reason="unspecified"){super(message,{cause:{claim,reason,payload}}),this.claim=claim,this.reason=reason,this.payload=payload}}class JWTExpired extends JOSEError{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(message,payload,claim="unspecified",reason="unspecified"){super(message,{cause:{claim,reason,payload}}),this.claim=claim,this.reason=reason,this.payload=payload}}class JOSEAlgNotAllowed extends JOSEError{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class JOSENotSupported extends JOSEError{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class JWEDecryptionFailed extends JOSEError{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(message="decryption operation failed",options){super(message,options)}}class JWEInvalid extends JOSEError{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class JWTInvalid extends JOSEError{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class JWKInvalid extends JOSEError{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}Symbol.asyncIterator;function assertCryptoKey(key){if(!isCryptoKey(key))throw new Error("CryptoKey instance expected")}function isCryptoKey(key){return"CryptoKey"===key?.[Symbol.toStringTag]}function isKeyObject(key){return"KeyObject"===key?.[Symbol.toStringTag]}const is_key_like=key=>isCryptoKey(key)||isKeyObject(key);const is_object=input=>{if(!function isObjectLike(value){return"object"==typeof value&&null!==value}(input)||"[object Object]"!==Object.prototype.toString.call(input))return!1;if(null===Object.getPrototypeOf(input))return!0;let proto=input;for(;null!==Object.getPrototypeOf(proto);)proto=Object.getPrototypeOf(proto);return Object.getPrototypeOf(input)===proto};function isJWK(key){return is_object(key)&&"string"==typeof key.kty}function message(msg,actual,...types){if((types=types.filter(Boolean)).length>2){const last=types.pop();msg+=`one of type ${types.join(", ")}, or ${last}.`}else 2===types.length?msg+=`one of type ${types[0]} or ${types[1]}.`:msg+=`of type ${types[0]}.`;return null==actual?msg+=` Received ${actual}`:"function"==typeof actual&&actual.name?msg+=` Received function ${actual.name}`:"object"==typeof actual&&null!=actual&&actual.constructor?.name&&(msg+=` Received an instance of ${actual.constructor.name}`),msg}const invalid_key_input=(actual,...types)=>message("Key must be ",actual,...types);function withAlg(alg,actual,...types){return message(`Key for the ${alg} algorithm must be `,actual,...types)}async function exportJWK(key){return async function keyToJWK(key){if(isKeyObject(key)){if("secret"!==key.type)return key.export({format:"jwk"});key=key.export()}if(key instanceof Uint8Array)return{kty:"oct",k:encode(key)};if(!isCryptoKey(key))throw new TypeError(invalid_key_input(key,"CryptoKey","KeyObject","Uint8Array"));if(!key.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext,key_ops,alg,use,...jwk}=await crypto.subtle.exportKey("jwk",key);return jwk}(key)}const check=(value,description)=>{if("string"!=typeof value||!value)throw new JWKInvalid(`${description} missing or invalid`)};async function calculateJwkThumbprint(key,digestAlgorithm){let jwk,components;if(isJWK(key))jwk=key;else{if(!is_key_like(key))throw new TypeError(invalid_key_input(key,"CryptoKey","KeyObject","JSON Web Key"));jwk=await exportJWK(key)}if(digestAlgorithm??="sha256","sha256"!==digestAlgorithm&&"sha384"!==digestAlgorithm&&"sha512"!==digestAlgorithm)throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(jwk.kty){case"EC":check(jwk.crv,'"crv" (Curve) Parameter'),check(jwk.x,'"x" (X Coordinate) Parameter'),check(jwk.y,'"y" (Y Coordinate) Parameter'),components={crv:jwk.crv,kty:jwk.kty,x:jwk.x,y:jwk.y};break;case"OKP":check(jwk.crv,'"crv" (Subtype of Key Pair) Parameter'),check(jwk.x,'"x" (Public Key) Parameter'),components={crv:jwk.crv,kty:jwk.kty,x:jwk.x};break;case"RSA":check(jwk.e,'"e" (Exponent) Parameter'),check(jwk.n,'"n" (Modulus) Parameter'),components={e:jwk.e,kty:jwk.kty,n:jwk.n};break;case"oct":check(jwk.k,'"k" (Key Value) Parameter'),components={k:jwk.k,kty:jwk.kty};break;default:throw new JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}const data=encoder.encode(JSON.stringify(components));return encode(await digest(digestAlgorithm,data))}const unprotected=Symbol();function bitLength(alg){switch(alg){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`)}}const check_iv_length=(enc,iv)=>{if(iv.length<<3!==bitLength(enc))throw new JWEInvalid("Invalid Initialization Vector length")},check_cek_length=(cek,expected)=>{const actual=cek.byteLength<<3;if(actual!==expected)throw new JWEInvalid(`Invalid Content Encryption Key length. Expected ${expected} bits, got ${actual} bits`)};function unusable(name,prop="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${prop} must be ${name}`)}function isAlgorithm(algorithm,name){return algorithm.name===name}function getHashLength(hash){return parseInt(hash.name.slice(4),10)}function checkUsage(key,usage){if(usage&&!key.usages.includes(usage))throw new TypeError(`CryptoKey does not support this operation, its usages must include ${usage}.`)}function checkEncCryptoKey(key,alg,usage){switch(alg){case"A128GCM":case"A192GCM":case"A256GCM":{if(!isAlgorithm(key.algorithm,"AES-GCM"))throw unusable("AES-GCM");const expected=parseInt(alg.slice(1,4),10);if(key.algorithm.length!==expected)throw unusable(expected,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!isAlgorithm(key.algorithm,"AES-KW"))throw unusable("AES-KW");const expected=parseInt(alg.slice(1,4),10);if(key.algorithm.length!==expected)throw unusable(expected,"algorithm.length");break}case"ECDH":switch(key.algorithm.name){case"ECDH":case"X25519":break;default:throw unusable("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!isAlgorithm(key.algorithm,"PBKDF2"))throw unusable("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!isAlgorithm(key.algorithm,"RSA-OAEP"))throw unusable("RSA-OAEP");const expected=parseInt(alg.slice(9),10)||1;if(getHashLength(key.algorithm.hash)!==expected)throw unusable(`SHA-${expected}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}checkUsage(key,usage)}const encrypt=async(enc,plaintext,cek,iv,aad)=>{if(!(isCryptoKey(cek)||cek instanceof Uint8Array))throw new TypeError(invalid_key_input(cek,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));switch(iv?check_iv_length(enc,iv):iv=(alg=>crypto.getRandomValues(new Uint8Array(bitLength(alg)>>3)))(enc),enc){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return cek instanceof Uint8Array&&check_cek_length(cek,parseInt(enc.slice(-3),10)),async function cbcEncrypt(enc,plaintext,cek,iv,aad){if(!(cek instanceof Uint8Array))throw new TypeError(invalid_key_input(cek,"Uint8Array"));const keySize=parseInt(enc.slice(1,4),10),encKey=await crypto.subtle.importKey("raw",cek.subarray(keySize>>3),"AES-CBC",!1,["encrypt"]),macKey=await crypto.subtle.importKey("raw",cek.subarray(0,keySize>>3),{hash:"SHA-"+(keySize<<1),name:"HMAC"},!1,["sign"]),ciphertext=new Uint8Array(await crypto.subtle.encrypt({iv,name:"AES-CBC"},encKey,plaintext)),macData=concat(aad,iv,ciphertext,uint64be(aad.length<<3));return{ciphertext,tag:new Uint8Array((await crypto.subtle.sign("HMAC",macKey,macData)).slice(0,keySize>>3)),iv}}(enc,plaintext,cek,iv,aad);case"A128GCM":case"A192GCM":case"A256GCM":return cek instanceof Uint8Array&&check_cek_length(cek,parseInt(enc.slice(1,4),10)),async function gcmEncrypt(enc,plaintext,cek,iv,aad){let encKey;cek instanceof Uint8Array?encKey=await crypto.subtle.importKey("raw",cek,"AES-GCM",!1,["encrypt"]):(checkEncCryptoKey(cek,enc,"encrypt"),encKey=cek);const encrypted=new Uint8Array(await crypto.subtle.encrypt({additionalData:aad,iv,name:"AES-GCM",tagLength:128},encKey,plaintext)),tag=encrypted.slice(-16);return{ciphertext:encrypted.slice(0,-16),tag,iv}}(enc,plaintext,cek,iv,aad);default:throw new JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}};function checkKeySize(key,alg){if(key.algorithm.length!==parseInt(alg.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${alg}`)}function getCryptoKey(key,alg,usage){return key instanceof Uint8Array?crypto.subtle.importKey("raw",key,"AES-KW",!0,[usage]):(checkEncCryptoKey(key,alg,usage),key)}async function wrap(alg,key,cek){const cryptoKey=await getCryptoKey(key,alg,"wrapKey");checkKeySize(cryptoKey,alg);const cryptoKeyCek=await crypto.subtle.importKey("raw",cek,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",cryptoKeyCek,cryptoKey,"AES-KW"))}async function unwrap(alg,key,encryptedKey){const cryptoKey=await getCryptoKey(key,alg,"unwrapKey");checkKeySize(cryptoKey,alg);const cryptoKeyCek=await crypto.subtle.unwrapKey("raw",encryptedKey,cryptoKey,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",cryptoKeyCek))}function lengthAndInput(input){return concat(uint32be(input.length),input)}async function deriveKey(publicKey,privateKey,algorithm,keyLength,apu=new Uint8Array(0),apv=new Uint8Array(0)){checkEncCryptoKey(publicKey,"ECDH"),checkEncCryptoKey(privateKey,"ECDH","deriveBits");const value=concat(lengthAndInput(encoder.encode(algorithm)),lengthAndInput(apu),lengthAndInput(apv),uint32be(keyLength));let length;length="X25519"===publicKey.algorithm.name?256:Math.ceil(parseInt(publicKey.algorithm.namedCurve.slice(-3),10)/8)<<3;return async function concatKdf(secret,bits,value){const iterations=Math.ceil((bits>>3)/32),res=new Uint8Array(32*iterations);for(let iter=0;iter<iterations;iter++){const buf=new Uint8Array(4+secret.length+value.length);buf.set(uint32be(iter+1)),buf.set(secret,4),buf.set(value,4+secret.length),res.set(await digest("sha256",buf),32*iter)}return res.slice(0,bits>>3)}(new Uint8Array(await crypto.subtle.deriveBits({name:publicKey.algorithm.name,public:publicKey},privateKey,length)),keyLength,value)}function allowed(key){switch(key.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return"X25519"===key.algorithm.name}}async function pbes2kw_deriveKey(p2s,alg,p2c,key){if(!(p2s instanceof Uint8Array)||p2s.length<8)throw new JWEInvalid("PBES2 Salt Input must be 8 or more octets");const salt=((alg,p2sInput)=>concat(encoder.encode(alg),new Uint8Array([0]),p2sInput))(alg,p2s),keylen=parseInt(alg.slice(13,16),10),subtleAlg={hash:`SHA-${alg.slice(8,11)}`,iterations:p2c,name:"PBKDF2",salt},cryptoKey=await function pbes2kw_getCryptoKey(key,alg){return key instanceof Uint8Array?crypto.subtle.importKey("raw",key,"PBKDF2",!1,["deriveBits"]):(checkEncCryptoKey(key,alg,"deriveBits"),key)}(key,alg);return new Uint8Array(await crypto.subtle.deriveBits(subtleAlg,cryptoKey,keylen))}const check_key_length=(alg,key)=>{if(alg.startsWith("RS")||alg.startsWith("PS")){const{modulusLength}=key.algorithm;if("number"!=typeof modulusLength||modulusLength<2048)throw new TypeError(`${alg} requires key modulusLength to be 2048 bits or larger`)}},subtleAlgorithm=alg=>{switch(alg){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new JOSENotSupported(`alg ${alg} is not supported either by JOSE or your javascript runtime`)}};const jwk_to_key=async jwk=>{if(!jwk.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm,keyUsages}=function subtleMapping(jwk){let algorithm,keyUsages;switch(jwk.kty){case"RSA":switch(jwk.alg){case"PS256":case"PS384":case"PS512":algorithm={name:"RSA-PSS",hash:`SHA-${jwk.alg.slice(-3)}`},keyUsages=jwk.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":algorithm={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${jwk.alg.slice(-3)}`},keyUsages=jwk.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":algorithm={name:"RSA-OAEP",hash:`SHA-${parseInt(jwk.alg.slice(-3),10)||1}`},keyUsages=jwk.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(jwk.alg){case"ES256":algorithm={name:"ECDSA",namedCurve:"P-256"},keyUsages=jwk.d?["sign"]:["verify"];break;case"ES384":algorithm={name:"ECDSA",namedCurve:"P-384"},keyUsages=jwk.d?["sign"]:["verify"];break;case"ES512":algorithm={name:"ECDSA",namedCurve:"P-521"},keyUsages=jwk.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":algorithm={name:"ECDH",namedCurve:jwk.crv},keyUsages=jwk.d?["deriveBits"]:[];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(jwk.alg){case"Ed25519":case"EdDSA":algorithm={name:"Ed25519"},keyUsages=jwk.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":algorithm={name:jwk.crv},keyUsages=jwk.d?["deriveBits"]:[];break;default:throw new JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm,keyUsages}}(jwk),keyData={...jwk};return delete keyData.alg,delete keyData.use,crypto.subtle.importKey("jwk",keyData,algorithm,jwk.ext??!jwk.d,jwk.key_ops??keyUsages)};let cache;const handleJWK=async(key,jwk,alg,freeze=!1)=>{cache||=new WeakMap;let cached=cache.get(key);if(cached?.[alg])return cached[alg];const cryptoKey=await jwk_to_key({...jwk,alg});return freeze&&Object.freeze(key),cached?cached[alg]=cryptoKey:cache.set(key,{[alg]:cryptoKey}),cryptoKey},normalize_key=async(key,alg)=>{if(key instanceof Uint8Array)return key;if(isCryptoKey(key))return key;if(isKeyObject(key)){if("secret"===key.type)return key.export();if("toCryptoKey"in key&&"function"==typeof key.toCryptoKey)try{return((keyObject,alg)=>{cache||=new WeakMap;let cached=cache.get(keyObject);if(cached?.[alg])return cached[alg];const isPublic="public"===keyObject.type,extractable=!!isPublic;let cryptoKey;if("x25519"===keyObject.asymmetricKeyType){switch(alg){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}cryptoKey=keyObject.toCryptoKey(keyObject.asymmetricKeyType,extractable,isPublic?[]:["deriveBits"])}if("ed25519"===keyObject.asymmetricKeyType){if("EdDSA"!==alg&&"Ed25519"!==alg)throw new TypeError("given KeyObject instance cannot be used for this algorithm");cryptoKey=keyObject.toCryptoKey(keyObject.asymmetricKeyType,extractable,[isPublic?"verify":"sign"])}if("rsa"===keyObject.asymmetricKeyType){let hash;switch(alg){case"RSA-OAEP":hash="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":hash="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":hash="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":hash="SHA-512";break;default:throw new TypeError("given KeyObject instance cannot be used for this algorithm")}if(alg.startsWith("RSA-OAEP"))return keyObject.toCryptoKey({name:"RSA-OAEP",hash},extractable,isPublic?["encrypt"]:["decrypt"]);cryptoKey=keyObject.toCryptoKey({name:alg.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash},extractable,[isPublic?"verify":"sign"])}if("ec"===keyObject.asymmetricKeyType){const namedCurve=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(keyObject.asymmetricKeyDetails?.namedCurve);if(!namedCurve)throw new TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===alg&&"P-256"===namedCurve&&(cryptoKey=keyObject.toCryptoKey({name:"ECDSA",namedCurve},extractable,[isPublic?"verify":"sign"])),"ES384"===alg&&"P-384"===namedCurve&&(cryptoKey=keyObject.toCryptoKey({name:"ECDSA",namedCurve},extractable,[isPublic?"verify":"sign"])),"ES512"===alg&&"P-521"===namedCurve&&(cryptoKey=keyObject.toCryptoKey({name:"ECDSA",namedCurve},extractable,[isPublic?"verify":"sign"])),alg.startsWith("ECDH-ES")&&(cryptoKey=keyObject.toCryptoKey({name:"ECDH",namedCurve},extractable,isPublic?[]:["deriveBits"]))}if(!cryptoKey)throw new TypeError("given KeyObject instance cannot be used for this algorithm");return cached?cached[alg]=cryptoKey:cache.set(keyObject,{[alg]:cryptoKey}),cryptoKey})(key,alg)}catch(err){if(err instanceof TypeError)throw err}let jwk=key.export({format:"jwk"});return handleJWK(key,jwk,alg)}if(isJWK(key))return key.k?decode(key.k):handleJWK(key,key,alg,!0);throw new Error("unreachable")};function cek_bitLength(alg){switch(alg){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`)}}const lib_cek=alg=>crypto.getRandomValues(new Uint8Array(cek_bitLength(alg)>>3));async function cbcDecrypt(enc,cek,ciphertext,iv,tag,aad){if(!(cek instanceof Uint8Array))throw new TypeError(invalid_key_input(cek,"Uint8Array"));const keySize=parseInt(enc.slice(1,4),10),encKey=await crypto.subtle.importKey("raw",cek.subarray(keySize>>3),"AES-CBC",!1,["decrypt"]),macKey=await crypto.subtle.importKey("raw",cek.subarray(0,keySize>>3),{hash:"SHA-"+(keySize<<1),name:"HMAC"},!1,["sign"]),macData=concat(aad,iv,ciphertext,uint64be(aad.length<<3)),expectedTag=new Uint8Array((await crypto.subtle.sign("HMAC",macKey,macData)).slice(0,keySize>>3));let macCheckPassed,plaintext;try{macCheckPassed=await async function timingSafeEqual(a,b){if(!(a instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(b instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");const algorithm={name:"HMAC",hash:"SHA-256"},key=await crypto.subtle.generateKey(algorithm,!1,["sign"]),aHmac=new Uint8Array(await crypto.subtle.sign(algorithm,key,a)),bHmac=new Uint8Array(await crypto.subtle.sign(algorithm,key,b));let out=0,i=-1;for(;++i<32;)out|=aHmac[i]^bHmac[i];return 0===out}(tag,expectedTag)}catch{}if(!macCheckPassed)throw new JWEDecryptionFailed;try{plaintext=new Uint8Array(await crypto.subtle.decrypt({iv,name:"AES-CBC"},encKey,ciphertext))}catch{}if(!plaintext)throw new JWEDecryptionFailed;return plaintext}const lib_decrypt=async(enc,cek,ciphertext,iv,tag,aad)=>{if(!(isCryptoKey(cek)||cek instanceof Uint8Array))throw new TypeError(invalid_key_input(cek,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!iv)throw new JWEInvalid("JWE Initialization Vector missing");if(!tag)throw new JWEInvalid("JWE Authentication Tag missing");switch(check_iv_length(enc,iv),enc){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return cek instanceof Uint8Array&&check_cek_length(cek,parseInt(enc.slice(-3),10)),cbcDecrypt(enc,cek,ciphertext,iv,tag,aad);case"A128GCM":case"A192GCM":case"A256GCM":return cek instanceof Uint8Array&&check_cek_length(cek,parseInt(enc.slice(1,4),10)),async function gcmDecrypt(enc,cek,ciphertext,iv,tag,aad){let encKey;cek instanceof Uint8Array?encKey=await crypto.subtle.importKey("raw",cek,"AES-GCM",!1,["decrypt"]):(checkEncCryptoKey(cek,enc,"decrypt"),encKey=cek);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:aad,iv,name:"AES-GCM",tagLength:128},encKey,concat(ciphertext,tag)))}catch{throw new JWEDecryptionFailed}}(enc,cek,ciphertext,iv,tag,aad);default:throw new JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}};const encrypt_key_management=async(alg,enc,key,providedCek,providedParameters={})=>{let encryptedKey,parameters,cek;switch(alg){case"dir":cek=key;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(assertCryptoKey(key),!allowed(key))throw new JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu,apv}=providedParameters;let ephemeralKey;ephemeralKey=providedParameters.epk?await normalize_key(providedParameters.epk,alg):(await crypto.subtle.generateKey(key.algorithm,!0,["deriveBits"])).privateKey;const{x,y,crv,kty}=await exportJWK(ephemeralKey),sharedSecret=await deriveKey(key,ephemeralKey,"ECDH-ES"===alg?enc:alg,"ECDH-ES"===alg?cek_bitLength(enc):parseInt(alg.slice(-5,-2),10),apu,apv);if(parameters={epk:{x,crv,kty}},"EC"===kty&&(parameters.epk.y=y),apu&&(parameters.apu=encode(apu)),apv&&(parameters.apv=encode(apv)),"ECDH-ES"===alg){cek=sharedSecret;break}cek=providedCek||lib_cek(enc);const kwAlg=alg.slice(-6);encryptedKey=await wrap(kwAlg,sharedSecret,cek);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":cek=providedCek||lib_cek(enc),assertCryptoKey(key),encryptedKey=await async function rsaes_encrypt(alg,key,cek){return checkEncCryptoKey(key,alg,"encrypt"),check_key_length(alg,key),new Uint8Array(await crypto.subtle.encrypt(subtleAlgorithm(alg),key,cek))}(alg,key,cek);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{cek=providedCek||lib_cek(enc);const{p2c,p2s}=providedParameters;({encryptedKey,...parameters}=await async function pbes2kw_wrap(alg,key,cek,p2c=2048,p2s=crypto.getRandomValues(new Uint8Array(16))){const derived=await pbes2kw_deriveKey(p2s,alg,p2c,key);return{encryptedKey:await wrap(alg.slice(-6),derived,cek),p2c,p2s:encode(p2s)}}(alg,key,cek,p2c,p2s));break}case"A128KW":case"A192KW":case"A256KW":cek=providedCek||lib_cek(enc),encryptedKey=await wrap(alg,key,cek);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{cek=providedCek||lib_cek(enc);const{iv}=providedParameters;({encryptedKey,...parameters}=await async function aesgcmkw_wrap(alg,key,cek,iv){const jweAlgorithm=alg.slice(0,7),wrapped=await encrypt(jweAlgorithm,cek,key,iv,new Uint8Array(0));return{encryptedKey:wrapped.ciphertext,iv:encode(wrapped.iv),tag:encode(wrapped.tag)}}(alg,key,cek,iv));break}default:throw new JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek,encryptedKey,parameters}},is_disjoint=(...headers)=>{const sources=headers.filter(Boolean);if(0===sources.length||1===sources.length)return!0;let acc;for(const header of sources){const parameters=Object.keys(header);if(acc&&0!==acc.size)for(const parameter of parameters){if(acc.has(parameter))return!1;acc.add(parameter)}else acc=new Set(parameters)}return!0},validate_crit=(Err,recognizedDefault,recognizedOption,protectedHeader,joseHeader)=>{if(void 0!==joseHeader.crit&&void 0===protectedHeader?.crit)throw new Err('"crit" (Critical) Header Parameter MUST be integrity protected');if(!protectedHeader||void 0===protectedHeader.crit)return new Set;if(!Array.isArray(protectedHeader.crit)||0===protectedHeader.crit.length||protectedHeader.crit.some(input=>"string"!=typeof input||0===input.length))throw new Err('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let recognized;recognized=void 0!==recognizedOption?new Map([...Object.entries(recognizedOption),...recognizedDefault.entries()]):recognizedDefault;for(const parameter of protectedHeader.crit){if(!recognized.has(parameter))throw new JOSENotSupported(`Extension Header Parameter "${parameter}" is not recognized`);if(void 0===joseHeader[parameter])throw new Err(`Extension Header Parameter "${parameter}" is missing`);if(recognized.get(parameter)&&void 0===protectedHeader[parameter])throw new Err(`Extension Header Parameter "${parameter}" MUST be integrity protected`)}return new Set(protectedHeader.crit)},tag=key=>key?.[Symbol.toStringTag],jwkMatchesOp=(alg,key,usage)=>{if(void 0!==key.use){let expected;switch(usage){case"sign":case"verify":expected="sig";break;case"encrypt":case"decrypt":expected="enc"}if(key.use!==expected)throw new TypeError(`Invalid key for this operation, its "use" must be "${expected}" when present`)}if(void 0!==key.alg&&key.alg!==alg)throw new TypeError(`Invalid key for this operation, its "alg" must be "${alg}" when present`);if(Array.isArray(key.key_ops)){let expectedKeyOp;switch(!0){case"sign"===usage||"verify"===usage:case"dir"===alg:case alg.includes("CBC-HS"):expectedKeyOp=usage;break;case alg.startsWith("PBES2"):expectedKeyOp="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(alg):expectedKeyOp=!alg.includes("GCM")&&alg.endsWith("KW")?"encrypt"===usage?"wrapKey":"unwrapKey":usage;break;case"encrypt"===usage&&alg.startsWith("RSA"):expectedKeyOp="wrapKey";break;case"decrypt"===usage:expectedKeyOp=alg.startsWith("RSA")?"unwrapKey":"deriveBits"}if(expectedKeyOp&&!1===key.key_ops?.includes?.(expectedKeyOp))throw new TypeError(`Invalid key for this operation, its "key_ops" must include "${expectedKeyOp}" when present`)}return!0},check_key_type=(alg,key,usage)=>{alg.startsWith("HS")||"dir"===alg||alg.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(alg)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(alg)?((alg,key,usage)=>{if(!(key instanceof Uint8Array)){if(isJWK(key)){if(function isSecretJWK(key){return"oct"===key.kty&&"string"==typeof key.k}(key)&&jwkMatchesOp(alg,key,usage))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!is_key_like(key))throw new TypeError(withAlg(alg,key,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==key.type)throw new TypeError(`${tag(key)} instances for symmetric algorithms must be of type "secret"`)}})(alg,key,usage):((alg,key,usage)=>{if(isJWK(key))switch(usage){case"decrypt":case"sign":if(function isPrivateJWK(key){return"oct"!==key.kty&&"string"==typeof key.d}(key)&&jwkMatchesOp(alg,key,usage))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(function isPublicJWK(key){return"oct"!==key.kty&&void 0===key.d}(key)&&jwkMatchesOp(alg,key,usage))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!is_key_like(key))throw new TypeError(withAlg(alg,key,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===key.type)throw new TypeError(`${tag(key)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===key.type)switch(usage){case"sign":throw new TypeError(`${tag(key)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw new TypeError(`${tag(key)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===key.type)switch(usage){case"verify":throw new TypeError(`${tag(key)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw new TypeError(`${tag(key)} instances for asymmetric algorithm encryption must be of type "public"`)}})(alg,key,usage)};class FlattenedEncrypt{#plaintext;#protectedHeader;#sharedUnprotectedHeader;#unprotectedHeader;#aad;#cek;#iv;#keyManagementParameters;constructor(plaintext){if(!(plaintext instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this.#plaintext=plaintext}setKeyManagementParameters(parameters){if(this.#keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this.#keyManagementParameters=parameters,this}setProtectedHeader(protectedHeader){if(this.#protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.#protectedHeader=protectedHeader,this}setSharedUnprotectedHeader(sharedUnprotectedHeader){if(this.#sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this.#sharedUnprotectedHeader=sharedUnprotectedHeader,this}setUnprotectedHeader(unprotectedHeader){if(this.#unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.#unprotectedHeader=unprotectedHeader,this}setAdditionalAuthenticatedData(aad){return this.#aad=aad,this}setContentEncryptionKey(cek){if(this.#cek)throw new TypeError("setContentEncryptionKey can only be called once");return this.#cek=cek,this}setInitializationVector(iv){if(this.#iv)throw new TypeError("setInitializationVector can only be called once");return this.#iv=iv,this}async encrypt(key,options){if(!this.#protectedHeader&&!this.#unprotectedHeader&&!this.#sharedUnprotectedHeader)throw new JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!is_disjoint(this.#protectedHeader,this.#unprotectedHeader,this.#sharedUnprotectedHeader))throw new JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const joseHeader={...this.#protectedHeader,...this.#unprotectedHeader,...this.#sharedUnprotectedHeader};if(validate_crit(JWEInvalid,new Map,options?.crit,this.#protectedHeader,joseHeader),void 0!==joseHeader.zip)throw new JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg,enc}=joseHeader;if("string"!=typeof alg||!alg)throw new JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof enc||!enc)throw new JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let encryptedKey,cek,additionalData,protectedHeader,aadMember;if(this.#cek&&("dir"===alg||"ECDH-ES"===alg))throw new TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${alg}`);check_key_type("dir"===alg?enc:alg,key,"encrypt");{let parameters;const k=await normalize_key(key,alg);({cek,encryptedKey,parameters}=await encrypt_key_management(alg,enc,k,this.#cek,this.#keyManagementParameters)),parameters&&(options&&unprotected in options?this.#unprotectedHeader?this.#unprotectedHeader={...this.#unprotectedHeader,...parameters}:this.setUnprotectedHeader(parameters):this.#protectedHeader?this.#protectedHeader={...this.#protectedHeader,...parameters}:this.setProtectedHeader(parameters))}protectedHeader=this.#protectedHeader?encoder.encode(encode(JSON.stringify(this.#protectedHeader))):encoder.encode(""),this.#aad?(aadMember=encode(this.#aad),additionalData=concat(protectedHeader,encoder.encode("."),encoder.encode(aadMember))):additionalData=protectedHeader;const{ciphertext,tag,iv}=await encrypt(enc,this.#plaintext,cek,this.#iv,additionalData),jwe={ciphertext:encode(ciphertext)};return iv&&(jwe.iv=encode(iv)),tag&&(jwe.tag=encode(tag)),encryptedKey&&(jwe.encrypted_key=encode(encryptedKey)),aadMember&&(jwe.aad=aadMember),this.#protectedHeader&&(jwe.protected=decoder.decode(protectedHeader)),this.#sharedUnprotectedHeader&&(jwe.unprotected=this.#sharedUnprotectedHeader),this.#unprotectedHeader&&(jwe.header=this.#unprotectedHeader),jwe}}class CompactEncrypt{#flattened;constructor(plaintext){this.#flattened=new FlattenedEncrypt(plaintext)}setContentEncryptionKey(cek){return this.#flattened.setContentEncryptionKey(cek),this}setInitializationVector(iv){return this.#flattened.setInitializationVector(iv),this}setProtectedHeader(protectedHeader){return this.#flattened.setProtectedHeader(protectedHeader),this}setKeyManagementParameters(parameters){return this.#flattened.setKeyManagementParameters(parameters),this}async encrypt(key,options){const jwe=await this.#flattened.encrypt(key,options);return[jwe.protected,jwe.encrypted_key,jwe.iv,jwe.ciphertext,jwe.tag].join(".")}}const epoch=date=>Math.floor(date.getTime()/1e3),REGEX=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,secs=str=>{const matched=REGEX.exec(str);if(!matched||matched[4]&&matched[1])throw new TypeError("Invalid time period format");const value=parseFloat(matched[2]);let numericDate;switch(matched[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":numericDate=Math.round(value);break;case"minute":case"minutes":case"min":case"mins":case"m":numericDate=Math.round(60*value);break;case"hour":case"hours":case"hr":case"hrs":case"h":numericDate=Math.round(3600*value);break;case"day":case"days":case"d":numericDate=Math.round(86400*value);break;case"week":case"weeks":case"w":numericDate=Math.round(604800*value);break;default:numericDate=Math.round(31557600*value)}return"-"===matched[1]||"ago"===matched[4]?-numericDate:numericDate};function validateInput(label,input){if(!Number.isFinite(input))throw new TypeError(`Invalid ${label} input`);return input}const normalizeTyp=value=>value.includes("/")?value.toLowerCase():`application/${value.toLowerCase()}`;function validateClaimsSet(protectedHeader,encodedPayload,options={}){let payload;try{payload=JSON.parse(decoder.decode(encodedPayload))}catch{}if(!is_object(payload))throw new JWTInvalid("JWT Claims Set must be a top-level JSON object");const{typ}=options;if(typ&&("string"!=typeof protectedHeader.typ||normalizeTyp(protectedHeader.typ)!==normalizeTyp(typ)))throw new JWTClaimValidationFailed('unexpected "typ" JWT header value',payload,"typ","check_failed");const{requiredClaims=[],issuer,subject,audience,maxTokenAge}=options,presenceCheck=[...requiredClaims];void 0!==maxTokenAge&&presenceCheck.push("iat"),void 0!==audience&&presenceCheck.push("aud"),void 0!==subject&&presenceCheck.push("sub"),void 0!==issuer&&presenceCheck.push("iss");for(const claim of new Set(presenceCheck.reverse()))if(!(claim in payload))throw new JWTClaimValidationFailed(`missing required "${claim}" claim`,payload,claim,"missing");if(issuer&&!(Array.isArray(issuer)?issuer:[issuer]).includes(payload.iss))throw new JWTClaimValidationFailed('unexpected "iss" claim value',payload,"iss","check_failed");if(subject&&payload.sub!==subject)throw new JWTClaimValidationFailed('unexpected "sub" claim value',payload,"sub","check_failed");if(audience&&(audPayload=payload.aud,audOption="string"==typeof audience?[audience]:audience,!("string"==typeof audPayload?audOption.includes(audPayload):Array.isArray(audPayload)&&audOption.some(Set.prototype.has.bind(new Set(audPayload))))))throw new JWTClaimValidationFailed('unexpected "aud" claim value',payload,"aud","check_failed");var audPayload,audOption;let tolerance;switch(typeof options.clockTolerance){case"string":tolerance=secs(options.clockTolerance);break;case"number":tolerance=options.clockTolerance;break;case"undefined":tolerance=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate}=options,now=epoch(currentDate||new Date);if((void 0!==payload.iat||maxTokenAge)&&"number"!=typeof payload.iat)throw new JWTClaimValidationFailed('"iat" claim must be a number',payload,"iat","invalid");if(void 0!==payload.nbf){if("number"!=typeof payload.nbf)throw new JWTClaimValidationFailed('"nbf" claim must be a number',payload,"nbf","invalid");if(payload.nbf>now+tolerance)throw new JWTClaimValidationFailed('"nbf" claim timestamp check failed',payload,"nbf","check_failed")}if(void 0!==payload.exp){if("number"!=typeof payload.exp)throw new JWTClaimValidationFailed('"exp" claim must be a number',payload,"exp","invalid");if(payload.exp<=now-tolerance)throw new JWTExpired('"exp" claim timestamp check failed',payload,"exp","check_failed")}if(maxTokenAge){const age=now-payload.iat;if(age-tolerance>("number"==typeof maxTokenAge?maxTokenAge:secs(maxTokenAge)))throw new JWTExpired('"iat" claim timestamp check failed (too far in the past)',payload,"iat","check_failed");if(age<0-tolerance)throw new JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',payload,"iat","check_failed")}return payload}class JWTClaimsBuilder{#payload;constructor(payload){if(!is_object(payload))throw new TypeError("JWT Claims Set MUST be an object");this.#payload=structuredClone(payload)}data(){return encoder.encode(JSON.stringify(this.#payload))}get iss(){return this.#payload.iss}set iss(value){this.#payload.iss=value}get sub(){return this.#payload.sub}set sub(value){this.#payload.sub=value}get aud(){return this.#payload.aud}set aud(value){this.#payload.aud=value}set jti(value){this.#payload.jti=value}set nbf(value){"number"==typeof value?this.#payload.nbf=validateInput("setNotBefore",value):value instanceof Date?this.#payload.nbf=validateInput("setNotBefore",epoch(value)):this.#payload.nbf=epoch(new Date)+secs(value)}set exp(value){"number"==typeof value?this.#payload.exp=validateInput("setExpirationTime",value):value instanceof Date?this.#payload.exp=validateInput("setExpirationTime",epoch(value)):this.#payload.exp=epoch(new Date)+secs(value)}set iat(value){void 0===value?this.#payload.iat=epoch(new Date):value instanceof Date?this.#payload.iat=validateInput("setIssuedAt",epoch(value)):this.#payload.iat=validateInput("setIssuedAt","string"==typeof value?epoch(new Date)+secs(value):value)}}class EncryptJWT{#cek;#iv;#keyManagementParameters;#protectedHeader;#replicateIssuerAsHeader;#replicateSubjectAsHeader;#replicateAudienceAsHeader;#jwt;constructor(payload={}){this.#jwt=new JWTClaimsBuilder(payload)}setIssuer(issuer){return this.#jwt.iss=issuer,this}setSubject(subject){return this.#jwt.sub=subject,this}setAudience(audience){return this.#jwt.aud=audience,this}setJti(jwtId){return this.#jwt.jti=jwtId,this}setNotBefore(input){return this.#jwt.nbf=input,this}setExpirationTime(input){return this.#jwt.exp=input,this}setIssuedAt(input){return this.#jwt.iat=input,this}setProtectedHeader(protectedHeader){if(this.#protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.#protectedHeader=protectedHeader,this}setKeyManagementParameters(parameters){if(this.#keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this.#keyManagementParameters=parameters,this}setContentEncryptionKey(cek){if(this.#cek)throw new TypeError("setContentEncryptionKey can only be called once");return this.#cek=cek,this}setInitializationVector(iv){if(this.#iv)throw new TypeError("setInitializationVector can only be called once");return this.#iv=iv,this}replicateIssuerAsHeader(){return this.#replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this.#replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this.#replicateAudienceAsHeader=!0,this}async encrypt(key,options){const enc=new CompactEncrypt(this.#jwt.data());return this.#protectedHeader&&(this.#replicateIssuerAsHeader||this.#replicateSubjectAsHeader||this.#replicateAudienceAsHeader)&&(this.#protectedHeader={...this.#protectedHeader,iss:this.#replicateIssuerAsHeader?this.#jwt.iss:void 0,sub:this.#replicateSubjectAsHeader?this.#jwt.sub:void 0,aud:this.#replicateAudienceAsHeader?this.#jwt.aud:void 0}),enc.setProtectedHeader(this.#protectedHeader),this.#iv&&enc.setInitializationVector(this.#iv),this.#cek&&enc.setContentEncryptionKey(this.#cek),this.#keyManagementParameters&&enc.setKeyManagementParameters(this.#keyManagementParameters),enc.encrypt(key,options)}}const decrypt_key_management=async(alg,key,encryptedKey,joseHeader,options)=>{switch(alg){case"dir":if(void 0!==encryptedKey)throw new JWEInvalid("Encountered unexpected JWE Encrypted Key");return key;case"ECDH-ES":if(void 0!==encryptedKey)throw new JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!is_object(joseHeader.epk))throw new JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(assertCryptoKey(key),!allowed(key))throw new JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");const epk=await async function importJWK(jwk,alg,options){if(!is_object(jwk))throw new TypeError("JWK must be an object");let ext;switch(alg??=jwk.alg,ext??=options?.extractable??jwk.ext,jwk.kty){case"oct":if("string"!=typeof jwk.k||!jwk.k)throw new TypeError('missing "k" (Key Value) Parameter value');return decode(jwk.k);case"RSA":if("oth"in jwk&&void 0!==jwk.oth)throw new JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return jwk_to_key({...jwk,alg,ext});default:throw new JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}(joseHeader.epk,alg);let partyUInfo,partyVInfo;if(assertCryptoKey(epk),void 0!==joseHeader.apu){if("string"!=typeof joseHeader.apu)throw new JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{partyUInfo=decode(joseHeader.apu)}catch{throw new JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==joseHeader.apv){if("string"!=typeof joseHeader.apv)throw new JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{partyVInfo=decode(joseHeader.apv)}catch{throw new JWEInvalid("Failed to base64url decode the apv")}}const sharedSecret=await deriveKey(epk,key,"ECDH-ES"===alg?joseHeader.enc:alg,"ECDH-ES"===alg?cek_bitLength(joseHeader.enc):parseInt(alg.slice(-5,-2),10),partyUInfo,partyVInfo);if("ECDH-ES"===alg)return sharedSecret;if(void 0===encryptedKey)throw new JWEInvalid("JWE Encrypted Key missing");return unwrap(alg.slice(-6),sharedSecret,encryptedKey)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===encryptedKey)throw new JWEInvalid("JWE Encrypted Key missing");return assertCryptoKey(key),async function decrypt(alg,key,encryptedKey){return checkEncCryptoKey(key,alg,"decrypt"),check_key_length(alg,key),new Uint8Array(await crypto.subtle.decrypt(subtleAlgorithm(alg),key,encryptedKey))}(alg,key,encryptedKey);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(void 0===encryptedKey)throw new JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof joseHeader.p2c)throw new JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');const p2cLimit=options?.maxPBES2Count||1e4;if(joseHeader.p2c>p2cLimit)throw new JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof joseHeader.p2s)throw new JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let p2s;try{p2s=decode(joseHeader.p2s)}catch{throw new JWEInvalid("Failed to base64url decode the p2s")}return async function pbes2kw_unwrap(alg,key,encryptedKey,p2c,p2s){const derived=await pbes2kw_deriveKey(p2s,alg,p2c,key);return unwrap(alg.slice(-6),derived,encryptedKey)}(alg,key,encryptedKey,joseHeader.p2c,p2s)}case"A128KW":case"A192KW":case"A256KW":if(void 0===encryptedKey)throw new JWEInvalid("JWE Encrypted Key missing");return unwrap(alg,key,encryptedKey);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(void 0===encryptedKey)throw new JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof joseHeader.iv)throw new JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof joseHeader.tag)throw new JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');let iv,tag;try{iv=decode(joseHeader.iv)}catch{throw new JWEInvalid("Failed to base64url decode the iv")}try{tag=decode(joseHeader.tag)}catch{throw new JWEInvalid("Failed to base64url decode the tag")}return async function aesgcmkw_unwrap(alg,key,encryptedKey,iv,tag){const jweAlgorithm=alg.slice(0,7);return lib_decrypt(jweAlgorithm,key,encryptedKey,iv,tag,new Uint8Array(0))}(alg,key,encryptedKey,iv,tag)}default:throw new JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}},validate_algorithms=(option,algorithms)=>{if(void 0!==algorithms&&(!Array.isArray(algorithms)||algorithms.some(s=>"string"!=typeof s)))throw new TypeError(`"${option}" option must be an array of strings`);if(algorithms)return new Set(algorithms)};async function compactDecrypt(jwe,key,options){if(jwe instanceof Uint8Array&&(jwe=decoder.decode(jwe)),"string"!=typeof jwe)throw new JWEInvalid("Compact JWE must be a string or Uint8Array");const{0:protectedHeader,1:encryptedKey,2:iv,3:ciphertext,4:tag,length}=jwe.split(".");if(5!==length)throw new JWEInvalid("Invalid Compact JWE");const decrypted=await async function flattenedDecrypt(jwe,key,options){if(!is_object(jwe))throw new JWEInvalid("Flattened JWE must be an object");if(void 0===jwe.protected&&void 0===jwe.header&&void 0===jwe.unprotected)throw new JWEInvalid("JOSE Header missing");if(void 0!==jwe.iv&&"string"!=typeof jwe.iv)throw new JWEInvalid("JWE Initialization Vector incorrect type");if("string"!=typeof jwe.ciphertext)throw new JWEInvalid("JWE Ciphertext missing or incorrect type");if(void 0!==jwe.tag&&"string"!=typeof jwe.tag)throw new JWEInvalid("JWE Authentication Tag incorrect type");if(void 0!==jwe.protected&&"string"!=typeof jwe.protected)throw new JWEInvalid("JWE Protected Header incorrect type");if(void 0!==jwe.encrypted_key&&"string"!=typeof jwe.encrypted_key)throw new JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==jwe.aad&&"string"!=typeof jwe.aad)throw new JWEInvalid("JWE AAD incorrect type");if(void 0!==jwe.header&&!is_object(jwe.header))throw new JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==jwe.unprotected&&!is_object(jwe.unprotected))throw new JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");let parsedProt;if(jwe.protected)try{const protectedHeader=decode(jwe.protected);parsedProt=JSON.parse(decoder.decode(protectedHeader))}catch{throw new JWEInvalid("JWE Protected Header is invalid")}if(!is_disjoint(parsedProt,jwe.header,jwe.unprotected))throw new JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const joseHeader={...parsedProt,...jwe.header,...jwe.unprotected};if(validate_crit(JWEInvalid,new Map,options?.crit,parsedProt,joseHeader),void 0!==joseHeader.zip)throw new JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg,enc}=joseHeader;if("string"!=typeof alg||!alg)throw new JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof enc||!enc)throw new JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");const keyManagementAlgorithms=options&&validate_algorithms("keyManagementAlgorithms",options.keyManagementAlgorithms),contentEncryptionAlgorithms=options&&validate_algorithms("contentEncryptionAlgorithms",options.contentEncryptionAlgorithms);if(keyManagementAlgorithms&&!keyManagementAlgorithms.has(alg)||!keyManagementAlgorithms&&alg.startsWith("PBES2"))throw new JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(contentEncryptionAlgorithms&&!contentEncryptionAlgorithms.has(enc))throw new JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter value not allowed');let encryptedKey;if(void 0!==jwe.encrypted_key)try{encryptedKey=decode(jwe.encrypted_key)}catch{throw new JWEInvalid("Failed to base64url decode the encrypted_key")}let resolvedKey=!1;"function"==typeof key&&(key=await key(parsedProt,jwe),resolvedKey=!0),check_key_type("dir"===alg?enc:alg,key,"decrypt");const k=await normalize_key(key,alg);let cek,iv,tag;try{cek=await decrypt_key_management(alg,k,encryptedKey,joseHeader,options)}catch(err){if(err instanceof TypeError||err instanceof JWEInvalid||err instanceof JOSENotSupported)throw err;cek=lib_cek(enc)}if(void 0!==jwe.iv)try{iv=decode(jwe.iv)}catch{throw new JWEInvalid("Failed to base64url decode the iv")}if(void 0!==jwe.tag)try{tag=decode(jwe.tag)}catch{throw new JWEInvalid("Failed to base64url decode the tag")}const protectedHeader=encoder.encode(jwe.protected??"");let additionalData,ciphertext;additionalData=void 0!==jwe.aad?concat(protectedHeader,encoder.encode("."),encoder.encode(jwe.aad)):protectedHeader;try{ciphertext=decode(jwe.ciphertext)}catch{throw new JWEInvalid("Failed to base64url decode the ciphertext")}const result={plaintext:await lib_decrypt(enc,cek,ciphertext,iv,tag,additionalData)};if(void 0!==jwe.protected&&(result.protectedHeader=parsedProt),void 0!==jwe.aad)try{result.additionalAuthenticatedData=decode(jwe.aad)}catch{throw new JWEInvalid("Failed to base64url decode the aad")}return void 0!==jwe.unprotected&&(result.sharedUnprotectedHeader=jwe.unprotected),void 0!==jwe.header&&(result.unprotectedHeader=jwe.header),resolvedKey?{...result,key:k}:result}({ciphertext,iv:iv||void 0,protected:protectedHeader,tag:tag||void 0,encrypted_key:encryptedKey||void 0},key,options),result={plaintext:decrypted.plaintext,protectedHeader:decrypted.protectedHeader};return"function"==typeof key?{...result,key:decrypted.key}:result}const cookieNameRegExp=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,cookieValueRegExp=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,domainValueRegExp=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,pathValueRegExp=/^[\u0020-\u003A\u003D-\u007E]*$/,__toString=Object.prototype.toString,NullObject=(()=>{const C=function(){};return C.prototype=Object.create(null),C})();function parse(str,options){const obj=new NullObject,len=str.length;if(len<2)return obj;const dec=options?.decode||cookie_decode;let index=0;do{const eqIdx=str.indexOf("=",index);if(-1===eqIdx)break;const colonIdx=str.indexOf(";",index),endIdx=-1===colonIdx?len:colonIdx;if(eqIdx>endIdx){index=str.lastIndexOf(";",eqIdx-1)+1;continue}const keyStartIdx=startIndex(str,index,eqIdx),keyEndIdx=endIndex(str,eqIdx,keyStartIdx),key=str.slice(keyStartIdx,keyEndIdx);if(void 0===obj[key]){let valStartIdx=startIndex(str,eqIdx+1,endIdx),valEndIdx=endIndex(str,endIdx,valStartIdx);const value=dec(str.slice(valStartIdx,valEndIdx));obj[key]=value}index=endIdx+1}while(index<len);return obj}function startIndex(str,index,max){do{const code=str.charCodeAt(index);if(32!==code&&9!==code)return index}while(++index<max);return max}function endIndex(str,index,min){for(;index>min;){const code=str.charCodeAt(--index);if(32!==code&&9!==code)return index+1}return min}function serialize(name,val,options){const enc=options?.encode||encodeURIComponent;if(!cookieNameRegExp.test(name))throw new TypeError(`argument name is invalid: ${name}`);const value=enc(val);if(!cookieValueRegExp.test(value))throw new TypeError(`argument val is invalid: ${val}`);let str=name+"="+value;if(!options)return str;if(void 0!==options.maxAge){if(!Number.isInteger(options.maxAge))throw new TypeError(`option maxAge is invalid: ${options.maxAge}`);str+="; Max-Age="+options.maxAge}if(options.domain){if(!domainValueRegExp.test(options.domain))throw new TypeError(`option domain is invalid: ${options.domain}`);str+="; Domain="+options.domain}if(options.path){if(!pathValueRegExp.test(options.path))throw new TypeError(`option path is invalid: ${options.path}`);str+="; Path="+options.path}if(options.expires){if(!function isDate(val){return"[object Date]"===__toString.call(val)}(options.expires)||!Number.isFinite(options.expires.valueOf()))throw new TypeError(`option expires is invalid: ${options.expires}`);str+="; Expires="+options.expires.toUTCString()}if(options.httpOnly&&(str+="; HttpOnly"),options.secure&&(str+="; Secure"),options.partitioned&&(str+="; Partitioned"),options.priority){switch("string"==typeof options.priority?options.priority.toLowerCase():void 0){case"low":str+="; Priority=Low";break;case"medium":str+="; Priority=Medium";break;case"high":str+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${options.priority}`)}}if(options.sameSite){switch("string"==typeof options.sameSite?options.sameSite.toLowerCase():options.sameSite){case!0:case"strict":str+="; SameSite=Strict";break;case"lax":str+="; SameSite=Lax";break;case"none":str+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${options.sameSite}`)}}return str}function cookie_decode(str){if(-1===str.indexOf("%"))return str;try{return decodeURIComponent(str)}catch(e){return str}}__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const{q:parseCookie}=vendored_cookie_namespaceObject,DEFAULT_MAX_AGE=2592e3,now=()=>Date.now()/1e3|0,alg="dir",enc="A256CBC-HS512";async function jwt_encode(params){const{token={},secret,maxAge=DEFAULT_MAX_AGE,salt}=params,secrets=Array.isArray(secret)?secret:[secret],encryptionSecret=await getDerivedEncryptionKey(enc,secrets[0],salt),thumbprint=await calculateJwkThumbprint({kty:"oct",k:encode(encryptionSecret)},"sha"+(encryptionSecret.byteLength<<3));return await new EncryptJWT(token).setProtectedHeader({alg,enc,kid:thumbprint}).setIssuedAt().setExpirationTime(now()+maxAge).setJti(crypto.randomUUID()).encrypt(encryptionSecret)}async function jwt_decode(params){const{token,secret,salt}=params,secrets=Array.isArray(secret)?secret:[secret];if(!token)return null;const{payload}=await async function jwtDecrypt(jwt,key,options){const decrypted=await compactDecrypt(jwt,key,options),payload=validateClaimsSet(decrypted.protectedHeader,decrypted.plaintext,options),{protectedHeader}=decrypted;if(void 0!==protectedHeader.iss&&protectedHeader.iss!==payload.iss)throw new JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',payload,"iss","mismatch");if(void 0!==protectedHeader.sub&&protectedHeader.sub!==payload.sub)throw new JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',payload,"sub","mismatch");if(void 0!==protectedHeader.aud&&JSON.stringify(protectedHeader.aud)!==JSON.stringify(payload.aud))throw new JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',payload,"aud","mismatch");const result={payload,protectedHeader};return"function"==typeof key?{...result,key:decrypted.key}:result}(token,async({kid,enc})=>{for(const secret of secrets){const encryptionSecret=await getDerivedEncryptionKey(enc,secret,salt);if(void 0===kid)return encryptionSecret;if(kid===await calculateJwkThumbprint({kty:"oct",k:encode(encryptionSecret)},"sha"+(encryptionSecret.byteLength<<3)))return encryptionSecret}throw new Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:[alg],contentEncryptionAlgorithms:[enc,"A256GCM"]});return payload}async function getDerivedEncryptionKey(enc,keyMaterial,salt){let length;switch(enc){case"A256CBC-HS512":length=64;break;case"A256GCM":length=32;break;default:throw new Error("Unsupported JWT Content Encryption Algorithm")}return await web_hkdf("sha256",keyMaterial,salt,`Auth.js Generated Encryption Key (${salt})`,length)}var logger_console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const defaultLogger={error(error){const name=error instanceof errors.lR?error.type:error.name;if(logger_console.error(`[31m[auth][error][0m ${name}: ${error.message}`),error.cause&&"object"==typeof error.cause&&"err"in error.cause&&error.cause.err instanceof Error){const{err,...data}=error.cause;logger_console.error("[31m[auth][cause][0m:",err.stack),data&&logger_console.error("[31m[auth][details][0m:",JSON.stringify(data,null,2))}else error.stack&&logger_console.error(error.stack.replace(/.*/,"").substring(1))},warn(code){logger_console.warn(`[33m[auth][warn][${code}][0m`,"Read more: https://warnings.authjs.dev")},debug(message,metadata){logger_console.log(`[90m[auth][debug]:[0m ${message}`,JSON.stringify(metadata,null,2))}};function setLogger(config){const newLogger={...defaultLogger};return config.debug||(newLogger.debug=()=>{}),config.logger?.error&&(newLogger.error=config.logger.error),config.logger?.warn&&(newLogger.warn=config.logger.warn),config.logger?.debug&&(newLogger.debug=config.logger.debug),config.logger??(config.logger=newLogger),newLogger}const actions=["providers","session","csrf","signin","signout","callback","verify-request","error","webauthn-options"];const{q:web_parseCookie,l:serializeCookie}=vendored_cookie_namespaceObject;async function getBody(req){if(!("body"in req)||!req.body||"POST"!==req.method)return;const contentType=req.headers.get("content-type");if(contentType?.includes("application/json"))return await req.json();if(contentType?.includes("application/x-www-form-urlencoded")){const params=new URLSearchParams(await req.text());return Object.fromEntries(params)}}async function toInternalRequest(req,config){try{if("GET"!==req.method&&"POST"!==req.method)throw new errors.P8("Only GET and POST requests are supported");config.basePath??(config.basePath="/auth");const url=new URL(req.url),{action,providerId}=function parseActionAndProviderId(pathname,base){const a=pathname.match(new RegExp(`^${base}(.+)`));if(null===a)throw new errors.P8(`Cannot parse action at ${pathname}`);const actionAndProviderId=a.at(-1),b=actionAndProviderId.replace(/^\//,"").split("/").filter(Boolean);if(1!==b.length&&2!==b.length)throw new errors.P8(`Cannot parse action at ${pathname}`);const[action,providerId]=b;if(!function isAuthAction(action){return actions.includes(action)}(action))throw new errors.P8(`Cannot parse action at ${pathname}`);if(providerId&&!["signin","callback","webauthn-options"].includes(action))throw new errors.P8(`Cannot parse action at ${pathname}`);return{action,providerId}}(url.pathname,config.basePath);return{url,action,providerId,method:req.method,headers:Object.fromEntries(req.headers),body:req.body?await getBody(req):void 0,cookies:web_parseCookie(req.headers.get("cookie")??"")??{},error:url.searchParams.get("error")??void 0,query:Object.fromEntries(url.searchParams)}}catch(e){const logger=setLogger(config);logger.error(e),logger.debug("request",req)}}function toRequest(request){return new Request(request.url,{headers:request.headers,method:request.method,body:"POST"===request.method?JSON.stringify(request.body??{}):void 0})}function toResponse(res){const headers=new Headers(res.headers);res.cookies?.forEach(cookie=>{const{name,value,options}=cookie,cookieHeader=serializeCookie(name,value,options);headers.has("Set-Cookie")?headers.append("Set-Cookie",cookieHeader):headers.set("Set-Cookie",cookieHeader)});let body=res.body;"application/json"===headers.get("content-type")?body=JSON.stringify(res.body):"application/x-www-form-urlencoded"===headers.get("content-type")&&(body=new URLSearchParams(res.body).toString());const status=res.redirect?302:res.status??200,response=new Response(body,{headers,status});return res.redirect&&response.headers.set("Location",res.redirect),response}async function createHash(message){const data=(new TextEncoder).encode(message),hash=await crypto.subtle.digest("SHA-256",data);return Array.from(new Uint8Array(hash)).map(b=>b.toString(16).padStart(2,"0")).join("").toString()}function randomString(size){const bytes=crypto.getRandomValues(new Uint8Array(size));return Array.from(bytes).reduce((a,i)=>a+(i=>("0"+i.toString(16)).slice(-2))(i),"")}function validateCSRF(action,verified){if(!verified)throw new errors.dy(`CSRF token was missing during an action ${action}`)}function isObject(item){return null!==item&&"object"==typeof item}function merge(target,...sources){if(!sources.length)return target;const source=sources.shift();if(isObject(target)&&isObject(source))for(const key in source)isObject(source[key])?(isObject(target[key])||(target[key]=Array.isArray(source[key])?[]:{}),merge(target[key],source[key])):void 0!==source[key]&&(target[key]=source[key]);return merge(target,...sources)}const skipCSRFCheck=Symbol("skip-csrf-check"),raw=Symbol("return-type-raw"),customFetch=Symbol("custom-fetch"),conformInternal=Symbol("conform-internal");function parseProviders(params){const{providerId,config}=params,url=new URL(config.basePath??"/auth",params.url.origin),providers=config.providers.map(p=>{const provider="function"==typeof p?p():p,{options:userOptions,...defaults}=provider,id=userOptions?.id??defaults.id,merged=merge(defaults,userOptions,{signinUrl:`${url}/signin/${id}`,callbackUrl:`${url}/callback/${id}`});if("oauth"===provider.type||"oidc"===provider.type){merged.redirectProxyUrl??(merged.redirectProxyUrl=userOptions?.redirectProxyUrl??config.redirectProxyUrl);const normalized=function normalizeOAuth(c){c.issuer&&(c.wellKnown??(c.wellKnown=`${c.issuer}/.well-known/openid-configuration`));const authorization=normalizeEndpoint(c.authorization,c.issuer);authorization&&!authorization.url?.searchParams.has("scope")&&authorization.url.searchParams.set("scope","openid profile email");const token=normalizeEndpoint(c.token,c.issuer),userinfo=normalizeEndpoint(c.userinfo,c.issuer),checks=c.checks??["pkce"];c.redirectProxyUrl&&(checks.includes("state")||checks.push("state"),c.redirectProxyUrl=`${c.redirectProxyUrl}/callback/${c.id}`);return{...c,authorization,token,checks,userinfo,profile:c.profile??defaultProfile,account:c.account??defaultAccount}}(merged);return"form_post"===normalized.authorization?.url.searchParams.get("response_mode")&&delete normalized.redirectProxyUrl,normalized[customFetch]??(normalized[customFetch]=userOptions?.[customFetch]),normalized}return merged}),provider=providers.find(({id})=>id===providerId);if(providerId&&!provider){const availableProviders=providers.map(p=>p.id).join(", ");throw new Error(`Provider with id "${providerId}" not found. Available providers: [${availableProviders}].`)}return{providers,provider}}const defaultProfile=profile=>stripUndefined({id:profile.sub??profile.id??crypto.randomUUID(),name:profile.name??profile.nickname??profile.preferred_username,email:profile.email,image:profile.picture}),defaultAccount=account=>stripUndefined({access_token:account.access_token,id_token:account.id_token,refresh_token:account.refresh_token,expires_at:account.expires_at,scope:account.scope,token_type:account.token_type,session_state:account.session_state});function stripUndefined(o){const result={};for(const[k,v]of Object.entries(o))void 0!==v&&(result[k]=v);return result}function normalizeEndpoint(e,issuer){if(!e&&issuer)return;if("string"==typeof e)return{url:new URL(e)};const url=new URL(e?.url??"https://authjs.dev");if(null!=e?.params)for(let[key,value]of Object.entries(e.params))"claims"===key&&(value=JSON.stringify(value)),url.searchParams.set(key,String(value));return{url,request:e?.request,conform:e?.conform,...e?.clientPrivateKey?{clientPrivateKey:e?.clientPrivateKey}:null}}const defaultCallbacks={signIn:()=>!0,redirect:({url,baseUrl})=>url.startsWith("/")?`${baseUrl}${url}`:new URL(url).origin===baseUrl?url:baseUrl,session:({session})=>({user:{name:session.user?.name,email:session.user?.email,image:session.user?.image},expires:session.expires?.toISOString?.()??session.expires}),jwt:({token})=>token};async function init({authOptions:config,providerId,action,url,cookies:reqCookies,callbackUrl:reqCallbackUrl,csrfToken:reqCsrfToken,csrfDisabled,isPost}){const logger=setLogger(config),{providers,provider}=parseProviders({url,providerId,config});let isOnRedirectProxy=!1;if(("oauth"===provider?.type||"oidc"===provider?.type)&&provider.redirectProxyUrl)try{isOnRedirectProxy=new URL(provider.redirectProxyUrl).origin===url.origin}catch{throw new TypeError(`redirectProxyUrl must be a valid URL. Received: ${provider.redirectProxyUrl}`)}const options={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...config,url,action,provider,cookies:merge(cookie_defaultCookies(config.useSecureCookies??"https:"===url.protocol),config.cookies),providers,session:{strategy:config.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>crypto.randomUUID(),...config.session},jwt:{secret:config.secret,maxAge:config.session?.maxAge??2592e3,encode:jwt_encode,decode:jwt_decode,...config.jwt},events:eventsErrorHandler(config.events??{},logger),adapter:adapterErrorHandler(config.adapter,logger),callbacks:{...defaultCallbacks,...config.callbacks},logger,callbackUrl:url.origin,isOnRedirectProxy,experimental:{...config.experimental}},cookies=[];if(csrfDisabled)options.csrfTokenVerified=!0;else{const{csrfToken,cookie:csrfCookie,csrfTokenVerified}=await async function createCSRFToken({options,cookieValue,isPost,bodyValue}){if(cookieValue){const[csrfToken,csrfTokenHash]=cookieValue.split("|");if(csrfTokenHash===await createHash(`${csrfToken}${options.secret}`))return{csrfTokenVerified:isPost&&csrfToken===bodyValue,csrfToken}}const csrfToken=randomString(32);return{cookie:`${csrfToken}|${await createHash(`${csrfToken}${options.secret}`)}`,csrfToken}}({options,cookieValue:reqCookies?.[options.cookies.csrfToken.name],isPost,bodyValue:reqCsrfToken});options.csrfToken=csrfToken,options.csrfTokenVerified=csrfTokenVerified,csrfCookie&&cookies.push({name:options.cookies.csrfToken.name,value:csrfCookie,options:options.cookies.csrfToken.options})}const{callbackUrl,callbackUrlCookie}=await async function createCallbackUrl({options,paramValue,cookieValue}){const{url,callbacks}=options;let callbackUrl=url.origin;return paramValue?callbackUrl=await callbacks.redirect({url:paramValue,baseUrl:url.origin}):cookieValue&&(callbackUrl=await callbacks.redirect({url:cookieValue,baseUrl:url.origin})),{callbackUrl,callbackUrlCookie:callbackUrl!==cookieValue?callbackUrl:void 0}}({options,cookieValue:reqCookies?.[options.cookies.callbackUrl.name],paramValue:reqCallbackUrl});return options.callbackUrl=callbackUrl,callbackUrlCookie&&cookies.push({name:options.cookies.callbackUrl.name,value:callbackUrlCookie,options:options.cookies.callbackUrl.options}),{options,cookies}}function eventsErrorHandler(methods,logger){return Object.keys(methods).reduce((acc,name)=>(acc[name]=async(...args)=>{try{const method=methods[name];return await method(...args)}catch(e){logger.error(new errors.PM(e))}},acc),{})}function adapterErrorHandler(adapter,logger){if(adapter)return Object.keys(adapter).reduce((acc,name)=>(acc[name]=async(...args)=>{try{logger.debug(`adapter_${name}`,{args});const method=adapter[name];return await method(...args)}catch(e){const error=new errors.om(e);throw logger.error(error),error}},acc),{})}var preact_module_n,preact_module_l,u,i,o,preact_module_r,f,preact_module_e,c,s,h={},v=[],p=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,y=Array.isArray;function d(n,l){for(var u in l)n[u]=l[u];return n}function w(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function _(l,u,t){var i,o,r,f={};for(r in u)"key"==r?i=u[r]:"ref"==r?o=u[r]:f[r]=u[r];if(arguments.length>2&&(f.children=arguments.length>3?preact_module_n.call(arguments,2):t),"function"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===f[r]&&(f[r]=l.defaultProps[r]);return g(l,f,i,o,null)}function g(n,t,i,o,r){var f={type:n,props:t,key:i,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==r?++u:r,__i:-1,__u:0};return null==r&&null!=preact_module_l.vnode&&preact_module_l.vnode(f),f}function preact_module_b(n){return n.children}function k(n,l){this.props=n,this.context=l}function x(n,l){if(null==l)return n.__?x(n.__,n.__i+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return"function"==typeof n.type?x(n):null}function C(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return C(n)}}function S(n){(!n.__d&&(n.__d=!0)&&i.push(n)&&!M.__r++||o!==preact_module_l.debounceRendering)&&((o=preact_module_l.debounceRendering)||preact_module_r)(M)}function M(){var n,u,t,o,r,e,c,s;for(i.sort(f);n=i.shift();)n.__d&&(u=i.length,o=void 0,e=(r=(t=n).__v).__e,c=[],s=[],t.__P&&((o=d({},r)).__v=r.__v+1,preact_module_l.vnode&&preact_module_l.vnode(o),O(t.__P,o,r,t.__n,t.__P.namespaceURI,32&r.__u?[e]:null,c,null==e?x(r):e,!!(32&r.__u),s),o.__v=r.__v,o.__.__k[o.__i]=o,j(c,o,s),o.__e!=e&&C(o)),i.length>u&&i.sort(f));M.__r=0}function P(n,l,u,t,i,o,r,f,e,c,s){var a,p,y,d,w,_=t&&t.__k||v,g=l.length;for(u.__d=e,$(u,l,_),e=u.__d,a=0;a<g;a++)null!=(y=u.__k[a])&&(p=-1===y.__i?h:_[y.__i]||h,y.__i=a,O(n,y,p,i,o,r,f,e,c,s),d=y.__e,y.ref&&p.ref!=y.ref&&(p.ref&&N(p.ref,null,y),s.push(y.ref,y.__c||d,y)),null==w&&null!=d&&(w=d),65536&y.__u||p.__k===y.__k?e=I(y,e,n):"function"==typeof y.type&&void 0!==y.__d?e=y.__d:d&&(e=d.nextSibling),y.__d=void 0,y.__u&=-196609);u.__d=e,u.__e=w}function $(n,l,u){var t,i,o,r,f,e=l.length,c=u.length,s=c,a=0;for(n.__k=[],t=0;t<e;t++)null!=(i=l[t])&&"boolean"!=typeof i&&"function"!=typeof i?(r=t+a,(i=n.__k[t]="string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?g(null,i,null,null,null):y(i)?g(preact_module_b,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?g(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=n,i.__b=n.__b+1,o=null,-1!==(f=i.__i=L(i,u,r,s))&&(s--,(o=u[f])&&(o.__u|=131072)),null==o||null===o.__v?(-1==f&&a--,"function"!=typeof i.type&&(i.__u|=65536)):f!==r&&(f==r-1?a--:f==r+1?a++:(f>r?a--:a++,i.__u|=65536))):i=n.__k[t]=null;if(s)for(t=0;t<c;t++)null!=(o=u[t])&&!(131072&o.__u)&&(o.__e==n.__d&&(n.__d=x(o)),V(o,o))}function I(n,l,u){var t,i;if("function"==typeof n.type){for(t=n.__k,i=0;t&&i<t.length;i++)t[i]&&(t[i].__=n,l=I(t[i],l,u));return l}n.__e!=l&&(l&&n.type&&!u.contains(l)&&(l=x(n)),u.insertBefore(n.__e,l||null),l=n.__e);do{l=l&&l.nextSibling}while(null!=l&&8===l.nodeType);return l}function L(n,l,u,t){var i=n.key,o=n.type,r=u-1,f=u+1,e=l[u];if(null===e||e&&i==e.key&&o===e.type&&!(131072&e.__u))return u;if(t>(null==e||131072&e.__u?0:1))for(;r>=0||f<l.length;){if(r>=0){if((e=l[r])&&!(131072&e.__u)&&i==e.key&&o===e.type)return r;r--}if(f<l.length){if((e=l[f])&&!(131072&e.__u)&&i==e.key&&o===e.type)return f;f++}}return-1}function T(n,l,u){"-"===l[0]?n.setProperty(l,null==u?"":u):n[l]=null==u?"":"number"!=typeof u||p.test(l)?u:u+"px"}function A(n,l,u,t,i){var o;n:if("style"===l)if("string"==typeof u)n.style.cssText=u;else{if("string"==typeof t&&(n.style.cssText=t=""),t)for(l in t)u&&l in u||T(n.style,l,"");if(u)for(l in u)t&&u[l]===t[l]||T(n.style,l,u[l])}else if("o"===l[0]&&"n"===l[1])o=l!==(l=l.replace(/(PointerCapture)$|Capture$/i,"$1")),l=l.toLowerCase()in n||"onFocusOut"===l||"onFocusIn"===l?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?t?u.u=t.u:(u.u=preact_module_e,n.addEventListener(l,o?s:c,o)):n.removeEventListener(l,o?s:c,o);else{if("http://www.w3.org/2000/svg"==i)l=l.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=l&&"height"!=l&&"href"!=l&&"list"!=l&&"form"!=l&&"tabIndex"!=l&&"download"!=l&&"rowSpan"!=l&&"colSpan"!=l&&"role"!=l&&"popover"!=l&&l in n)try{n[l]=null==u?"":u;break n}catch(n){}"function"==typeof u||(null==u||!1===u&&"-"!==l[4]?n.removeAttribute(l):n.setAttribute(l,"popover"==l&&1==u?"":u))}}function F(n){return function(u){if(this.l){var t=this.l[u.type+n];if(null==u.t)u.t=preact_module_e++;else if(u.t<t.u)return;return t(preact_module_l.event?preact_module_l.event(u):u)}}}function O(n,u,t,i,o,r,f,e,c,s){var a,h,v,p,w,_,g,m,x,C,S,M,$,I,H,L,T=u.type;if(void 0!==u.constructor)return null;128&t.__u&&(c=!!(32&t.__u),r=[e=u.__e=t.__e]),(a=preact_module_l.__b)&&a(u);n:if("function"==typeof T)try{if(m=u.props,x="prototype"in T&&T.prototype.render,C=(a=T.contextType)&&i[a.__c],S=a?C?C.props.value:a.__:i,t.__c?g=(h=u.__c=t.__c).__=h.__E:(x?u.__c=h=new T(m,S):(u.__c=h=new k(m,S),h.constructor=T,h.render=q),C&&C.sub(h),h.props=m,h.state||(h.state={}),h.context=S,h.__n=i,v=h.__d=!0,h.__h=[],h._sb=[]),x&&null==h.__s&&(h.__s=h.state),x&&null!=T.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=d({},h.__s)),d(h.__s,T.getDerivedStateFromProps(m,h.__s))),p=h.props,w=h.state,h.__v=u,v)x&&null==T.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),x&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(x&&null==T.getDerivedStateFromProps&&m!==p&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(m,S),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(m,h.__s,S)||u.__v===t.__v)){for(u.__v!==t.__v&&(h.props=m,h.state=h.__s,h.__d=!1),u.__e=t.__e,u.__k=t.__k,u.__k.some(function(n){n&&(n.__=u)}),M=0;M<h._sb.length;M++)h.__h.push(h._sb[M]);h._sb=[],h.__h.length&&f.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(m,h.__s,S),x&&null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(p,w,_)})}if(h.context=S,h.props=m,h.__P=n,h.__e=!1,$=preact_module_l.__r,I=0,x){for(h.state=h.__s,h.__d=!1,$&&$(u),a=h.render(h.props,h.state,h.context),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[]}else do{h.__d=!1,$&&$(u),a=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++I<25);h.state=h.__s,null!=h.getChildContext&&(i=d(d({},i),h.getChildContext())),x&&!v&&null!=h.getSnapshotBeforeUpdate&&(_=h.getSnapshotBeforeUpdate(p,w)),P(n,y(L=null!=a&&a.type===preact_module_b&&null==a.key?a.props.children:a)?L:[L],u,t,i,o,r,f,e,c,s),h.base=u.__e,u.__u&=-161,h.__h.length&&f.push(h),g&&(h.__E=h.__=null)}catch(n){if(u.__v=null,c||null!=r){for(u.__u|=c?160:128;e&&8===e.nodeType&&e.nextSibling;)e=e.nextSibling;r[r.indexOf(e)]=null,u.__e=e}else u.__e=t.__e,u.__k=t.__k;preact_module_l.__e(n,u,t)}else null==r&&u.__v===t.__v?(u.__k=t.__k,u.__e=t.__e):u.__e=z(t.__e,u,t,i,o,r,f,c,s);(a=preact_module_l.diffed)&&a(u)}function j(n,u,t){u.__d=void 0;for(var i=0;i<t.length;i++)N(t[i],t[++i],t[++i]);preact_module_l.__c&&preact_module_l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){preact_module_l.__e(n,u.__v)}})}function z(u,t,i,o,r,f,e,c,s){var a,v,p,d,_,g,m,b=i.props,k=t.props,C=t.type;if("svg"===C?r="http://www.w3.org/2000/svg":"math"===C?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=f)for(a=0;a<f.length;a++)if((_=f[a])&&"setAttribute"in _==!!C&&(C?_.localName===C:3===_.nodeType)){u=_,f[a]=null;break}if(null==u){if(null===C)return document.createTextNode(k);u=document.createElementNS(r,C,k.is&&k),c&&(preact_module_l.__m&&preact_module_l.__m(t,f),c=!1),f=null}if(null===C)b===k||c&&u.data===k||(u.data=k);else{if(f=f&&preact_module_n.call(u.childNodes),b=i.props||h,!c&&null!=f)for(b={},a=0;a<u.attributes.length;a++)b[(_=u.attributes[a]).name]=_.value;for(a in b)if(_=b[a],"children"==a);else if("dangerouslySetInnerHTML"==a)p=_;else if(!(a in k)){if("value"==a&&"defaultValue"in k||"checked"==a&&"defaultChecked"in k)continue;A(u,a,null,_,r)}for(a in k)_=k[a],"children"==a?d=_:"dangerouslySetInnerHTML"==a?v=_:"value"==a?g=_:"checked"==a?m=_:c&&"function"!=typeof _||b[a]===_||A(u,a,_,b[a],r);if(v)c||p&&(v.__html===p.__html||v.__html===u.innerHTML)||(u.innerHTML=v.__html),t.__k=[];else if(p&&(u.innerHTML=""),P(u,y(d)?d:[d],t,i,o,"foreignObject"===C?"http://www.w3.org/1999/xhtml":r,f,e,f?f[0]:i.__k&&x(i,0),c,s),null!=f)for(a=f.length;a--;)w(f[a]);c||(a="value","progress"===C&&null==g?u.removeAttribute("value"):void 0!==g&&(g!==u[a]||"progress"===C&&!g||"option"===C&&g!==b[a])&&A(u,a,g,b[a],r),a="checked",void 0!==m&&m!==u[a]&&A(u,a,m,b[a],r))}return u}function N(n,u,t){try{if("function"==typeof n){var i="function"==typeof n.__u;i&&n.__u(),i&&null==u||(n.__u=n(u))}else n.current=u}catch(n){preact_module_l.__e(n,t)}}function V(n,u,t){var i,o;if(preact_module_l.unmount&&preact_module_l.unmount(n),(i=n.ref)&&(i.current&&i.current!==n.__e||N(i,null,u)),null!=(i=n.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(n){preact_module_l.__e(n,u)}i.base=i.__P=null}if(i=n.__k)for(o=0;o<i.length;o++)i[o]&&V(i[o],u,t||"function"!=typeof n.type);t||w(n.__e),n.__c=n.__=n.__e=n.__d=void 0}function q(n,l,u){return this.constructor(n,u)}preact_module_n=v.slice,preact_module_l={__e:function(n,l,u,t){for(var i,o,r;l=l.__;)if((i=l.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(n)),r=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(n,t||{}),r=i.__d),r)return i.__E=i}catch(l){n=l}throw n}},u=0,k.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=d({},this.state),"function"==typeof n&&(n=n(d({},u),this.props)),n&&d(u,n),null!=n&&this.__v&&(l&&this._sb.push(l),S(this))},k.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),S(this))},k.prototype.render=preact_module_b,i=[],preact_module_r="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,f=function(n,l){return n.__v.__b-l.__v.__b},M.__r=0,preact_module_e=0,c=F(!1),s=F(!0);var index_module_r=/[\s\n\\/='"\0<>]/,index_module_o=/^(xlink|xmlns|xml)([A-Z])/,index_module_i=/^accessK|^auto[A-Z]|^cell|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z]/,index_module_a=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,index_module_c=new Set(["draggable","spellcheck"]),index_module_s=/["&<]/;function l(e){if(0===e.length||!1===index_module_s.test(e))return e;for(var t=0,n=0,r="",o="";n<e.length;n++){switch(e.charCodeAt(n)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;default:continue}n!==t&&(r+=e.slice(t,n)),r+=o,t=n+1}return n!==t&&(r+=e.slice(t,n)),r}var index_module_u={},index_module_f=new Set(["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","fill-opacity","flex","flex-grow","flex-negative","flex-order","flex-positive","flex-shrink","flood-opacity","font-weight","grid-column","grid-row","line-clamp","line-height","opacity","order","orphans","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","widows","z-index","zoom"]),index_module_p=/[A-Z]/g;function index_module_h(e){var t="";for(var n in e){var r=e[n];if(null!=r&&""!==r){var o="-"==n[0]?n:index_module_u[n]||(index_module_u[n]=n.replace(index_module_p,"-$&").toLowerCase()),i=";";"number"!=typeof r||o.startsWith("--")||index_module_f.has(o)||(i="px;"),t=t+o+":"+r+i}}return t||void 0}function index_module_d(){this.__d=!0}var index_module_k,index_module_w,index_module_x,index_module_C,index_module_A={},index_module_L=[],index_module_E=Array.isArray,index_module_T=Object.assign,index_module_j="";function index_module_D(r,o,i){var a=preact_module_l.__s;preact_module_l.__s=!0,index_module_k=preact_module_l.__b,index_module_w=preact_module_l.diffed,index_module_x=preact_module_l.__r,index_module_C=preact_module_l.unmount;var c=_(preact_module_b,null);c.__k=[r];try{var s=U(r,o||index_module_A,!1,void 0,c,!1,i);return index_module_E(s)?s.join(index_module_j):s}catch(e){if(e.then)throw new Error('Use "renderToStringAsync" for suspenseful rendering.');throw e}finally{preact_module_l.__c&&preact_module_l.__c(r,index_module_L),preact_module_l.__s=a,index_module_L.length=0}}function index_module_P(e,t){var n,r=e.type,o=!0;return e.__c?(o=!1,(n=e.__c).state=n.__s):n=new r(e.props,t),e.__c=n,n.__v=e,n.props=e.props,n.context=t,n.__d=!0,null==n.state&&(n.state=index_module_A),null==n.__s&&(n.__s=n.state),r.getDerivedStateFromProps?n.state=index_module_T({},n.state,r.getDerivedStateFromProps(n.props,n.state)):o&&n.componentWillMount?(n.componentWillMount(),n.state=n.__s!==n.state?n.__s:n.state):!o&&n.componentWillUpdate&&n.componentWillUpdate(),index_module_x&&index_module_x(e),n.render(n.props,n.state,t)}function U(t,s,u,f,p,d,v){if(null==t||!0===t||!1===t||t===index_module_j)return index_module_j;var m=typeof t;if("object"!=m)return"function"==m?index_module_j:"string"==m?l(t):t+index_module_j;if(index_module_E(t)){var y,g=index_module_j;p.__k=t;for(var b=0;b<t.length;b++){var S=t[b];if(null!=S&&"boolean"!=typeof S){var L,D=U(S,s,u,f,p,d,v);"string"==typeof D?g+=D:(y||(y=[]),g&&y.push(g),g=index_module_j,index_module_E(D)?(L=y).push.apply(L,D):y.push(D))}}return y?(g&&y.push(g),y):g}if(void 0!==t.constructor)return index_module_j;t.__=p,index_module_k&&index_module_k(t);var F=t.type,M=t.props;if("function"==typeof F){var W,$,z,H=s;if(F===preact_module_b){if("tpl"in M){for(var N=index_module_j,q=0;q<M.tpl.length;q++)if(N+=M.tpl[q],M.exprs&&q<M.exprs.length){var B=M.exprs[q];if(null==B)continue;"object"!=typeof B||void 0!==B.constructor&&!index_module_E(B)?N+=B:N+=U(B,s,u,f,t,d,v)}return N}if("UNSTABLE_comment"in M)return"\x3c!--"+l(M.UNSTABLE_comment)+"--\x3e";$=M.children}else{if(null!=(W=F.contextType)){var I=s[W.__c];H=I?I.props.value:W.__}var O=F.prototype&&"function"==typeof F.prototype.render;if(O)$=index_module_P(t,H),z=t.__c;else{t.__c=z=function index_module_(e,t){return{__v:e,context:t,props:e.props,setState:index_module_d,forceUpdate:index_module_d,__d:!0,__h:new Array(0)}}(t,H);for(var R=0;z.__d&&R++<25;)z.__d=!1,index_module_x&&index_module_x(t),$=F.call(z,M,H);z.__d=!0}if(null!=z.getChildContext&&(s=index_module_T({},s,z.getChildContext())),O&&preact_module_l.errorBoundaries&&(F.getDerivedStateFromError||z.componentDidCatch)){$=null!=$&&$.type===preact_module_b&&null==$.key&&null==$.props.tpl?$.props.children:$;try{return U($,s,u,f,t,d,v)}catch(e){return F.getDerivedStateFromError&&(z.__s=F.getDerivedStateFromError(e)),z.componentDidCatch&&z.componentDidCatch(e,index_module_A),z.__d?($=index_module_P(t,s),null!=(z=t.__c).getChildContext&&(s=index_module_T({},s,z.getChildContext())),U($=null!=$&&$.type===preact_module_b&&null==$.key&&null==$.props.tpl?$.props.children:$,s,u,f,t,d,v)):index_module_j}finally{index_module_w&&index_module_w(t),t.__=null,index_module_C&&index_module_C(t)}}}$=null!=$&&$.type===preact_module_b&&null==$.key&&null==$.props.tpl?$.props.children:$;try{var V=U($,s,u,f,t,d,v);return index_module_w&&index_module_w(t),t.__=null,preact_module_l.unmount&&preact_module_l.unmount(t),V}catch(n){if(!d&&v&&v.onError){var K=v.onError(n,t,function(e){return U(e,s,u,f,t,d,v)});if(void 0!==K)return K;var G=preact_module_l.__e;return G&&G(n,t),index_module_j}if(!d)throw n;if(!n||"function"!=typeof n.then)throw n;return n.then(function e(){try{return U($,s,u,f,t,d,v)}catch(n){if(!n||"function"!=typeof n.then)throw n;return n.then(function(){return U($,s,u,f,t,d,v)},e)}})}}var J,Q="<"+F,X=index_module_j;for(var Y in M){var ee=M[Y];if("function"!=typeof ee||"class"===Y||"className"===Y){switch(Y){case"children":J=ee;continue;case"key":case"ref":case"__self":case"__source":continue;case"htmlFor":if("for"in M)continue;Y="for";break;case"className":if("class"in M)continue;Y="class";break;case"defaultChecked":Y="checked";break;case"defaultSelected":Y="selected";break;case"defaultValue":case"value":switch(Y="value",F){case"textarea":J=ee;continue;case"select":f=ee;continue;case"option":f!=ee||"selected"in M||(Q+=" selected")}break;case"dangerouslySetInnerHTML":X=ee&&ee.__html;continue;case"style":"object"==typeof ee&&(ee=index_module_h(ee));break;case"acceptCharset":Y="accept-charset";break;case"httpEquiv":Y="http-equiv";break;default:if(index_module_o.test(Y))Y=Y.replace(index_module_o,"$1:$2").toLowerCase();else{if(index_module_r.test(Y))continue;"-"!==Y[4]&&!index_module_c.has(Y)||null==ee?u?index_module_a.test(Y)&&(Y="panose1"===Y?"panose-1":Y.replace(/([A-Z])/g,"-$1").toLowerCase()):index_module_i.test(Y)&&(Y=Y.toLowerCase()):ee+=index_module_j}}null!=ee&&!1!==ee&&(Q=!0===ee||ee===index_module_j?Q+" "+Y:Q+" "+Y+'="'+("string"==typeof ee?l(ee):ee+index_module_j)+'"')}}if(index_module_r.test(F))throw new Error(F+" is not a valid HTML tag name in "+Q+">");if(X||("string"==typeof J?X=l(J):null!=J&&!1!==J&&!0!==J&&(X=U(J,s,"svg"===F||"foreignObject"!==F&&u,f,t,d,v))),index_module_w&&index_module_w(t),t.__=null,index_module_C&&index_module_C(t),!X&&Z.has(F))return Q+"/>";var te="</"+F+">",ne=Q+">";return index_module_E(X)?[ne].concat(X,[te]):"string"!=typeof X?[ne,X,te]:ne+X+te}var Z=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]);var jsxRuntime_module_f=0;Array.isArray;function jsxRuntime_module_u(e,t,n,o,i,u){t||(t={});var a,c,l=t;"ref"in t&&(a=t.ref,delete t.ref);var p={type:e,props:l,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--jsxRuntime_module_f,__i:-1,__u:0,__source:i,__self:u};if("function"==typeof e&&(a=e.defaultProps))for(c in a)void 0===l[c]&&(l[c]=a[c]);return preact_module_l.vnode&&preact_module_l.vnode(p),p}function ErrorPage(props){const{url,error="default",theme}=props,signinPageUrl=`${url}/signin`,errors={default:{status:200,heading:"Error",message:jsxRuntime_module_u("p",{children:jsxRuntime_module_u("a",{className:"site",href:url?.origin,children:url?.host})})},Configuration:{status:500,heading:"Server error",message:jsxRuntime_module_u("div",{children:[jsxRuntime_module_u("p",{children:"There is a problem with the server configuration."}),jsxRuntime_module_u("p",{children:"Check the server logs for more information."})]})},AccessDenied:{status:403,heading:"Access Denied",message:jsxRuntime_module_u("div",{children:[jsxRuntime_module_u("p",{children:"You do not have permission to sign in."}),jsxRuntime_module_u("p",{children:jsxRuntime_module_u("a",{className:"button",href:signinPageUrl,children:"Sign in"})})]})},Verification:{status:403,heading:"Unable to sign in",message:jsxRuntime_module_u("div",{children:[jsxRuntime_module_u("p",{children:"The sign in link is no longer valid."}),jsxRuntime_module_u("p",{children:"It may have been used already or it may have expired."})]}),signin:jsxRuntime_module_u("a",{className:"button",href:signinPageUrl,children:"Sign in"})}},{status,heading,message,signin}=errors[error]??errors.default;return{status,html:jsxRuntime_module_u("div",{className:"error",children:[theme?.brandColor&&jsxRuntime_module_u("style",{dangerouslySetInnerHTML:{__html:`\n        :root {\n          --brand-color: ${theme?.brandColor}\n        }\n      `}}),jsxRuntime_module_u("div",{className:"card",children:[theme?.logo&&jsxRuntime_module_u("img",{src:theme?.logo,alt:"Logo",className:"logo"}),jsxRuntime_module_u("h1",{children:heading}),jsxRuntime_module_u("div",{className:"message",children:message}),signin]})]})}}var webauthn_client_console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");async function webauthnScript(authURL,providerID){const WebAuthnBrowser=window.SimpleWebAuthnBrowser;async function fetchOptions(action){const url=new URL(`${authURL}/webauthn-options/${providerID}`);action&&url.searchParams.append("action",action);getFormFields().forEach(field=>{url.searchParams.append(field.name,field.value)});const res=await fetch(url);if(res.ok)return res.json();webauthn_client_console.error("Failed to fetch options",res)}function getForm(){const formID=`#${providerID}-form`,form=document.querySelector(formID);if(!form)throw new Error(`Form '${formID}' not found`);return form}function getFormFields(){const form=getForm();return Array.from(form.querySelectorAll("input[data-form-field]"))}async function submitForm(action,data){const form=getForm();if(action){const actionInput=document.createElement("input");actionInput.type="hidden",actionInput.name="action",actionInput.value=action,form.appendChild(actionInput)}if(data){const dataInput=document.createElement("input");dataInput.type="hidden",dataInput.name="data",dataInput.value=JSON.stringify(data),form.appendChild(dataInput)}return form.submit()}async function authenticationFlow(options,autofill){const authResp=await WebAuthnBrowser.startAuthentication(options,autofill);return await submitForm("authenticate",authResp)}!async function setupForm(){const form=getForm();WebAuthnBrowser.browserSupportsWebAuthn()?form&&form.addEventListener("submit",async e=>{e.preventDefault();const res=await fetchOptions(void 0);if(res){if("authenticate"===res.action)try{await authenticationFlow(res.options,!1)}catch(e){webauthn_client_console.error(e)}else if("register"===res.action)try{await async function registrationFlow(options){getFormFields().forEach(field=>{if(field.required&&!field.value)throw new Error(`Missing required field: ${field.name}`)});const regResp=await WebAuthnBrowser.startRegistration(options);return await submitForm("register",regResp)}(res.options)}catch(e){webauthn_client_console.error(e)}}else webauthn_client_console.error("Failed to fetch options for form submission")}):form.style.display="none"}(),async function autofillAuthentication(){if(!WebAuthnBrowser.browserSupportsWebAuthnAutofill())return;const res=await fetchOptions("authenticate");if(res)try{await authenticationFlow(res.options,!0)}catch(e){webauthn_client_console.error(e)}else webauthn_client_console.error("Failed to fetch option for autofill authentication")}()}const signinErrors={default:"Unable to sign in.",Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallbackError:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page."};function SigninPage(props){const{csrfToken,providers=[],callbackUrl,theme,email,error:errorType}=props;"undefined"!=typeof document&&theme?.brandColor&&document.documentElement.style.setProperty("--brand-color",theme.brandColor),"undefined"!=typeof document&&theme?.buttonText&&document.documentElement.style.setProperty("--button-text-color",theme.buttonText);const error=errorType&&(signinErrors[errorType]??signinErrors.default),providerLogoPath="https://authjs.dev/img/providers",conditionalUIProviderID=providers.find(provider=>"webauthn"===provider.type&&provider.enableConditionalUI)?.id;return jsxRuntime_module_u("div",{className:"signin",children:[theme?.brandColor&&jsxRuntime_module_u("style",{dangerouslySetInnerHTML:{__html:`:root {--brand-color: ${theme.brandColor}}`}}),theme?.buttonText&&jsxRuntime_module_u("style",{dangerouslySetInnerHTML:{__html:`\n        :root {\n          --button-text-color: ${theme.buttonText}\n        }\n      `}}),jsxRuntime_module_u("div",{className:"card",children:[error&&jsxRuntime_module_u("div",{className:"error",children:jsxRuntime_module_u("p",{children:error})}),theme?.logo&&jsxRuntime_module_u("img",{src:theme.logo,alt:"Logo",className:"logo"}),providers.map((provider,i)=>{let bg,brandColor,logo;"oauth"!==provider.type&&"oidc"!==provider.type||({bg="#fff",brandColor,logo=`${providerLogoPath}/${provider.id}.svg`}=provider.style??{});const color=brandColor??bg??"#fff";return jsxRuntime_module_u("div",{className:"provider",children:["oauth"===provider.type||"oidc"===provider.type?jsxRuntime_module_u("form",{action:provider.signinUrl,method:"POST",children:[jsxRuntime_module_u("input",{type:"hidden",name:"csrfToken",value:csrfToken}),callbackUrl&&jsxRuntime_module_u("input",{type:"hidden",name:"callbackUrl",value:callbackUrl}),jsxRuntime_module_u("button",{type:"submit",className:"button",style:{"--provider-brand-color":color},tabIndex:0,children:[jsxRuntime_module_u("span",{style:{filter:"invert(1) grayscale(1) brightness(1.3) contrast(9000)","mix-blend-mode":"luminosity",opacity:.95},children:["Sign in with ",provider.name]}),logo&&jsxRuntime_module_u("img",{loading:"lazy",height:24,src:logo})]})]}):null,("email"===provider.type||"credentials"===provider.type||"webauthn"===provider.type)&&i>0&&"email"!==providers[i-1].type&&"credentials"!==providers[i-1].type&&"webauthn"!==providers[i-1].type&&jsxRuntime_module_u("hr",{}),"email"===provider.type&&jsxRuntime_module_u("form",{action:provider.signinUrl,method:"POST",children:[jsxRuntime_module_u("input",{type:"hidden",name:"csrfToken",value:csrfToken}),jsxRuntime_module_u("label",{className:"section-header",htmlFor:`input-email-for-${provider.id}-provider`,children:"Email"}),jsxRuntime_module_u("input",{id:`input-email-for-${provider.id}-provider`,autoFocus:!0,type:"email",name:"email",value:email,placeholder:"email@example.com",required:!0}),jsxRuntime_module_u("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",provider.name]})]}),"credentials"===provider.type&&jsxRuntime_module_u("form",{action:provider.callbackUrl,method:"POST",children:[jsxRuntime_module_u("input",{type:"hidden",name:"csrfToken",value:csrfToken}),Object.keys(provider.credentials).map(credential=>jsxRuntime_module_u("div",{children:[jsxRuntime_module_u("label",{className:"section-header",htmlFor:`input-${credential}-for-${provider.id}-provider`,children:provider.credentials[credential].label??credential}),jsxRuntime_module_u("input",{name:credential,id:`input-${credential}-for-${provider.id}-provider`,type:provider.credentials[credential].type??"text",placeholder:provider.credentials[credential].placeholder??"",...provider.credentials[credential]})]},`input-group-${provider.id}`)),jsxRuntime_module_u("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",provider.name]})]}),"webauthn"===provider.type&&jsxRuntime_module_u("form",{action:provider.callbackUrl,method:"POST",id:`${provider.id}-form`,children:[jsxRuntime_module_u("input",{type:"hidden",name:"csrfToken",value:csrfToken}),Object.keys(provider.formFields).map(field=>jsxRuntime_module_u("div",{children:[jsxRuntime_module_u("label",{className:"section-header",htmlFor:`input-${field}-for-${provider.id}-provider`,children:provider.formFields[field].label??field}),jsxRuntime_module_u("input",{name:field,"data-form-field":!0,id:`input-${field}-for-${provider.id}-provider`,type:provider.formFields[field].type??"text",placeholder:provider.formFields[field].placeholder??"",...provider.formFields[field]})]},`input-group-${provider.id}`)),jsxRuntime_module_u("button",{id:`submitButton-${provider.id}`,type:"submit",tabIndex:0,children:["Sign in with ",provider.name]})]}),("email"===provider.type||"credentials"===provider.type||"webauthn"===provider.type)&&i+1<providers.length&&jsxRuntime_module_u("hr",{})]},provider.id)})]}),conditionalUIProviderID&&(providerID=conditionalUIProviderID,jsxRuntime_module_u(preact_module_b,{children:jsxRuntime_module_u("script",{dangerouslySetInnerHTML:{__html:`\nconst currentURL = window.location.href;\nconst authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));\n(${webauthnScript})(authURL, "${providerID}");\n`}})}))]});var providerID}function SignoutPage(props){const{url,csrfToken,theme}=props;return jsxRuntime_module_u("div",{className:"signout",children:[theme?.brandColor&&jsxRuntime_module_u("style",{dangerouslySetInnerHTML:{__html:`\n        :root {\n          --brand-color: ${theme.brandColor}\n        }\n      `}}),theme?.buttonText&&jsxRuntime_module_u("style",{dangerouslySetInnerHTML:{__html:`\n        :root {\n          --button-text-color: ${theme.buttonText}\n        }\n      `}}),jsxRuntime_module_u("div",{className:"card",children:[theme?.logo&&jsxRuntime_module_u("img",{src:theme.logo,alt:"Logo",className:"logo"}),jsxRuntime_module_u("h1",{children:"Signout"}),jsxRuntime_module_u("p",{children:"Are you sure you want to sign out?"}),jsxRuntime_module_u("form",{action:url?.toString(),method:"POST",children:[jsxRuntime_module_u("input",{type:"hidden",name:"csrfToken",value:csrfToken}),jsxRuntime_module_u("button",{id:"submitButton",type:"submit",children:"Sign out"})]})]})]})}const styles=':root {\n  --border-width: 1px;\n  --border-radius: 0.5rem;\n  --color-error: #c94b4b;\n  --color-info: #157efb;\n  --color-info-hover: #0f6ddb;\n  --color-info-text: #fff;\n}\n\n.__next-auth-theme-auto,\n.__next-auth-theme-light {\n  --color-background: #ececec;\n  --color-background-hover: rgba(236, 236, 236, 0.8);\n  --color-background-card: #fff;\n  --color-text: #000;\n  --color-primary: #444;\n  --color-control-border: #bbb;\n  --color-button-active-background: #f9f9f9;\n  --color-button-active-border: #aaa;\n  --color-separator: #ccc;\n  --provider-bg: #fff;\n  --provider-bg-hover: color-mix(\n    in srgb,\n    var(--provider-brand-color) 30%,\n    #fff\n  );\n}\n\n.__next-auth-theme-dark {\n  --color-background: #161b22;\n  --color-background-hover: rgba(22, 27, 34, 0.8);\n  --color-background-card: #0d1117;\n  --color-text: #fff;\n  --color-primary: #ccc;\n  --color-control-border: #555;\n  --color-button-active-background: #060606;\n  --color-button-active-border: #666;\n  --color-separator: #444;\n  --provider-bg: #161b22;\n  --provider-bg-hover: color-mix(\n    in srgb,\n    var(--provider-brand-color) 30%,\n    #000\n  );\n}\n\n.__next-auth-theme-dark img[src$="42-school.svg"],\n  .__next-auth-theme-dark img[src$="apple.svg"],\n  .__next-auth-theme-dark img[src$="boxyhq-saml.svg"],\n  .__next-auth-theme-dark img[src$="eveonline.svg"],\n  .__next-auth-theme-dark img[src$="github.svg"],\n  .__next-auth-theme-dark img[src$="mailchimp.svg"],\n  .__next-auth-theme-dark img[src$="medium.svg"],\n  .__next-auth-theme-dark img[src$="okta.svg"],\n  .__next-auth-theme-dark img[src$="patreon.svg"],\n  .__next-auth-theme-dark img[src$="ping-id.svg"],\n  .__next-auth-theme-dark img[src$="roblox.svg"],\n  .__next-auth-theme-dark img[src$="threads.svg"],\n  .__next-auth-theme-dark img[src$="wikimedia.svg"] {\n    filter: invert(1);\n  }\n\n.__next-auth-theme-dark #submitButton {\n    background-color: var(--provider-bg, var(--color-info));\n  }\n\n@media (prefers-color-scheme: dark) {\n  .__next-auth-theme-auto {\n    --color-background: #161b22;\n    --color-background-hover: rgba(22, 27, 34, 0.8);\n    --color-background-card: #0d1117;\n    --color-text: #fff;\n    --color-primary: #ccc;\n    --color-control-border: #555;\n    --color-button-active-background: #060606;\n    --color-button-active-border: #666;\n    --color-separator: #444;\n    --provider-bg: #161b22;\n    --provider-bg-hover: color-mix(\n      in srgb,\n      var(--provider-brand-color) 30%,\n      #000\n    );\n  }\n    .__next-auth-theme-auto img[src$="42-school.svg"],\n    .__next-auth-theme-auto img[src$="apple.svg"],\n    .__next-auth-theme-auto img[src$="boxyhq-saml.svg"],\n    .__next-auth-theme-auto img[src$="eveonline.svg"],\n    .__next-auth-theme-auto img[src$="github.svg"],\n    .__next-auth-theme-auto img[src$="mailchimp.svg"],\n    .__next-auth-theme-auto img[src$="medium.svg"],\n    .__next-auth-theme-auto img[src$="okta.svg"],\n    .__next-auth-theme-auto img[src$="patreon.svg"],\n    .__next-auth-theme-auto img[src$="ping-id.svg"],\n    .__next-auth-theme-auto img[src$="roblox.svg"],\n    .__next-auth-theme-auto img[src$="threads.svg"],\n    .__next-auth-theme-auto img[src$="wikimedia.svg"] {\n      filter: invert(1);\n    }\n    .__next-auth-theme-auto #submitButton {\n      background-color: var(--provider-bg, var(--color-info));\n    }\n}\n\nhtml {\n  box-sizing: border-box;\n}\n\n*,\n*:before,\n*:after {\n  box-sizing: inherit;\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  background-color: var(--color-background);\n  margin: 0;\n  padding: 0;\n  font-family:\n    ui-sans-serif,\n    system-ui,\n    -apple-system,\n    BlinkMacSystemFont,\n    "Segoe UI",\n    Roboto,\n    "Helvetica Neue",\n    Arial,\n    "Noto Sans",\n    sans-serif,\n    "Apple Color Emoji",\n    "Segoe UI Emoji",\n    "Segoe UI Symbol",\n    "Noto Color Emoji";\n}\n\nh1 {\n  margin-bottom: 1.5rem;\n  padding: 0 1rem;\n  font-weight: 400;\n  color: var(--color-text);\n}\n\np {\n  margin-bottom: 1.5rem;\n  padding: 0 1rem;\n  color: var(--color-text);\n}\n\nform {\n  margin: 0;\n  padding: 0;\n}\n\nlabel {\n  font-weight: 500;\n  text-align: left;\n  margin-bottom: 0.25rem;\n  display: block;\n  color: var(--color-text);\n}\n\ninput[type] {\n  box-sizing: border-box;\n  display: block;\n  width: 100%;\n  padding: 0.5rem 1rem;\n  border: var(--border-width) solid var(--color-control-border);\n  background: var(--color-background-card);\n  font-size: 1rem;\n  border-radius: var(--border-radius);\n  color: var(--color-text);\n}\n\np {\n  font-size: 1.1rem;\n  line-height: 2rem;\n}\n\na.button {\n  text-decoration: none;\n  line-height: 1rem;\n}\n\na.button:link,\n  a.button:visited {\n    background-color: var(--color-background);\n    color: var(--color-primary);\n  }\n\nbutton,\na.button {\n  padding: 0.75rem 1rem;\n  color: var(--provider-color, var(--color-primary));\n  background-color: var(--provider-bg, var(--color-background));\n  border: 1px solid #00000031;\n  font-size: 0.9rem;\n  height: 50px;\n  border-radius: var(--border-radius);\n  transition: background-color 250ms ease-in-out;\n  font-weight: 300;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n:is(button,a.button):hover {\n    background-color: var(--provider-bg-hover, var(--color-background-hover));\n    cursor: pointer;\n  }\n\n:is(button,a.button):active {\n    cursor: pointer;\n  }\n\n:is(button,a.button) span {\n    color: var(--provider-bg);\n  }\n\n#submitButton {\n  color: var(--button-text-color, var(--color-info-text));\n  background-color: var(--brand-color, var(--color-info));\n  width: 100%;\n}\n\n#submitButton:hover {\n    background-color: var(\n      --button-hover-bg,\n      var(--color-info-hover)\n    ) !important;\n  }\n\na.site {\n  color: var(--color-primary);\n  text-decoration: none;\n  font-size: 1rem;\n  line-height: 2rem;\n}\n\na.site:hover {\n    text-decoration: underline;\n  }\n\n.page {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: grid;\n  place-items: center;\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n.page > div {\n    text-align: center;\n  }\n\n.error a.button {\n    padding-left: 2rem;\n    padding-right: 2rem;\n    margin-top: 0.5rem;\n  }\n\n.error .message {\n    margin-bottom: 1.5rem;\n  }\n\n.signin input[type="text"] {\n    margin-left: auto;\n    margin-right: auto;\n    display: block;\n  }\n\n.signin hr {\n    display: block;\n    border: 0;\n    border-top: 1px solid var(--color-separator);\n    margin: 2rem auto 1rem auto;\n    overflow: visible;\n  }\n\n.signin hr::before {\n      content: "or";\n      background: var(--color-background-card);\n      color: #888;\n      padding: 0 0.4rem;\n      position: relative;\n      top: -0.7rem;\n    }\n\n.signin .error {\n    background: #f5f5f5;\n    font-weight: 500;\n    border-radius: 0.3rem;\n    background: var(--color-error);\n  }\n\n.signin .error p {\n      text-align: left;\n      padding: 0.5rem 1rem;\n      font-size: 0.9rem;\n      line-height: 1.2rem;\n      color: var(--color-info-text);\n    }\n\n.signin > div,\n  .signin form {\n    display: block;\n  }\n\n.signin > div input[type], .signin form input[type] {\n      margin-bottom: 0.5rem;\n    }\n\n.signin > div button, .signin form button {\n      width: 100%;\n    }\n\n.signin .provider + .provider {\n    margin-top: 1rem;\n  }\n\n.logo {\n  display: inline-block;\n  max-width: 150px;\n  margin: 1.25rem 0;\n  max-height: 70px;\n}\n\n.card {\n  background-color: var(--color-background-card);\n  border-radius: 1rem;\n  padding: 1.25rem 2rem;\n}\n\n.card .header {\n    color: var(--color-primary);\n  }\n\n.card input[type]::-moz-placeholder {\n    color: color-mix(\n      in srgb,\n      var(--color-text) 20%,\n      var(--color-button-active-background)\n    );\n  }\n\n.card input[type]::placeholder {\n    color: color-mix(\n      in srgb,\n      var(--color-text) 20%,\n      var(--color-button-active-background)\n    );\n  }\n\n.card input[type] {\n    background: color-mix(in srgb, var(--color-background-card) 95%, black);\n  }\n\n.section-header {\n  color: var(--color-text);\n}\n\n@media screen and (min-width: 450px) {\n  .card {\n    margin: 2rem 0;\n    width: 368px;\n  }\n}\n\n@media screen and (max-width: 450px) {\n  .card {\n    margin: 1rem 0;\n    width: 343px;\n  }\n}\n';function VerifyRequestPage(props){const{url,theme}=props;return jsxRuntime_module_u("div",{className:"verify-request",children:[theme.brandColor&&jsxRuntime_module_u("style",{dangerouslySetInnerHTML:{__html:`\n        :root {\n          --brand-color: ${theme.brandColor}\n        }\n      `}}),jsxRuntime_module_u("div",{className:"card",children:[theme.logo&&jsxRuntime_module_u("img",{src:theme.logo,alt:"Logo",className:"logo"}),jsxRuntime_module_u("h1",{children:"Check your email"}),jsxRuntime_module_u("p",{children:"A sign in link has been sent to your email address."}),jsxRuntime_module_u("p",{children:jsxRuntime_module_u("a",{className:"site",href:url.origin,children:url.host})})]})]})}function send({html,title,status,cookies,theme,headTags}){return{cookies,status,headers:{"Content-Type":"text/html"},body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${styles}</style><title>${title}</title>${headTags??""}</head><body class="__next-auth-theme-${theme?.colorScheme??"auto"}"><div class="page">${index_module_D(html)}</div></body></html>`}}function renderPage(params){const{url,theme,query,cookies,pages,providers}=params;return{csrf:(skip,options,cookies)=>skip?(options.logger.warn("csrf-disabled"),cookies.push({name:options.cookies.csrfToken.name,value:"",options:{...options.cookies.csrfToken.options,maxAge:0}}),{status:404,cookies}):{headers:{"Content-Type":"application/json","Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"},body:{csrfToken:options.csrfToken},cookies},providers:providers=>({headers:{"Content-Type":"application/json"},body:providers.reduce((acc,{id,name,type,signinUrl,callbackUrl})=>(acc[id]={id,name,type,signinUrl,callbackUrl},acc),{})}),signin(providerId,error){if(providerId)throw new errors.P8("Unsupported action");if(pages?.signIn){let signinUrl=`${pages.signIn}${pages.signIn.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:params.callbackUrl??"/"})}`;return error&&(signinUrl=`${signinUrl}&${new URLSearchParams({error})}`),{redirect:signinUrl,cookies}}const webauthnProvider=providers?.find(p=>"webauthn"===p.type&&p.enableConditionalUI&&!!p.simpleWebAuthnBrowserVersion);let simpleWebAuthnBrowserScript="";if(webauthnProvider){const{simpleWebAuthnBrowserVersion}=webauthnProvider;simpleWebAuthnBrowserScript=`<script src="https://unpkg.com/@simplewebauthn/browser@${simpleWebAuthnBrowserVersion}/dist/bundle/index.umd.min.js" crossorigin="anonymous"><\/script>`}return send({cookies,theme,html:SigninPage({csrfToken:params.csrfToken,providers:params.providers?.filter(provider=>["email","oauth","oidc"].includes(provider.type)||"credentials"===provider.type&&provider.credentials||"webauthn"===provider.type&&provider.formFields||!1),callbackUrl:params.callbackUrl,theme:params.theme,error,...query}),title:"Sign In",headTags:simpleWebAuthnBrowserScript})},signout:()=>pages?.signOut?{redirect:pages.signOut,cookies}:send({cookies,theme,html:SignoutPage({csrfToken:params.csrfToken,url,theme}),title:"Sign Out"}),verifyRequest:props=>pages?.verifyRequest?{redirect:`${pages.verifyRequest}${url?.search??""}`,cookies}:send({cookies,theme,html:VerifyRequestPage({url,theme,...props}),title:"Verify Request"}),error:error=>pages?.error?{redirect:`${pages.error}${pages.error.includes("?")?"&":"?"}error=${error}`,cookies}:send({cookies,theme,...ErrorPage({url,theme,error}),title:"Error"})}}function fromDate(time,date=Date.now()){return new Date(date+1e3*time)}async function handleLoginOrRegister(sessionToken,_profile,_account,options){if(!_account?.providerAccountId||!_account.type)throw new Error("Missing or invalid provider account");if(!["email","oauth","oidc","webauthn"].includes(_account.type))throw new Error("Provider not supported");const{adapter,jwt,events,session:{strategy:sessionStrategy,generateSessionToken}}=options;if(!adapter)return{user:_profile,account:_account};const profile=_profile;let account=_account;const{createUser,updateUser,getUser,getUserByAccount,getUserByEmail,linkAccount,createSession,getSessionAndUser,deleteSession}=adapter;let session=null,user=null,isNewUser=!1;const useJwtSession="jwt"===sessionStrategy;if(sessionToken)if(useJwtSession)try{const salt=options.cookies.sessionToken.name;session=await jwt.decode({...jwt,token:sessionToken,salt}),session&&"sub"in session&&session.sub&&(user=await getUser(session.sub))}catch{}else{const userAndSession=await getSessionAndUser(sessionToken);userAndSession&&(session=userAndSession.session,user=userAndSession.user)}if("email"===account.type){const userByEmail=await getUserByEmail(profile.email);return userByEmail?(user?.id!==userByEmail.id&&!useJwtSession&&sessionToken&&await deleteSession(sessionToken),user=await updateUser({id:userByEmail.id,emailVerified:new Date}),await(events.updateUser?.({user}))):(user=await createUser({...profile,emailVerified:new Date}),await(events.createUser?.({user})),isNewUser=!0),session=useJwtSession?{}:await createSession({sessionToken:generateSessionToken(),userId:user.id,expires:fromDate(options.session.maxAge)}),{session,user,isNewUser}}if("webauthn"===account.type){const userByAccount=await getUserByAccount({providerAccountId:account.providerAccountId,provider:account.provider});if(userByAccount){if(user){if(userByAccount.id===user.id){return{session,user,isNewUser,account:{...account,userId:user.id}}}throw new errors.WS("The account is already associated with another user",{provider:account.provider})}session=useJwtSession?{}:await createSession({sessionToken:generateSessionToken(),userId:userByAccount.id,expires:fromDate(options.session.maxAge)});return{session,user:userByAccount,isNewUser,account:{...account,userId:userByAccount.id}}}if(user){await linkAccount({...account,userId:user.id}),await(events.linkAccount?.({user,account,profile}));return{session,user,isNewUser,account:{...account,userId:user.id}}}if(profile.email?await getUserByEmail(profile.email):null)throw new errors.WS("Another account already exists with the same e-mail address",{provider:account.provider});user=await createUser({...profile}),await(events.createUser?.({user})),await linkAccount({...account,userId:user.id}),await(events.linkAccount?.({user,account,profile})),session=useJwtSession?{}:await createSession({sessionToken:generateSessionToken(),userId:user.id,expires:fromDate(options.session.maxAge)});return{session,user,isNewUser:!0,account:{...account,userId:user.id}}}const userByAccount=await getUserByAccount({providerAccountId:account.providerAccountId,provider:account.provider});if(userByAccount){if(user){if(userByAccount.id===user.id)return{session,user,isNewUser};throw new errors.XP("The account is already associated with another user",{provider:account.provider})}return session=useJwtSession?{}:await createSession({sessionToken:generateSessionToken(),userId:userByAccount.id,expires:fromDate(options.session.maxAge)}),{session,user:userByAccount,isNewUser}}{const{provider:p}=options,{type,provider,providerAccountId,userId,...tokenSet}=account,defaults={providerAccountId,provider,type,userId};if(account=Object.assign(p.account(tokenSet)??{},defaults),user)return await linkAccount({...account,userId:user.id}),await(events.linkAccount?.({user,account,profile})),{session,user,isNewUser};const userByEmail=profile.email?await getUserByEmail(profile.email):null;if(userByEmail){const provider=options.provider;if(!provider?.allowDangerousEmailAccountLinking)throw new errors.XP("Another account already exists with the same e-mail address",{provider:account.provider});user=userByEmail,isNewUser=!1}else user=await createUser({...profile,emailVerified:null}),isNewUser=!0;return await(events.createUser?.({user})),await linkAccount({...account,userId:user.id}),await(events.linkAccount?.({user,account,profile})),session=useJwtSession?{}:await createSession({sessionToken:generateSessionToken(),userId:user.id,expires:fromDate(options.session.maxAge)}),{session,user,isNewUser}}}let USER_AGENT;if("undefined"==typeof navigator||!navigator.userAgent?.startsWith?.("Mozilla/5.0 ")){USER_AGENT=`${"oauth4webapi"}/${"v3.6.0"}`}function looseInstanceOf(input,expected){if(null==input)return!1;try{return input instanceof expected||Object.getPrototypeOf(input)[Symbol.toStringTag]===expected.prototype[Symbol.toStringTag]}catch{return!1}}const ERR_INVALID_ARG_VALUE="ERR_INVALID_ARG_VALUE",ERR_INVALID_ARG_TYPE="ERR_INVALID_ARG_TYPE";function CodedTypeError(message,code,cause){const err=new TypeError(message,{cause});return Object.assign(err,{code}),err}const allowInsecureRequests=Symbol(),clockSkew=Symbol(),clockTolerance=Symbol(),build_customFetch=Symbol(),modifyAssertion=Symbol(),jweDecrypt=Symbol(),build_encoder=(Symbol(),new TextEncoder),build_decoder=new TextDecoder;function buf(input){return"string"==typeof input?build_encoder.encode(input):build_decoder.decode(input)}let encodeBase64Url,decodeBase64Url;if(Uint8Array.prototype.toBase64)encodeBase64Url=input=>(input instanceof ArrayBuffer&&(input=new Uint8Array(input)),input.toBase64({alphabet:"base64url",omitPadding:!0}));else{const CHUNK_SIZE=32768;encodeBase64Url=input=>{input instanceof ArrayBuffer&&(input=new Uint8Array(input));const arr=[];for(let i=0;i<input.byteLength;i+=CHUNK_SIZE)arr.push(String.fromCharCode.apply(null,input.subarray(i,i+CHUNK_SIZE)));return btoa(arr.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}}function b64u(input){return"string"==typeof input?decodeBase64Url(input):encodeBase64Url(input)}decodeBase64Url=Uint8Array.fromBase64?input=>{try{return Uint8Array.fromBase64(input,{alphabet:"base64url"})}catch(cause){throw CodedTypeError("The input to be decoded is not correctly encoded.",ERR_INVALID_ARG_VALUE,cause)}}:input=>{try{const binary=atob(input.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),bytes=new Uint8Array(binary.length);for(let i=0;i<binary.length;i++)bytes[i]=binary.charCodeAt(i);return bytes}catch(cause){throw CodedTypeError("The input to be decoded is not correctly encoded.",ERR_INVALID_ARG_VALUE,cause)}};class UnsupportedOperationError extends Error{code;constructor(message,options){super(message,options),this.name=this.constructor.name,this.code=UNSUPPORTED_OPERATION,Error.captureStackTrace?.(this,this.constructor)}}class OperationProcessingError extends Error{code;constructor(message,options){super(message,options),this.name=this.constructor.name,options?.code&&(this.code=options?.code),Error.captureStackTrace?.(this,this.constructor)}}function OPE(message,code,cause){return new OperationProcessingError(message,{code,cause})}function build_assertCryptoKey(key,it){if(!(key instanceof CryptoKey))throw CodedTypeError(`${it} must be a CryptoKey`,ERR_INVALID_ARG_TYPE)}function assertPrivateKey(key,it){if(build_assertCryptoKey(key,it),"private"!==key.type)throw CodedTypeError(`${it} must be a private CryptoKey`,ERR_INVALID_ARG_VALUE)}function isJsonObject(input){return null!==input&&"object"==typeof input&&!Array.isArray(input)}function prepareHeaders(input){looseInstanceOf(input,Headers)&&(input=Object.fromEntries(input.entries()));const headers=new Headers(input??{});if(USER_AGENT&&!headers.has("user-agent")&&headers.set("user-agent",USER_AGENT),headers.has("authorization"))throw CodedTypeError('"options.headers" must not include the "authorization" header name',ERR_INVALID_ARG_VALUE);return headers}function signal(url,value){if(void 0!==value){if("function"==typeof value&&(value=value(url.href)),!(value instanceof AbortSignal))throw CodedTypeError('"options.signal" must return or be an instance of AbortSignal',ERR_INVALID_ARG_TYPE);return value}}function replaceDoubleSlash(pathname){return pathname.includes("//")?pathname.replace("//","/"):pathname}function prependWellKnown(url,wellKnown,allowTerminatingSlash=!1){return"/"===url.pathname?url.pathname=wellKnown:url.pathname=replaceDoubleSlash(`${wellKnown}/${allowTerminatingSlash?url.pathname:url.pathname.replace(/(\/)$/,"")}`),url}async function performDiscovery(input,urlName,transform,options){if(!(input instanceof URL))throw CodedTypeError(`"${urlName}" must be an instance of URL`,ERR_INVALID_ARG_TYPE);checkProtocol(input,!0!==options?.[allowInsecureRequests]);const url=transform(new URL(input.href)),headers=prepareHeaders(options?.headers);return headers.set("accept","application/json"),(options?.[build_customFetch]||fetch)(url.href,{body:void 0,headers:Object.fromEntries(headers.entries()),method:"GET",redirect:"manual",signal:signal(url,options?.signal)})}async function discoveryRequest(issuerIdentifier,options){return performDiscovery(issuerIdentifier,"issuerIdentifier",url=>{switch(options?.algorithm){case void 0:case"oidc":!function appendWellKnown(url,wellKnown){return url.pathname=replaceDoubleSlash(`${url.pathname}/${wellKnown}`),url}(url,".well-known/openid-configuration");break;case"oauth2":prependWellKnown(url,".well-known/oauth-authorization-server");break;default:throw CodedTypeError('"options.algorithm" must be "oidc" (default), or "oauth2"',ERR_INVALID_ARG_VALUE)}return url},options)}function assertNumber(input,allow0,it,code,cause){try{if("number"!=typeof input||!Number.isFinite(input))throw CodedTypeError(`${it} must be a number`,ERR_INVALID_ARG_TYPE,cause);if(input>0)return;if(allow0){if(0!==input)throw CodedTypeError(`${it} must be a non-negative number`,ERR_INVALID_ARG_VALUE,cause);return}throw CodedTypeError(`${it} must be a positive number`,ERR_INVALID_ARG_VALUE,cause)}catch(err){if(code)throw OPE(err.message,code,cause);throw err}}function assertString(input,it,code,cause){try{if("string"!=typeof input)throw CodedTypeError(`${it} must be a string`,ERR_INVALID_ARG_TYPE,cause);if(0===input.length)throw CodedTypeError(`${it} must not be empty`,ERR_INVALID_ARG_VALUE,cause)}catch(err){if(code)throw OPE(err.message,code,cause);throw err}}async function processDiscoveryResponse(expectedIssuerIdentifier,response){const expected=expectedIssuerIdentifier;if(!(expected instanceof URL)&&expected!==_nodiscoverycheck)throw CodedTypeError('"expectedIssuerIdentifier" must be an instance of URL',ERR_INVALID_ARG_TYPE);if(!looseInstanceOf(response,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);if(200!==response.status)throw OPE('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',RESPONSE_IS_NOT_CONFORM,response);assertReadableResponse(response);const json=await getResponseJsonBody(response);if(assertString(json.issuer,'"response" body "issuer" property',INVALID_RESPONSE,{body:json}),expected!==_nodiscoverycheck&&new URL(json.issuer).href!==expected.href)throw OPE('"response" body "issuer" property does not match the expected value',JSON_ATTRIBUTE_COMPARISON,{expected:expected.href,body:json,attribute:"issuer"});return json}function assertApplicationJson(response){!function assertContentType(response,contentType){if(getContentType(response)!==contentType)throw notJson(response,contentType)}(response,"application/json")}function notJson(response,...types){let msg='"response" content-type must be ';if(types.length>2){const last=types.pop();msg+=`${types.join(", ")}, or ${last}`}else 2===types.length?msg+=`${types[0]} or ${types[1]}`:msg+=types[0];return OPE(msg,RESPONSE_IS_NOT_JSON,response)}function randomBytes(){return b64u(crypto.getRandomValues(new Uint8Array(32)))}function getKeyAndKid(input){return input instanceof CryptoKey?{key:input}:input?.key instanceof CryptoKey?(void 0!==input.kid&&assertString(input.kid,'"kid"'),{key:input.key,kid:input.kid}):{}}function keyToJws(key){switch(key.algorithm.name){case"RSA-PSS":return function psAlg(key){switch(key.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new UnsupportedOperationError("unsupported RsaHashedKeyAlgorithm hash name",{cause:key})}}(key);case"RSASSA-PKCS1-v1_5":return function rsAlg(key){switch(key.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new UnsupportedOperationError("unsupported RsaHashedKeyAlgorithm hash name",{cause:key})}}(key);case"ECDSA":return function esAlg(key){switch(key.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new UnsupportedOperationError("unsupported EcKeyAlgorithm namedCurve",{cause:key})}}(key);case"Ed25519":case"EdDSA":return"Ed25519";default:throw new UnsupportedOperationError("unsupported CryptoKey algorithm name",{cause:key})}}function getClockSkew(client){const skew=client?.[clockSkew];return"number"==typeof skew&&Number.isFinite(skew)?skew:0}function getClockTolerance(client){const tolerance=client?.[clockTolerance];return"number"==typeof tolerance&&Number.isFinite(tolerance)&&-1!==Math.sign(tolerance)?tolerance:30}function epochTime(){return Math.floor(Date.now()/1e3)}function assertAs(as){if("object"!=typeof as||null===as)throw CodedTypeError('"as" must be an object',ERR_INVALID_ARG_TYPE);assertString(as.issuer,'"as.issuer"')}function assertClient(client){if("object"!=typeof client||null===client)throw CodedTypeError('"client" must be an object',ERR_INVALID_ARG_TYPE);assertString(client.client_id,'"client.client_id"')}function clientAssertionPayload(as,client){const now=epochTime()+getClockSkew(client);return{jti:randomBytes(),aud:as.issuer,exp:now+60,iat:now,nbf:now,iss:client.client_id,sub:client.client_id}}async function signJwt(header,payload,key){if(!key.usages.includes("sign"))throw CodedTypeError('CryptoKey instances used for signing assertions must include "sign" in their "usages"',ERR_INVALID_ARG_VALUE);const input=`${b64u(buf(JSON.stringify(header)))}.${b64u(buf(JSON.stringify(payload)))}`;return`${input}.${b64u(await crypto.subtle.sign(keyToSubtle(key),key,buf(input)))}`}const URLParse=URL.parse?(url,base)=>URL.parse(url,base):(url,base)=>{try{return new URL(url,base)}catch{return null}};function checkProtocol(url,enforceHttps){if(enforceHttps&&"https:"!==url.protocol)throw OPE("only requests to HTTPS are allowed",HTTP_REQUEST_FORBIDDEN,url);if("https:"!==url.protocol&&"http:"!==url.protocol)throw OPE("only HTTP and HTTPS requests are allowed",REQUEST_PROTOCOL_FORBIDDEN,url)}function validateEndpoint(value,endpoint,useMtlsAlias,enforceHttps){let url;if("string"!=typeof value||!(url=URLParse(value)))throw OPE("authorization server metadata does not contain a valid "+(useMtlsAlias?`"as.mtls_endpoint_aliases.${endpoint}"`:`"as.${endpoint}"`),void 0===value?MISSING_SERVER_METADATA:INVALID_SERVER_METADATA,{attribute:useMtlsAlias?`mtls_endpoint_aliases.${endpoint}`:endpoint});return checkProtocol(url,enforceHttps),url}function resolveEndpoint(as,endpoint,useMtlsAlias,enforceHttps){return useMtlsAlias&&as.mtls_endpoint_aliases&&endpoint in as.mtls_endpoint_aliases?validateEndpoint(as.mtls_endpoint_aliases[endpoint],endpoint,useMtlsAlias,enforceHttps):validateEndpoint(as[endpoint],endpoint,useMtlsAlias,enforceHttps)}class ResponseBodyError extends Error{cause;code;error;status;error_description;response;constructor(message,options){super(message,options),this.name=this.constructor.name,this.code=RESPONSE_BODY_ERROR,this.cause=options.cause,this.error=options.cause.error,this.status=options.response.status,this.error_description=options.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:options.response}),Error.captureStackTrace?.(this,this.constructor)}}class AuthorizationResponseError extends Error{cause;code;error;error_description;constructor(message,options){super(message,options),this.name=this.constructor.name,this.code=AUTHORIZATION_RESPONSE_ERROR,this.cause=options.cause,this.error=options.cause.get("error"),this.error_description=options.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class WWWAuthenticateChallengeError extends Error{cause;code;response;status;constructor(message,options){super(message,options),this.name=this.constructor.name,this.code=WWW_AUTHENTICATE_CHALLENGE,this.cause=options.cause,this.status=options.response.status,this.response=options.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}const tokenMatch="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",quotedParamMatcher="("+tokenMatch+')\\s*=\\s*"((?:[^"\\\\]|\\\\.)*)"',paramMatcher="("+tokenMatch+")\\s*=\\s*("+tokenMatch+")",schemeRE=new RegExp("^[,\\s]*("+tokenMatch+")\\s(.*)"),quotedParamRE=new RegExp("^[,\\s]*"+quotedParamMatcher+"[,\\s]*(.*)"),unquotedParamRE=new RegExp("^[,\\s]*"+paramMatcher+"[,\\s]*(.*)"),token68ParamRE=new RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+[=]{0,2})(?:$|[,\\s])(.*)");async function checkOAuthBodyError(response,expected,label){if(response.status!==expected){let err;if(err=await async function parseOAuthResponseErrorBody(response){if(response.status>399&&response.status<500){assertReadableResponse(response),assertApplicationJson(response);try{const json=await response.clone().json();if(isJsonObject(json)&&"string"==typeof json.error&&json.error.length)return json}catch{}}}(response))throw await(response.body?.cancel()),new ResponseBodyError("server responded with an error in the response body",{cause:err,response});throw OPE(`"response" is not a conform ${label} response (unexpected HTTP status code)`,RESPONSE_IS_NOT_CONFORM,response)}}function assertDPoP(option){if(!branded.has(option))throw CodedTypeError('"options.DPoP" is not a valid DPoPHandle',ERR_INVALID_ARG_VALUE)}async function resourceRequest(accessToken,method,url,headers,body,options){if(assertString(accessToken,'"accessToken"'),!(url instanceof URL))throw CodedTypeError('"url" must be an instance of URL',ERR_INVALID_ARG_TYPE);checkProtocol(url,!0!==options?.[allowInsecureRequests]),headers=prepareHeaders(headers),options?.DPoP&&(assertDPoP(options.DPoP),await options.DPoP.addProof(url,headers,method.toUpperCase(),accessToken)),headers.set("authorization",`${headers.has("dpop")?"DPoP":"Bearer"} ${accessToken}`);const response=await(options?.[build_customFetch]||fetch)(url.href,{body,headers:Object.fromEntries(headers.entries()),method,redirect:"manual",signal:signal(url,options?.signal)});return options?.DPoP?.cacheNonce(response),response}async function userInfoRequest(as,client,accessToken,options){assertAs(as),assertClient(client);const url=resolveEndpoint(as,"userinfo_endpoint",client.use_mtls_endpoint_aliases,!0!==options?.[allowInsecureRequests]),headers=prepareHeaders(options?.headers);return client.userinfo_signed_response_alg?headers.set("accept","application/jwt"):(headers.set("accept","application/json"),headers.append("accept","application/jwt")),resourceRequest(accessToken,"GET",url,headers,null,{...options,[clockSkew]:getClockSkew(client)})}const skipSubjectCheck=Symbol();function getContentType(input){return input.headers.get("content-type")?.split(";")[0]}async function processUserInfoResponse(as,client,expectedSubject,response,options){if(assertAs(as),assertClient(client),!looseInstanceOf(response,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);if(checkAuthenticationChallenges(response),200!==response.status)throw OPE('"response" is not a conform UserInfo Endpoint response (unexpected HTTP status code)',RESPONSE_IS_NOT_CONFORM,response);let json;if(assertReadableResponse(response),"application/jwt"===getContentType(response)){const{claims,jwt}=await validateJwt(await response.text(),checkSigningAlgorithm.bind(void 0,client.userinfo_signed_response_alg,as.userinfo_signing_alg_values_supported,void 0),getClockSkew(client),getClockTolerance(client),options?.[jweDecrypt]).then(validateOptionalAudience.bind(void 0,client.client_id)).then(validateOptionalIssuer.bind(void 0,as));jwtRefs.set(response,jwt),json=claims}else{if(client.userinfo_signed_response_alg)throw OPE("JWT UserInfo Response expected",JWT_USERINFO_EXPECTED,response);json=await getResponseJsonBody(response)}if(assertString(json.sub,'"response" body "sub" property',INVALID_RESPONSE,{body:json}),expectedSubject===skipSubjectCheck);else if(assertString(expectedSubject,'"expectedSubject"'),json.sub!==expectedSubject)throw OPE('unexpected "response" body "sub" property value',JSON_ATTRIBUTE_COMPARISON,{expected:expectedSubject,body:json,attribute:"sub"});return json}async function authenticatedRequest(as,client,clientAuthentication,url,body,headers,options){return await clientAuthentication(as,client,body,headers),headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(options?.[build_customFetch]||fetch)(url.href,{body,headers:Object.fromEntries(headers.entries()),method:"POST",redirect:"manual",signal:signal(url,options?.signal)})}async function tokenEndpointRequest(as,client,clientAuthentication,grantType,parameters,options){const url=resolveEndpoint(as,"token_endpoint",client.use_mtls_endpoint_aliases,!0!==options?.[allowInsecureRequests]);parameters.set("grant_type",grantType);const headers=prepareHeaders(options?.headers);headers.set("accept","application/json"),void 0!==options?.DPoP&&(assertDPoP(options.DPoP),await options.DPoP.addProof(url,headers,"POST"));const response=await authenticatedRequest(as,client,clientAuthentication,url,parameters,headers,options);return options?.DPoP?.cacheNonce(response),response}const idTokenClaims=new WeakMap,jwtRefs=new WeakMap;function getValidatedIdTokenClaims(ref){if(!ref.id_token)return;const claims=idTokenClaims.get(ref);if(!claims)throw CodedTypeError('"ref" was already garbage collected or did not resolve from the proper sources',ERR_INVALID_ARG_VALUE);return claims}async function processGenericAccessTokenResponse(as,client,response,additionalRequiredIdTokenClaims,options){if(assertAs(as),assertClient(client),!looseInstanceOf(response,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);checkAuthenticationChallenges(response),await checkOAuthBodyError(response,200,"Token Endpoint"),assertReadableResponse(response);const json=await getResponseJsonBody(response);if(assertString(json.access_token,'"response" body "access_token" property',INVALID_RESPONSE,{body:json}),assertString(json.token_type,'"response" body "token_type" property',INVALID_RESPONSE,{body:json}),json.token_type=json.token_type.toLowerCase(),"dpop"!==json.token_type&&"bearer"!==json.token_type)throw new UnsupportedOperationError("unsupported `token_type` value",{cause:{body:json}});if(void 0!==json.expires_in){let expiresIn="number"!=typeof json.expires_in?parseFloat(json.expires_in):json.expires_in;assertNumber(expiresIn,!0,'"response" body "expires_in" property',INVALID_RESPONSE,{body:json}),json.expires_in=expiresIn}if(void 0!==json.refresh_token&&assertString(json.refresh_token,'"response" body "refresh_token" property',INVALID_RESPONSE,{body:json}),void 0!==json.scope&&"string"!=typeof json.scope)throw OPE('"response" body "scope" property must be a string',INVALID_RESPONSE,{body:json});if(void 0!==json.id_token){assertString(json.id_token,'"response" body "id_token" property',INVALID_RESPONSE,{body:json});const requiredClaims=["aud","exp","iat","iss","sub"];!0===client.require_auth_time&&requiredClaims.push("auth_time"),void 0!==client.default_max_age&&(assertNumber(client.default_max_age,!0,'"client.default_max_age"'),requiredClaims.push("auth_time")),additionalRequiredIdTokenClaims?.length&&requiredClaims.push(...additionalRequiredIdTokenClaims);const{claims,jwt}=await validateJwt(json.id_token,checkSigningAlgorithm.bind(void 0,client.id_token_signed_response_alg,as.id_token_signing_alg_values_supported,"RS256"),getClockSkew(client),getClockTolerance(client),options?.[jweDecrypt]).then(validatePresence.bind(void 0,requiredClaims)).then(validateIssuer.bind(void 0,as)).then(validateAudience.bind(void 0,client.client_id));if(Array.isArray(claims.aud)&&1!==claims.aud.length){if(void 0===claims.azp)throw OPE('ID Token "aud" (audience) claim includes additional untrusted audiences',JWT_CLAIM_COMPARISON,{claims,claim:"aud"});if(claims.azp!==client.client_id)throw OPE('unexpected ID Token "azp" (authorized party) claim value',JWT_CLAIM_COMPARISON,{expected:client.client_id,claims,claim:"azp"})}void 0!==claims.auth_time&&assertNumber(claims.auth_time,!1,'ID Token "auth_time" (authentication time)',INVALID_RESPONSE,{claims}),jwtRefs.set(response,jwt),idTokenClaims.set(json,claims)}return json}function checkAuthenticationChallenges(response){let challenges;if(challenges=function parseWwwAuthenticateChallenges(response){if(!looseInstanceOf(response,Response))throw CodedTypeError('"response" must be an instance of Response',ERR_INVALID_ARG_TYPE);const header=response.headers.get("www-authenticate");if(null===header)return;const challenges=[];let rest=header;for(;rest;){let match=rest.match(schemeRE);const scheme=match?.[1].toLowerCase();if(rest=match?.[2],!scheme)return;const parameters={};let token68;for(;rest;){let key,value;if(match=rest.match(quotedParamRE)){if([,key,value,rest]=match,value.includes("\\"))try{value=JSON.parse(`"${value}"`)}catch{}parameters[key.toLowerCase()]=value}else{if(!(match=rest.match(unquotedParamRE))){if(match=rest.match(token68ParamRE)){if(Object.keys(parameters).length)break;[,token68,rest]=match;break}return}[,key,value,rest]=match,parameters[key.toLowerCase()]=value}}const challenge={scheme,parameters};token68&&(challenge.token68=token68),challenges.push(challenge)}return challenges.length?challenges:void 0}(response))throw new WWWAuthenticateChallengeError("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:challenges,response})}function validateOptionalAudience(expected,result){return void 0!==result.claims.aud?validateAudience(expected,result):result}function validateAudience(expected,result){if(Array.isArray(result.claims.aud)){if(!result.claims.aud.includes(expected))throw OPE('unexpected JWT "aud" (audience) claim value',JWT_CLAIM_COMPARISON,{expected,claims:result.claims,claim:"aud"})}else if(result.claims.aud!==expected)throw OPE('unexpected JWT "aud" (audience) claim value',JWT_CLAIM_COMPARISON,{expected,claims:result.claims,claim:"aud"});return result}function validateOptionalIssuer(as,result){return void 0!==result.claims.iss?validateIssuer(as,result):result}function validateIssuer(as,result){const expected=as[_expectedIssuer]?.(result)??as.issuer;if(result.claims.iss!==expected)throw OPE('unexpected JWT "iss" (issuer) claim value',JWT_CLAIM_COMPARISON,{expected,claims:result.claims,claim:"iss"});return result}const branded=new WeakSet;const nopkce=Symbol();const jwtClaimNames={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function validatePresence(required,result){for(const claim of required)if(void 0===result.claims[claim])throw OPE(`JWT "${claim}" (${jwtClaimNames[claim]}) claim missing`,INVALID_RESPONSE,{claims:result.claims});return result}const expectNoNonce=Symbol(),skipAuthTimeCheck=Symbol();async function processAuthorizationCodeResponse(as,client,response,options){return"string"==typeof options?.expectedNonce||"number"==typeof options?.maxAge||options?.requireIdToken?async function processAuthorizationCodeOpenIDResponse(as,client,response,expectedNonce,maxAge,options){const additionalRequiredClaims=[];switch(expectedNonce){case void 0:expectedNonce=expectNoNonce;break;case expectNoNonce:break;default:assertString(expectedNonce,'"expectedNonce" argument'),additionalRequiredClaims.push("nonce")}switch(maxAge??=client.default_max_age,maxAge){case void 0:maxAge=skipAuthTimeCheck;break;case skipAuthTimeCheck:break;default:assertNumber(maxAge,!0,'"maxAge" argument'),additionalRequiredClaims.push("auth_time")}const result=await processGenericAccessTokenResponse(as,client,response,additionalRequiredClaims,options);assertString(result.id_token,'"response" body "id_token" property',INVALID_RESPONSE,{body:result});const claims=getValidatedIdTokenClaims(result);if(maxAge!==skipAuthTimeCheck){const now=epochTime()+getClockSkew(client),tolerance=getClockTolerance(client);if(claims.auth_time+maxAge<now-tolerance)throw OPE("too much time has elapsed since the last End-User authentication",JWT_TIMESTAMP_CHECK,{claims,now,tolerance,claim:"auth_time"})}if(expectedNonce===expectNoNonce){if(void 0!==claims.nonce)throw OPE('unexpected ID Token "nonce" claim value',JWT_CLAIM_COMPARISON,{expected:void 0,claims,claim:"nonce"})}else if(claims.nonce!==expectedNonce)throw OPE('unexpected ID Token "nonce" claim value',JWT_CLAIM_COMPARISON,{expected:expectedNonce,claims,claim:"nonce"});return result}(as,client,response,options.expectedNonce,options.maxAge,{[jweDecrypt]:options[jweDecrypt]}):async function processAuthorizationCodeOAuth2Response(as,client,response,options){const result=await processGenericAccessTokenResponse(as,client,response,void 0,options),claims=getValidatedIdTokenClaims(result);if(claims){if(void 0!==client.default_max_age){assertNumber(client.default_max_age,!0,'"client.default_max_age"');const now=epochTime()+getClockSkew(client),tolerance=getClockTolerance(client);if(claims.auth_time+client.default_max_age<now-tolerance)throw OPE("too much time has elapsed since the last End-User authentication",JWT_TIMESTAMP_CHECK,{claims,now,tolerance,claim:"auth_time"})}if(void 0!==claims.nonce)throw OPE('unexpected ID Token "nonce" claim value',JWT_CLAIM_COMPARISON,{expected:void 0,claims,claim:"nonce"})}return result}(as,client,response,options)}const WWW_AUTHENTICATE_CHALLENGE="OAUTH_WWW_AUTHENTICATE_CHALLENGE",RESPONSE_BODY_ERROR="OAUTH_RESPONSE_BODY_ERROR",UNSUPPORTED_OPERATION="OAUTH_UNSUPPORTED_OPERATION",AUTHORIZATION_RESPONSE_ERROR="OAUTH_AUTHORIZATION_RESPONSE_ERROR",JWT_USERINFO_EXPECTED="OAUTH_JWT_USERINFO_EXPECTED",PARSE_ERROR="OAUTH_PARSE_ERROR",INVALID_RESPONSE="OAUTH_INVALID_RESPONSE",RESPONSE_IS_NOT_JSON="OAUTH_RESPONSE_IS_NOT_JSON",RESPONSE_IS_NOT_CONFORM="OAUTH_RESPONSE_IS_NOT_CONFORM",HTTP_REQUEST_FORBIDDEN="OAUTH_HTTP_REQUEST_FORBIDDEN",REQUEST_PROTOCOL_FORBIDDEN="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",JWT_TIMESTAMP_CHECK="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",JWT_CLAIM_COMPARISON="OAUTH_JWT_CLAIM_COMPARISON_FAILED",JSON_ATTRIBUTE_COMPARISON="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",MISSING_SERVER_METADATA="OAUTH_MISSING_SERVER_METADATA",INVALID_SERVER_METADATA="OAUTH_INVALID_SERVER_METADATA";function assertReadableResponse(response){if(response.bodyUsed)throw CodedTypeError('"response" body has been used already',ERR_INVALID_ARG_VALUE)}function checkRsaKeyAlgorithm(key){const{algorithm}=key;if("number"!=typeof algorithm.modulusLength||algorithm.modulusLength<2048)throw new UnsupportedOperationError(`unsupported ${algorithm.name} modulusLength`,{cause:key})}function ecdsaHashName(key){const{algorithm}=key;switch(algorithm.namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new UnsupportedOperationError("unsupported ECDSA namedCurve",{cause:key})}}function keyToSubtle(key){switch(key.algorithm.name){case"ECDSA":return{name:key.algorithm.name,hash:ecdsaHashName(key)};case"RSA-PSS":switch(checkRsaKeyAlgorithm(key),key.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:key.algorithm.name,saltLength:parseInt(key.algorithm.hash.name.slice(-3),10)>>3};default:throw new UnsupportedOperationError("unsupported RSA-PSS hash name",{cause:key})}case"RSASSA-PKCS1-v1_5":return checkRsaKeyAlgorithm(key),key.algorithm.name;case"Ed25519":return key.algorithm.name}throw new UnsupportedOperationError("unsupported CryptoKey algorithm name",{cause:key})}async function validateJwt(jws,checkAlg,clockSkew,clockTolerance,decryptJwt){let header,claims,{0:protectedHeader,1:payload,length}=jws.split(".");if(5===length){if(void 0===decryptJwt)throw new UnsupportedOperationError("JWE decryption is not configured",{cause:jws});jws=await decryptJwt(jws),({0:protectedHeader,1:payload,length}=jws.split("."))}if(3!==length)throw OPE("Invalid JWT",INVALID_RESPONSE,jws);try{header=JSON.parse(buf(b64u(protectedHeader)))}catch(cause){throw OPE("failed to parse JWT Header body as base64url encoded JSON",PARSE_ERROR,cause)}if(!isJsonObject(header))throw OPE("JWT Header must be a top level object",INVALID_RESPONSE,jws);if(checkAlg(header),void 0!==header.crit)throw new UnsupportedOperationError('no JWT "crit" header parameter extensions are supported',{cause:{header}});try{claims=JSON.parse(buf(b64u(payload)))}catch(cause){throw OPE("failed to parse JWT Payload body as base64url encoded JSON",PARSE_ERROR,cause)}if(!isJsonObject(claims))throw OPE("JWT Payload must be a top level object",INVALID_RESPONSE,jws);const now=epochTime()+clockSkew;if(void 0!==claims.exp){if("number"!=typeof claims.exp)throw OPE('unexpected JWT "exp" (expiration time) claim type',INVALID_RESPONSE,{claims});if(claims.exp<=now-clockTolerance)throw OPE('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',JWT_TIMESTAMP_CHECK,{claims,now,tolerance:clockTolerance,claim:"exp"})}if(void 0!==claims.iat&&"number"!=typeof claims.iat)throw OPE('unexpected JWT "iat" (issued at) claim type',INVALID_RESPONSE,{claims});if(void 0!==claims.iss&&"string"!=typeof claims.iss)throw OPE('unexpected JWT "iss" (issuer) claim type',INVALID_RESPONSE,{claims});if(void 0!==claims.nbf){if("number"!=typeof claims.nbf)throw OPE('unexpected JWT "nbf" (not before) claim type',INVALID_RESPONSE,{claims});if(claims.nbf>now+clockTolerance)throw OPE('unexpected JWT "nbf" (not before) claim value',JWT_TIMESTAMP_CHECK,{claims,now,tolerance:clockTolerance,claim:"nbf"})}if(void 0!==claims.aud&&"string"!=typeof claims.aud&&!Array.isArray(claims.aud))throw OPE('unexpected JWT "aud" (audience) claim type',INVALID_RESPONSE,{claims});return{header,claims,jwt:jws}}function checkSigningAlgorithm(client,issuer,fallback,header){if(void 0===client)if(Array.isArray(issuer)){if(!issuer.includes(header.alg))throw OPE('unexpected JWT "alg" header parameter',INVALID_RESPONSE,{header,expected:issuer,reason:"authorization server metadata"})}else{if(void 0===fallback)throw OPE('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client,issuer,fallback});if("string"==typeof fallback?header.alg!==fallback:"function"==typeof fallback?!fallback(header.alg):!fallback.includes(header.alg))throw OPE('unexpected JWT "alg" header parameter',INVALID_RESPONSE,{header,expected:fallback,reason:"default value"})}else if("string"==typeof client?header.alg!==client:!client.includes(header.alg))throw OPE('unexpected JWT "alg" header parameter',INVALID_RESPONSE,{header,expected:client,reason:"client configuration"})}function getURLSearchParameter(parameters,name){const{0:value,length}=parameters.getAll(name);if(length>1)throw OPE(`"${name}" parameter must be provided only once`,INVALID_RESPONSE);return value}const skipStateCheck=Symbol(),expectNoState=Symbol();function validateAuthResponse(as,client,parameters,expectedState){if(assertAs(as),assertClient(client),parameters instanceof URL&&(parameters=parameters.searchParams),!(parameters instanceof URLSearchParams))throw CodedTypeError('"parameters" must be an instance of URLSearchParams, or URL',ERR_INVALID_ARG_TYPE);if(getURLSearchParameter(parameters,"response"))throw OPE('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',INVALID_RESPONSE,{parameters});const iss=getURLSearchParameter(parameters,"iss"),state=getURLSearchParameter(parameters,"state");if(!iss&&as.authorization_response_iss_parameter_supported)throw OPE('response parameter "iss" (issuer) missing',INVALID_RESPONSE,{parameters});if(iss&&iss!==as.issuer)throw OPE('unexpected "iss" (issuer) response parameter value',INVALID_RESPONSE,{expected:as.issuer,parameters});switch(expectedState){case void 0:case expectNoState:if(void 0!==state)throw OPE('unexpected "state" response parameter encountered',INVALID_RESPONSE,{expected:void 0,parameters});break;case skipStateCheck:break;default:if(assertString(expectedState,'"expectedState" argument'),state!==expectedState)throw OPE(void 0===state?'response parameter "state" missing':'unexpected "state" response parameter value',INVALID_RESPONSE,{expected:expectedState,parameters})}if(getURLSearchParameter(parameters,"error"))throw new AuthorizationResponseError("authorization response from the server is an error",{cause:parameters});const id_token=getURLSearchParameter(parameters,"id_token"),token=getURLSearchParameter(parameters,"token");if(void 0!==id_token||void 0!==token)throw new UnsupportedOperationError("implicit and hybrid flows are not supported");return function brand(searchParams){return branded.add(searchParams),searchParams}(new URLSearchParams(parameters))}async function getResponseJsonBody(response,check=assertApplicationJson){let json;try{json=await response.json()}catch(cause){throw check(response),OPE('failed to parse "response" body as JSON',PARSE_ERROR,cause)}if(!isJsonObject(json))throw OPE('"response" body must be a top level object',INVALID_RESPONSE,{body:json});return json}const _nodiscoverycheck=Symbol(),_expectedIssuer=Symbol();async function sealCookie(name,payload,options){const{cookies,logger}=options,cookie=cookies[name],expires=new Date;expires.setTime(expires.getTime()+9e5),logger.debug(`CREATE_${name.toUpperCase()}`,{name:cookie.name,payload,COOKIE_TTL:900,expires});const encoded=await jwt_encode({...options.jwt,maxAge:900,token:{value:payload},salt:cookie.name}),cookieOptions={...cookie.options,expires};return{name:cookie.name,value:encoded,options:cookieOptions}}async function checks_parseCookie(name,value,options){try{const{logger,cookies,jwt}=options;if(logger.debug(`PARSE_${name.toUpperCase()}`,{cookie:value}),!value)throw new errors.k9(`${name} cookie was missing`);const parsed=await jwt_decode({...jwt,token:value,salt:cookies[name].name});if(parsed?.value)return parsed.value;throw new Error("Invalid cookie")}catch(error){throw new errors.k9(`${name} value could not be parsed`,{cause:error})}}function clearCookie(name,options,resCookies){const{logger,cookies}=options,cookie=cookies[name];logger.debug(`CLEAR_${name.toUpperCase()}`,{cookie}),resCookies.push({name:cookie.name,value:"",options:{...cookies[name].options,maxAge:0}})}function useCookie(check,name){return async function(cookies,resCookies,options){const{provider,logger}=options;if(!provider?.checks?.includes(check))return;const cookieValue=cookies?.[options.cookies[name].name];logger.debug(`USE_${name.toUpperCase()}`,{value:cookieValue});const parsed=await checks_parseCookie(name,cookieValue,options);return clearCookie(name,options,resCookies),parsed}}const pkce={async create(options){const code_verifier=function generateRandomCodeVerifier(){return randomBytes()}(),value=await async function calculatePKCECodeChallenge(codeVerifier){return assertString(codeVerifier,"codeVerifier"),b64u(await crypto.subtle.digest("SHA-256",buf(codeVerifier)))}(code_verifier);return{cookie:await sealCookie("pkceCodeVerifier",code_verifier,options),value}},use:useCookie("pkce","pkceCodeVerifier")},checks_state={async create(options,origin){const{provider}=options;if(!provider.checks.includes("state")){if(origin)throw new errors.k9("State data was provided but the provider is not configured to use state");return}const payload={origin,random:randomBytes()},value=await jwt_encode({secret:options.jwt.secret,token:payload,salt:"encodedState",maxAge:900});return{cookie:await sealCookie("state",value,options),value}},use:useCookie("state","state"),async decode(state,options){try{options.logger.debug("DECODE_STATE",{state});const payload=await jwt_decode({secret:options.jwt.secret,token:state,salt:"encodedState"});if(payload)return payload;throw new Error("Invalid state")}catch(error){throw new errors.k9("State could not be decoded",{cause:error})}}},checks_nonce={async create(options){if(!options.provider.checks.includes("nonce"))return;const value=function generateRandomNonce(){return randomBytes()}();return{cookie:await sealCookie("nonce",value,options),value}},use:useCookie("nonce","nonce")},webauthnChallenge={create:async(options,challenge,registerData)=>({cookie:await sealCookie("webauthnChallenge",await jwt_encode({secret:options.jwt.secret,token:{challenge,registerData},salt:"encodedWebauthnChallenge",maxAge:900}),options)}),async use(options,cookies,resCookies){const cookieValue=cookies?.[options.cookies.webauthnChallenge.name],parsed=await checks_parseCookie("webauthnChallenge",cookieValue,options),payload=await jwt_decode({secret:options.jwt.secret,token:parsed,salt:"encodedWebauthnChallenge"});if(clearCookie("webauthnChallenge",options,resCookies),!payload)throw new errors.k9("WebAuthn challenge was missing");return payload}};function callback_formUrlEncode(token){return encodeURIComponent(token).replace(/%20/g,"+")}async function handleOAuth(params,cookies,options){const{logger,provider}=options;let as;const{token,userinfo}=provider;if(token?.url&&"authjs.dev"!==token.url.host||userinfo?.url&&"authjs.dev"!==userinfo.url.host)as={issuer:provider.issuer??"https://authjs.dev",token_endpoint:token?.url.toString(),userinfo_endpoint:userinfo?.url.toString()};else{const issuer=new URL(provider.issuer),discoveryResponse=await discoveryRequest(issuer,{[allowInsecureRequests]:!0,[build_customFetch]:provider[customFetch]});if(as=await processDiscoveryResponse(issuer,discoveryResponse),!as.token_endpoint)throw new TypeError("TODO: Authorization server did not provide a token endpoint.");if(!as.userinfo_endpoint)throw new TypeError("TODO: Authorization server did not provide a userinfo endpoint.")}const client={client_id:provider.clientId,...provider.client};let clientAuth;switch(client.token_endpoint_auth_method){case void 0:case"client_secret_basic":clientAuth=(_as,_client,_body,headers)=>{headers.set("authorization",function clientSecretBasic(clientId,clientSecret){const username=callback_formUrlEncode(clientId),password=callback_formUrlEncode(clientSecret);return`Basic ${btoa(`${username}:${password}`)}`}(provider.clientId,provider.clientSecret))};break;case"client_secret_post":clientAuth=function ClientSecretPost(clientSecret){return assertString(clientSecret,'"clientSecret"'),(_as,client,body,_headers)=>{body.set("client_id",client.client_id),body.set("client_secret",clientSecret)}}(provider.clientSecret);break;case"client_secret_jwt":clientAuth=function ClientSecretJwt(clientSecret,options){assertString(clientSecret,'"clientSecret"');const modify=options?.[modifyAssertion];let key;return async(as,client,body,_headers)=>{key||=await crypto.subtle.importKey("raw",buf(clientSecret),{hash:"SHA-256",name:"HMAC"},!1,["sign"]);const header={alg:"HS256"},payload=clientAssertionPayload(as,client);modify?.(header,payload);const data=`${b64u(buf(JSON.stringify(header)))}.${b64u(buf(JSON.stringify(payload)))}`,hmac=await crypto.subtle.sign(key.algorithm,key,buf(data));body.set("client_id",client.client_id),body.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),body.set("client_assertion",`${data}.${b64u(new Uint8Array(hmac))}`)}}(provider.clientSecret);break;case"private_key_jwt":clientAuth=function PrivateKeyJwt(clientPrivateKey,options){const{key,kid}=getKeyAndKid(clientPrivateKey);return assertPrivateKey(key,'"clientPrivateKey.key"'),async(as,client,body,_headers)=>{const header={alg:keyToJws(key),kid},payload=clientAssertionPayload(as,client);options?.[modifyAssertion]?.(header,payload),body.set("client_id",client.client_id),body.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),body.set("client_assertion",await signJwt(header,payload,key))}}(provider.token.clientPrivateKey,{[modifyAssertion](_header,payload){payload.aud=[as.issuer,as.token_endpoint]}});break;case"none":clientAuth=(_as,client,body,_headers)=>{body.set("client_id",client.client_id)};break;default:throw new Error("unsupported client authentication method")}const resCookies=[],state=await checks_state.use(cookies,resCookies,options);let codeGrantParams;try{codeGrantParams=validateAuthResponse(as,client,new URLSearchParams(params),provider.checks.includes("state")?state:skipStateCheck)}catch(err){if(err instanceof AuthorizationResponseError){const cause={providerId:provider.id,...Object.fromEntries(err.cause.entries())};throw logger.debug("OAuthCallbackError",cause),new errors.rk("OAuth Provider returned an error",cause)}throw err}const codeVerifier=await pkce.use(cookies,resCookies,options);let redirect_uri=provider.callbackUrl;!options.isOnRedirectProxy&&provider.redirectProxyUrl&&(redirect_uri=provider.redirectProxyUrl);let codeGrantResponse=await async function authorizationCodeGrantRequest(as,client,clientAuthentication,callbackParameters,redirectUri,codeVerifier,options){if(assertAs(as),assertClient(client),!branded.has(callbackParameters))throw CodedTypeError('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',ERR_INVALID_ARG_VALUE);assertString(redirectUri,'"redirectUri"');const code=getURLSearchParameter(callbackParameters,"code");if(!code)throw OPE('no authorization code in "callbackParameters"',INVALID_RESPONSE);const parameters=new URLSearchParams(options?.additionalParameters);return parameters.set("redirect_uri",redirectUri),parameters.set("code",code),codeVerifier!==nopkce&&(assertString(codeVerifier,'"codeVerifier"'),parameters.set("code_verifier",codeVerifier)),tokenEndpointRequest(as,client,clientAuthentication,"authorization_code",parameters,options)}(as,client,clientAuth,codeGrantParams,redirect_uri,codeVerifier??"decoy",{[allowInsecureRequests]:!0,[build_customFetch]:(...args)=>(provider.checks.includes("pkce")||args[1].body.delete("code_verifier"),(provider[customFetch]??fetch)(...args))});provider.token?.conform&&(codeGrantResponse=await provider.token.conform(codeGrantResponse.clone())??codeGrantResponse);let profile={};const requireIdToken=function isOIDCProvider(provider){return"oidc"===provider.type}(provider);if(provider[conformInternal])switch(provider.id){case"microsoft-entra-id":case"azure-ad":{const responseJson=await codeGrantResponse.clone().json();if(responseJson.error){const cause={providerId:provider.id,...responseJson};throw new errors.rk(`OAuth Provider returned an error: ${responseJson.error}`,cause)}const{tid}=function decodeJwt(jwt){if("string"!=typeof jwt)throw new JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");const{1:payload,length}=jwt.split(".");if(5===length)throw new JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==length)throw new JWTInvalid("Invalid JWT");if(!payload)throw new JWTInvalid("JWTs must contain a payload");let decoded,result;try{decoded=decode(payload)}catch{throw new JWTInvalid("Failed to base64url decode the payload")}try{result=JSON.parse(decoder.decode(decoded))}catch{throw new JWTInvalid("Failed to parse the decoded payload as JSON")}if(!is_object(result))throw new JWTInvalid("Invalid JWT Claims Set");return result}(responseJson.id_token);if("string"==typeof tid){const tenantRe=/microsoftonline\.com\/(\w+)\/v2\.0/,tenantId=as.issuer?.match(tenantRe)?.[1]??"common",issuer=new URL(as.issuer.replace(tenantId,tid)),discoveryResponse=await discoveryRequest(issuer,{[build_customFetch]:provider[customFetch]});as=await processDiscoveryResponse(issuer,discoveryResponse)}break}}const processedCodeResponse=await processAuthorizationCodeResponse(as,client,codeGrantResponse,{expectedNonce:await checks_nonce.use(cookies,resCookies,options),requireIdToken}),tokens=processedCodeResponse;if(requireIdToken){const idTokenClaims=getValidatedIdTokenClaims(processedCodeResponse);if(profile=idTokenClaims,provider[conformInternal]&&"apple"===provider.id)try{profile.user=JSON.parse(params?.user)}catch{}if(!1===provider.idToken){const userinfoResponse=await userInfoRequest(as,client,processedCodeResponse.access_token,{[build_customFetch]:provider[customFetch],[allowInsecureRequests]:!0});profile=await processUserInfoResponse(as,client,idTokenClaims.sub,userinfoResponse)}}else if(userinfo?.request){const _profile=await userinfo.request({tokens,provider});_profile instanceof Object&&(profile=_profile)}else{if(!userinfo?.url)throw new TypeError("No userinfo endpoint configured");{const userinfoResponse=await userInfoRequest(as,client,processedCodeResponse.access_token,{[build_customFetch]:provider[customFetch],[allowInsecureRequests]:!0});profile=await userinfoResponse.json()}}tokens.expires_in&&(tokens.expires_at=Math.floor(Date.now()/1e3)+Number(tokens.expires_in));const profileResult=await async function getUserAndAccount(OAuthProfile,provider,tokens,logger){try{const userFromProfile=await provider.profile(OAuthProfile,tokens);return{user:{...userFromProfile,id:crypto.randomUUID(),email:userFromProfile.email?.toLowerCase()},account:{...tokens,provider:provider.id,type:provider.type,providerAccountId:userFromProfile.id??crypto.randomUUID()}}}catch(e){logger.debug("getProfile error details",OAuthProfile),logger.error(new errors._z(e,{provider:provider.id}))}}(profile,provider,tokens,logger);return{...profileResult,profile,cookies:resCookies}}var Buffer=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js").Buffer;async function getRegistrationResponse(options,request,user,resCookies){const regOptions=await async function getRegistrationOptions(options,request,user){const{provider,adapter}=options,authenticators=user.id?await adapter.listAuthenticatorsByUserId(user.id):null,userID=randomString(32),relayingParty=provider.getRelayingParty(options,request);return await provider.simpleWebAuthn.generateRegistrationOptions({...provider.registrationOptions,userID,userName:user.email,userDisplayName:user.name??void 0,rpID:relayingParty.id,rpName:relayingParty.name,excludeCredentials:authenticators?.map(a=>({id:fromBase64(a.credentialID),type:"public-key",transports:stringToTransports(a.transports)}))})}(options,request,user),{cookie}=await webauthnChallenge.create(options,regOptions.challenge,user);return{status:200,cookies:[...resCookies??[],cookie],body:{action:"register",options:regOptions},headers:{"Content-Type":"application/json"}}}async function getAuthenticationResponse(options,request,user,resCookies){const authOptions=await async function getAuthenticationOptions(options,request,user){const{provider,adapter}=options,authenticators=user&&user.id?await adapter.listAuthenticatorsByUserId(user.id):null,relayingParty=provider.getRelayingParty(options,request);return await provider.simpleWebAuthn.generateAuthenticationOptions({...provider.authenticationOptions,rpID:relayingParty.id,allowCredentials:authenticators?.map(a=>({id:fromBase64(a.credentialID),type:"public-key",transports:stringToTransports(a.transports)}))})}(options,request,user),{cookie}=await webauthnChallenge.create(options,authOptions.challenge);return{status:200,cookies:[...resCookies??[],cookie],body:{action:"authenticate",options:authOptions},headers:{"Content-Type":"application/json"}}}function assertInternalOptionsWebAuthn(options){const{provider,adapter}=options;if(!adapter)throw new errors.OZ("An adapter is required for the WebAuthn provider");if(!provider||"webauthn"!==provider.type)throw new errors.Hj("Provider must be WebAuthn");return{...options,provider,adapter}}function fromAdapterAuthenticator(authenticator){return{...authenticator,credentialDeviceType:authenticator.credentialDeviceType,transports:stringToTransports(authenticator.transports),credentialID:fromBase64(authenticator.credentialID),credentialPublicKey:fromBase64(authenticator.credentialPublicKey)}}function fromBase64(base64){return new Uint8Array(Buffer.from(base64,"base64"))}function toBase64(bytes){return Buffer.from(bytes).toString("base64")}function stringToTransports(tstring){return tstring?tstring.split(","):void 0}async function callback(request,options,sessionStore,cookies){if(!options.provider)throw new errors.Hj("Callback route called without provider");const{query,body,method,headers}=request,{provider,adapter,url,callbackUrl,pages,jwt,events,callbacks,session:{strategy:sessionStrategy,maxAge:sessionMaxAge},logger}=options,useJwtSession="jwt"===sessionStrategy;try{if("oauth"===provider.type||"oidc"===provider.type){const params="form_post"===provider.authorization?.url.searchParams.get("response_mode")?body:query;if(options.isOnRedirectProxy&&params?.state){const parsedState=await checks_state.decode(params.state,options);if(parsedState?.origin&&new URL(parsedState.origin).origin!==options.url.origin){const proxyRedirect=`${parsedState.origin}?${new URLSearchParams(params)}`;return logger.debug("Proxy redirecting to",proxyRedirect),{redirect:proxyRedirect,cookies}}}const authorizationResult=await handleOAuth(params,request.cookies,options);authorizationResult.cookies.length&&cookies.push(...authorizationResult.cookies),logger.debug("authorization result",authorizationResult);const{user:userFromProvider,account,profile:OAuthProfile}=authorizationResult;if(!userFromProvider||!account||!OAuthProfile)return{redirect:`${url}/signin`,cookies};let userByAccount;if(adapter){const{getUserByAccount}=adapter;userByAccount=await getUserByAccount({providerAccountId:account.providerAccountId,provider:provider.id})}const redirect=await handleAuthorized({user:userByAccount??userFromProvider,account,profile:OAuthProfile},options);if(redirect)return{redirect,cookies};const{user,session,isNewUser}=await handleLoginOrRegister(sessionStore.value,userFromProvider,account,options);if(useJwtSession){const defaultToken={name:user.name,email:user.email,picture:user.image,sub:user.id?.toString()},token=await callbacks.jwt({token:defaultToken,user,account,profile:OAuthProfile,isNewUser,trigger:isNewUser?"signUp":"signIn"});if(null===token)cookies.push(...sessionStore.clean());else{const salt=options.cookies.sessionToken.name,newToken=await jwt.encode({...jwt,token,salt}),cookieExpires=new Date;cookieExpires.setTime(cookieExpires.getTime()+1e3*sessionMaxAge);const sessionCookies=sessionStore.chunk(newToken,{expires:cookieExpires});cookies.push(...sessionCookies)}}else cookies.push({name:options.cookies.sessionToken.name,value:session.sessionToken,options:{...options.cookies.sessionToken.options,expires:session.expires}});return await(events.signIn?.({user,account,profile:OAuthProfile,isNewUser})),isNewUser&&pages.newUser?{redirect:`${pages.newUser}${pages.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl})}`,cookies}:{redirect:callbackUrl,cookies}}if("email"===provider.type){const paramToken=query?.token,paramIdentifier=query?.email;if(!paramToken){const e=new TypeError("Missing token. The sign-in URL was manually opened without token or the link was not sent correctly in the email.",{cause:{hasToken:!!paramToken}});throw e.name="Configuration",e}const secret=provider.secret??options.secret,invite=await adapter.useVerificationToken({identifier:paramIdentifier,token:await createHash(`${paramToken}${secret}`)}),hasInvite=!!invite,expired=hasInvite&&invite.expires.valueOf()<Date.now();if(!hasInvite||expired||paramIdentifier&&invite.identifier!==paramIdentifier)throw new errors.o6({hasInvite,expired});const{identifier}=invite,user=await adapter.getUserByEmail(identifier)??{id:crypto.randomUUID(),email:identifier,emailVerified:null},account={providerAccountId:user.email,userId:user.id,type:"email",provider:provider.id},redirect=await handleAuthorized({user,account},options);if(redirect)return{redirect,cookies};const{user:loggedInUser,session,isNewUser}=await handleLoginOrRegister(sessionStore.value,user,account,options);if(useJwtSession){const defaultToken={name:loggedInUser.name,email:loggedInUser.email,picture:loggedInUser.image,sub:loggedInUser.id?.toString()},token=await callbacks.jwt({token:defaultToken,user:loggedInUser,account,isNewUser,trigger:isNewUser?"signUp":"signIn"});if(null===token)cookies.push(...sessionStore.clean());else{const salt=options.cookies.sessionToken.name,newToken=await jwt.encode({...jwt,token,salt}),cookieExpires=new Date;cookieExpires.setTime(cookieExpires.getTime()+1e3*sessionMaxAge);const sessionCookies=sessionStore.chunk(newToken,{expires:cookieExpires});cookies.push(...sessionCookies)}}else cookies.push({name:options.cookies.sessionToken.name,value:session.sessionToken,options:{...options.cookies.sessionToken.options,expires:session.expires}});return await(events.signIn?.({user:loggedInUser,account,isNewUser})),isNewUser&&pages.newUser?{redirect:`${pages.newUser}${pages.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl})}`,cookies}:{redirect:callbackUrl,cookies}}if("credentials"===provider.type&&"POST"===method){const credentials=body??{};Object.entries(query??{}).forEach(([k,v])=>url.searchParams.set(k,v));const user=await provider.authorize(credentials,new Request(url,{headers,method,body:JSON.stringify(body)}));if(!user)throw new errors.xz;user.id=user.id?.toString()??crypto.randomUUID();const account={providerAccountId:user.id,type:"credentials",provider:provider.id},redirect=await handleAuthorized({user,account,credentials},options);if(redirect)return{redirect,cookies};const defaultToken={name:user.name,email:user.email,picture:user.image,sub:user.id},token=await callbacks.jwt({token:defaultToken,user,account,isNewUser:!1,trigger:"signIn"});if(null===token)cookies.push(...sessionStore.clean());else{const salt=options.cookies.sessionToken.name,newToken=await jwt.encode({...jwt,token,salt}),cookieExpires=new Date;cookieExpires.setTime(cookieExpires.getTime()+1e3*sessionMaxAge);const sessionCookies=sessionStore.chunk(newToken,{expires:cookieExpires});cookies.push(...sessionCookies)}return await(events.signIn?.({user,account})),{redirect:callbackUrl,cookies}}if("webauthn"===provider.type&&"POST"===method){const action=request.body?.action;if("string"!=typeof action||"authenticate"!==action&&"register"!==action)throw new errors.lR("Invalid action parameter");const localOptions=assertInternalOptionsWebAuthn(options);let user,account,authenticator;switch(action){case"authenticate":{const verified=await async function verifyAuthenticate(options,request,resCookies){const{adapter,provider}=options,data=request.body&&"string"==typeof request.body.data?JSON.parse(request.body.data):void 0;if(!data||"object"!=typeof data||!("id"in data)||"string"!=typeof data.id)throw new errors.lR("Invalid WebAuthn Authentication response");const credentialID=toBase64(fromBase64(data.id)),authenticator=await adapter.getAuthenticator(credentialID);if(!authenticator)throw new errors.lR(`WebAuthn authenticator not found in database: ${JSON.stringify({credentialID})}`);const{challenge:expectedChallenge}=await webauthnChallenge.use(options,request.cookies,resCookies);let verification;try{const relayingParty=provider.getRelayingParty(options,request);verification=await provider.simpleWebAuthn.verifyAuthenticationResponse({...provider.verifyAuthenticationOptions,expectedChallenge,response:data,authenticator:fromAdapterAuthenticator(authenticator),expectedOrigin:relayingParty.origin,expectedRPID:relayingParty.id})}catch(e){throw new errors.w2(e)}const{verified,authenticationInfo}=verification;if(!verified)throw new errors.w2("WebAuthn authentication response could not be verified");try{const{newCounter}=authenticationInfo;await adapter.updateAuthenticatorCounter(authenticator.credentialID,newCounter)}catch(e){throw new errors.om(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({credentialID,oldCounter:authenticator.counter,newCounter:authenticationInfo.newCounter})}`,e)}const account=await adapter.getAccount(authenticator.providerAccountId,provider.id);if(!account)throw new errors.lR(`WebAuthn account not found in database: ${JSON.stringify({credentialID,providerAccountId:authenticator.providerAccountId})}`);const user=await adapter.getUser(account.userId);if(!user)throw new errors.lR(`WebAuthn user not found in database: ${JSON.stringify({credentialID,providerAccountId:authenticator.providerAccountId,userID:account.userId})}`);return{account,user}}(localOptions,request,cookies);user=verified.user,account=verified.account;break}case"register":{const verified=await async function verifyRegister(options,request,resCookies){const{provider}=options,data=request.body&&"string"==typeof request.body.data?JSON.parse(request.body.data):void 0;if(!data||"object"!=typeof data||!("id"in data)||"string"!=typeof data.id)throw new errors.lR("Invalid WebAuthn Registration response");const{challenge:expectedChallenge,registerData:user}=await webauthnChallenge.use(options,request.cookies,resCookies);if(!user)throw new errors.lR("Missing user registration data in WebAuthn challenge cookie");let verification;try{const relayingParty=provider.getRelayingParty(options,request);verification=await provider.simpleWebAuthn.verifyRegistrationResponse({...provider.verifyRegistrationOptions,expectedChallenge,response:data,expectedOrigin:relayingParty.origin,expectedRPID:relayingParty.id})}catch(e){throw new errors.w2(e)}if(!verification.verified||!verification.registrationInfo)throw new errors.w2("WebAuthn registration response could not be verified");const account={providerAccountId:toBase64(verification.registrationInfo.credentialID),provider:options.provider.id,type:provider.type};var transports;return{user,account,authenticator:{providerAccountId:account.providerAccountId,counter:verification.registrationInfo.counter,credentialID:toBase64(verification.registrationInfo.credentialID),credentialPublicKey:toBase64(verification.registrationInfo.credentialPublicKey),credentialBackedUp:verification.registrationInfo.credentialBackedUp,credentialDeviceType:verification.registrationInfo.credentialDeviceType,transports:(transports=data.response.transports,transports?.join(","))}}}(options,request,cookies);user=verified.user,account=verified.account,authenticator=verified.authenticator;break}}await handleAuthorized({user,account},options);const{user:loggedInUser,isNewUser,session,account:currentAccount}=await handleLoginOrRegister(sessionStore.value,user,account,options);if(!currentAccount)throw new errors.lR("Error creating or finding account");if(authenticator&&loggedInUser.id&&await localOptions.adapter.createAuthenticator({...authenticator,userId:loggedInUser.id}),useJwtSession){const defaultToken={name:loggedInUser.name,email:loggedInUser.email,picture:loggedInUser.image,sub:loggedInUser.id?.toString()},token=await callbacks.jwt({token:defaultToken,user:loggedInUser,account:currentAccount,isNewUser,trigger:isNewUser?"signUp":"signIn"});if(null===token)cookies.push(...sessionStore.clean());else{const salt=options.cookies.sessionToken.name,newToken=await jwt.encode({...jwt,token,salt}),cookieExpires=new Date;cookieExpires.setTime(cookieExpires.getTime()+1e3*sessionMaxAge);const sessionCookies=sessionStore.chunk(newToken,{expires:cookieExpires});cookies.push(...sessionCookies)}}else cookies.push({name:options.cookies.sessionToken.name,value:session.sessionToken,options:{...options.cookies.sessionToken.options,expires:session.expires}});return await(events.signIn?.({user:loggedInUser,account:currentAccount,isNewUser})),isNewUser&&pages.newUser?{redirect:`${pages.newUser}${pages.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl})}`,cookies}:{redirect:callbackUrl,cookies}}throw new errors.Hj(`Callback for provider type (${provider.type}) is not supported`)}catch(e){if(e instanceof errors.lR)throw e;const error=new errors.t3(e,{provider:provider.id});throw logger.debug("callback route error details",{method,query,body}),error}}async function handleAuthorized(params,config){let authorized;const{signIn,redirect}=config.callbacks;try{authorized=await signIn(params)}catch(e){if(e instanceof errors.lR)throw e;throw new errors.Oy(e)}if(!authorized)throw new errors.Oy("AccessDenied");if("string"==typeof authorized)return await redirect({url:authorized,baseUrl:config.url.origin})}async function session(options,sessionStore,cookies,isUpdate,newSession){const{adapter,jwt,events,callbacks,logger,session:{strategy:sessionStrategy,maxAge:sessionMaxAge}}=options,response={body:null,headers:{"Content-Type":"application/json",...!isUpdate&&{"Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"}},cookies},sessionToken=sessionStore.value;if(!sessionToken)return response;if("jwt"===sessionStrategy){try{const salt=options.cookies.sessionToken.name,payload=await jwt.decode({...jwt,token:sessionToken,salt});if(!payload)throw new Error("Invalid JWT");const token=await callbacks.jwt({token:payload,...isUpdate&&{trigger:"update"},session:newSession}),newExpires=fromDate(sessionMaxAge);if(null!==token){const session={user:{name:token.name,email:token.email,image:token.picture},expires:newExpires.toISOString()},newSession=await callbacks.session({session,token});response.body=newSession;const newToken=await jwt.encode({...jwt,token,salt}),sessionCookies=sessionStore.chunk(newToken,{expires:newExpires});response.cookies?.push(...sessionCookies),await(events.session?.({session:newSession,token}))}else response.cookies?.push(...sessionStore.clean())}catch(e){logger.error(new errors.SW(e)),response.cookies?.push(...sessionStore.clean())}return response}try{const{getSessionAndUser,deleteSession,updateSession}=adapter;let userAndSession=await getSessionAndUser(sessionToken);if(userAndSession&&userAndSession.session.expires.valueOf()<Date.now()&&(await deleteSession(sessionToken),userAndSession=null),userAndSession){const{user,session}=userAndSession,sessionUpdateAge=options.session.updateAge,sessionIsDueToBeUpdatedDate=session.expires.valueOf()-1e3*sessionMaxAge+1e3*sessionUpdateAge,newExpires=fromDate(sessionMaxAge);sessionIsDueToBeUpdatedDate<=Date.now()&&await updateSession({sessionToken,expires:newExpires});const sessionPayload=await callbacks.session({session:{...session,user},user,newSession,...isUpdate?{trigger:"update"}:{}});response.body=sessionPayload,response.cookies?.push({name:options.cookies.sessionToken.name,value:sessionToken,options:{...options.cookies.sessionToken.options,expires:newExpires}}),await(events.session?.({session:sessionPayload}))}else sessionToken&&response.cookies?.push(...sessionStore.clean())}catch(e){logger.error(new errors.QU(e))}return response}function defaultNormalizer(email){if(!email)throw new Error("Missing email from request body.");let[local,domain]=email.toLowerCase().trim().split("@");return domain=domain.split(",")[0],`${local}@${domain}`}async function signIn(request,cookies,options){const signInUrl=`${options.url.origin}${options.basePath}/signin`;if(!options.provider)return{redirect:signInUrl,cookies};switch(options.provider.type){case"oauth":case"oidc":{const{redirect,cookies:authCookies}=await async function getAuthorizationUrl(query,options){const{logger,provider}=options;let url=provider.authorization?.url;if(!url||"authjs.dev"===url.host){const issuer=new URL(provider.issuer),discoveryResponse=await discoveryRequest(issuer,{[build_customFetch]:provider[customFetch],[allowInsecureRequests]:!0}),as=await processDiscoveryResponse(issuer,discoveryResponse).catch(error=>{if(!(error instanceof TypeError)||"Invalid URL"!==error.message)throw error;throw new TypeError(`Discovery request responded with an invalid issuer. expected: ${issuer}`)});if(!as.authorization_endpoint)throw new TypeError("Authorization server did not provide an authorization endpoint.");url=new URL(as.authorization_endpoint)}const authParams=url.searchParams;let data,redirect_uri=provider.callbackUrl;!options.isOnRedirectProxy&&provider.redirectProxyUrl&&(redirect_uri=provider.redirectProxyUrl,data=provider.callbackUrl,logger.debug("using redirect proxy",{redirect_uri,data}));const params=Object.assign({response_type:"code",client_id:provider.clientId,redirect_uri,...provider.authorization?.params},Object.fromEntries(provider.authorization?.url.searchParams??[]),query);for(const k in params)authParams.set(k,params[k]);const cookies=[];"form_post"===provider.authorization?.url.searchParams.get("response_mode")&&(options.cookies.state.options.sameSite="none",options.cookies.state.options.secure=!0,options.cookies.nonce.options.sameSite="none",options.cookies.nonce.options.secure=!0);const state=await checks_state.create(options,data);if(state&&(authParams.set("state",state.value),cookies.push(state.cookie)),provider.checks?.includes("pkce")){const{value,cookie}=await pkce.create(options);authParams.set("code_challenge",value),authParams.set("code_challenge_method","S256"),cookies.push(cookie)}const nonce=await checks_nonce.create(options);return nonce&&(authParams.set("nonce",nonce.value),cookies.push(nonce.cookie)),"oidc"!==provider.type||url.searchParams.has("scope")||url.searchParams.set("scope","openid profile email"),logger.debug("authorization url is ready",{url,cookies,provider}),{redirect:url.toString(),cookies}}(request.query,options);return authCookies&&cookies.push(...authCookies),{redirect,cookies}}case"email":{const response=await async function sendToken(request,options){const{body}=request,{provider,callbacks,adapter}=options,email=(provider.normalizeIdentifier??defaultNormalizer)(body?.email),defaultUser={id:crypto.randomUUID(),email,emailVerified:null},user=await adapter.getUserByEmail(email)??defaultUser,account={providerAccountId:email,userId:user.id,type:"email",provider:provider.id};let authorized;try{authorized=await callbacks.signIn({user,account,email:{verificationRequest:!0}})}catch(e){throw new errors.Oy(e)}if(!authorized)throw new errors.Oy("AccessDenied");if("string"==typeof authorized)return{redirect:await callbacks.redirect({url:authorized,baseUrl:options.url.origin})};const{callbackUrl,theme}=options,token=await(provider.generateVerificationToken?.())??randomString(32),expires=new Date(Date.now()+1e3*(provider.maxAge??86400)),secret=provider.secret??options.secret,baseUrl=new URL(options.basePath,options.url.origin),sendRequest=provider.sendVerificationRequest({identifier:email,token,expires,url:`${baseUrl}/callback/${provider.id}?${new URLSearchParams({callbackUrl,token,email})}`,provider,theme,request:toRequest(request)}),createToken=adapter.createVerificationToken?.({identifier:email,token:await createHash(`${token}${secret}`),expires});return await Promise.all([sendRequest,createToken]),{redirect:`${baseUrl}/verify-request?${new URLSearchParams({provider:provider.id,type:provider.type})}`}}(request,options);return{...response,cookies}}default:return{redirect:signInUrl,cookies}}}async function AuthInternal(request,authOptions){const{action,providerId,error,method}=request,csrfDisabled=authOptions.skipCSRFCheck===skipCSRFCheck,{options,cookies}=await init({authOptions,action,providerId,url:request.url,callbackUrl:request.body?.callbackUrl??request.query?.callbackUrl,csrfToken:request.body?.csrfToken,cookies:request.cookies,isPost:"POST"===method,csrfDisabled}),sessionStore=new cookie_SessionStore(options.cookies.sessionToken,request.cookies,options.logger);if("GET"===method){const render=renderPage({...options,query:request.query,cookies});switch(action){case"callback":return await callback(request,options,sessionStore,cookies);case"csrf":return render.csrf(csrfDisabled,options,cookies);case"error":return render.error(error);case"providers":return render.providers(options.providers);case"session":return await session(options,sessionStore,cookies);case"signin":return render.signin(providerId,error);case"signout":return render.signout();case"verify-request":return render.verifyRequest();case"webauthn-options":return await async function webAuthnOptions(request,options,sessionStore,cookies){const narrowOptions=assertInternalOptionsWebAuthn(options),{provider}=narrowOptions,{action}=request.query??{};if("register"!==action&&"authenticate"!==action&&void 0!==action)return{status:400,body:{error:"Invalid action"},cookies,headers:{"Content-Type":"application/json"}};const sessionUser=await async function getLoggedInUser(options,sessionStore){const{adapter,jwt,session:{strategy:sessionStrategy}}=options,sessionToken=sessionStore.value;if(!sessionToken)return null;if("jwt"===sessionStrategy){const salt=options.cookies.sessionToken.name,payload=await jwt.decode({...jwt,token:sessionToken,salt});if(payload&&payload.sub)return{id:payload.sub,name:payload.name,email:payload.email,image:payload.picture}}else{const userAndSession=await(adapter?.getSessionAndUser(sessionToken));if(userAndSession)return userAndSession.user}return null}(options,sessionStore),getUserInfoResponse=sessionUser?{user:sessionUser,exists:!0}:await provider.getUserInfo(options,request),userInfo=getUserInfoResponse?.user,decision=function inferWebAuthnOptions(action,loggedIn,userInfoResponse){const{user,exists=!1}=userInfoResponse??{};switch(action){case"authenticate":return"authenticate";case"register":if(user&&loggedIn===exists)return"register";break;case void 0:if(!loggedIn)return user?exists?"authenticate":"register":"authenticate"}return null}(action,!!sessionUser,getUserInfoResponse);switch(decision){case"authenticate":return getAuthenticationResponse(narrowOptions,request,userInfo,cookies);case"register":if("string"==typeof userInfo?.email)return getRegistrationResponse(narrowOptions,request,userInfo,cookies);break;default:return{status:400,body:{error:"Invalid request"},cookies,headers:{"Content-Type":"application/json"}}}}(request,options,sessionStore,cookies)}}else{const{csrfTokenVerified}=options;switch(action){case"callback":return"credentials"===options.provider.type&&validateCSRF(action,csrfTokenVerified),await callback(request,options,sessionStore,cookies);case"session":return validateCSRF(action,csrfTokenVerified),await session(options,sessionStore,cookies,!0,request.body?.data);case"signin":return validateCSRF(action,csrfTokenVerified),await signIn(request,cookies,options);case"signout":return validateCSRF(action,csrfTokenVerified),await async function signOut(cookies,sessionStore,options){const{jwt,events,callbackUrl:redirect,logger,session}=options,sessionToken=sessionStore.value;if(!sessionToken)return{redirect,cookies};try{if("jwt"===session.strategy){const salt=options.cookies.sessionToken.name,token=await jwt.decode({...jwt,token:sessionToken,salt});await(events.signOut?.({token}))}else{const session=await(options.adapter?.deleteSession(sessionToken));await(events.signOut?.({session}))}}catch(e){logger.error(new errors.eH(e))}return cookies.push(...sessionStore.clean()),{redirect,cookies}}(cookies,sessionStore,options)}}throw new errors.P8(`Cannot handle action: ${action}`)}function createActionURL(action,protocol,headers,envObject,config){const basePath=config?.basePath,envUrl=envObject.AUTH_URL??envObject.NEXTAUTH_URL;let url;if(envUrl){if(url=new URL(envUrl),basePath&&"/"!==basePath&&"/"!==url.pathname){if(url.pathname!==basePath){setLogger(config).warn("env-url-basepath-mismatch")}url.pathname="/"}}else{const detectedHost=headers.get("x-forwarded-host")??headers.get("host"),detectedProtocol=headers.get("x-forwarded-proto")??protocol??"https",_protocol=detectedProtocol.endsWith(":")?detectedProtocol:detectedProtocol+":";url=new URL(`${_protocol}//${detectedHost}`)}const sanitizedUrl=url.toString().replace(/\/$/,"");if(basePath){const sanitizedBasePath=basePath?.replace(/(^\/|\/$)/g,"")??"";return new URL(`${sanitizedUrl}/${sanitizedBasePath}/${action}`)}return new URL(`${sanitizedUrl}/${action}`)}async function Auth(request,config){const logger=setLogger(config),internalRequest=await toInternalRequest(request,config);if(!internalRequest)return Response.json("Bad request.",{status:400});const warningsOrError=function assertConfig(request,options){const{url}=request,warnings=[];if(!warned&&options.debug&&warnings.push("debug-enabled"),!options.trustHost)return new errors.tP(`Host must be trusted. URL was: ${request.url}`);if(!options.secret?.length)return new errors.jo("Please define a `secret`");const callbackUrlParam=request.query?.callbackUrl;if(callbackUrlParam&&!isValidHttpUrl(callbackUrlParam,url.origin))return new errors.me(`Invalid callback URL. Received: ${callbackUrlParam}`);const{callbackUrl:defaultCallbackUrl}=cookie_defaultCookies(options.useSecureCookies??"https:"===url.protocol),callbackUrlCookie=request.cookies?.[options.cookies?.callbackUrl?.name??defaultCallbackUrl.name];if(callbackUrlCookie&&!isValidHttpUrl(callbackUrlCookie,url.origin))return new errors.me(`Invalid callback URL. Received: ${callbackUrlCookie}`);let hasConditionalUIProvider=!1;for(const p of options.providers){const provider="function"==typeof p?p():p;if(("oauth"===provider.type||"oidc"===provider.type)&&!(provider.issuer??provider.options?.issuer)){const{authorization:a,token:t,userinfo:u}=provider;let key;if("string"==typeof a||a?.url?"string"==typeof t||t?.url?"string"==typeof u||u?.url||(key="userinfo"):key="token":key="authorization",key)return new errors.gs(`Provider "${provider.id}" is missing both \`issuer\` and \`${key}\` endpoint config. At least one of them is required`)}if("credentials"===provider.type)hasCredentials=!0;else if("email"===provider.type)hasEmail=!0;else if("webauthn"===provider.type){if(hasWebAuthn=!0,provider.simpleWebAuthnBrowserVersion&&!isSemverString(provider.simpleWebAuthnBrowserVersion))return new errors.lR(`Invalid provider config for "${provider.id}": simpleWebAuthnBrowserVersion "${provider.simpleWebAuthnBrowserVersion}" must be a valid semver string.`);if(provider.enableConditionalUI){if(hasConditionalUIProvider)return new errors.s5("Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time");hasConditionalUIProvider=!0;const hasWebauthnFormField=Object.values(provider.formFields).some(f=>f.autocomplete&&f.autocomplete.toString().indexOf("webauthn")>-1);if(!hasWebauthnFormField)return new errors.nd(`Provider "${provider.id}" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param`)}}}if(hasCredentials){const dbStrategy="database"===options.session?.strategy,onlyCredentials=!options.providers.some(p=>"credentials"!==("function"==typeof p?p():p).type);if(dbStrategy&&onlyCredentials)return new errors.Lx("Signing in with credentials only supported if JWT strategy is enabled");const credentialsNoAuthorize=options.providers.some(p=>{const provider="function"==typeof p?p():p;return"credentials"===provider.type&&!provider.authorize});if(credentialsNoAuthorize)return new errors.u$("Must define an authorize() handler to use credentials authentication provider")}const{adapter,session}=options,requiredMethods=[];if(hasEmail||"database"===session?.strategy||!session?.strategy&&adapter)if(hasEmail){if(!adapter)return new errors.OZ("Email login requires an adapter");requiredMethods.push(...emailMethods)}else{if(!adapter)return new errors.OZ("Database session requires an adapter");requiredMethods.push(...sessionMethods)}if(hasWebAuthn){if(!options.experimental?.enableWebAuthn)return new errors.xm("WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config");if(warnings.push("experimental-webauthn"),!adapter)return new errors.OZ("WebAuthn requires an adapter");requiredMethods.push(...webauthnMethods)}if(adapter){const missing=requiredMethods.filter(m=>!(m in adapter));if(missing.length)return new errors.i8(`Required adapter methods were missing: ${missing.join(", ")}`)}return warned||(warned=!0),warnings}(internalRequest,config);if(Array.isArray(warningsOrError))warningsOrError.forEach(logger.warn);else if(warningsOrError){logger.error(warningsOrError);if(!new Set(["signin","signout","error","verify-request"]).has(internalRequest.action)||"GET"!==internalRequest.method){const message="There was a problem with the server configuration. Check the server logs for more information.";return Response.json({message},{status:500})}const{pages,theme}=config,authOnErrorPage=pages?.error&&internalRequest.url.searchParams.get("callbackUrl")?.startsWith(pages.error);if(!pages?.error||authOnErrorPage){authOnErrorPage&&logger.error(new errors.CM(`The error page ${pages?.error} should not require authentication`));return toResponse(renderPage({theme}).error("Configuration"))}const url=`${internalRequest.url.origin}${pages.error}?error=Configuration`;return Response.redirect(url)}const isRedirect=request.headers?.has("X-Auth-Return-Redirect"),isRaw=config.raw===raw;try{const internalResponse=await AuthInternal(internalRequest,config);if(isRaw)return internalResponse;const response=toResponse(internalResponse),url=response.headers.get("Location");return isRedirect&&url?Response.json({url},{headers:response.headers}):response}catch(e){const error=e;logger.error(error);const isAuthError=error instanceof errors.lR;if(isAuthError&&isRaw&&!isRedirect)throw error;if("POST"===request.method&&"session"===internalRequest.action)return Response.json(null,{status:400});const type=(0,errors._2)(error)?error.type:"Configuration",params=new URLSearchParams({error:type});error instanceof errors.xz&&params.set("code",error.code);const pageKind=isAuthError&&error.kind||"error",pagePath=config.pages?.[pageKind]??`${config.basePath}/${pageKind.toLowerCase()}`,url=`${internalRequest.url.origin}${pagePath}?${params}`;return isRedirect?Response.json({url}):Response.redirect(url)}}var server=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/server.js"),process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");function reqWithEnvURL(req){const url=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!url)return req;const{origin:envOrigin}=new URL(url),{href,origin}=req.nextUrl;return new server.NextRequest(href.replace(origin,envOrigin),req)}function env_setEnvDefaults(config){try{config.secret??(config.secret=process.env.AUTH_SECRET??"1004");const url=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!url)return;const{pathname}=new URL(url);if("/"===pathname)return;config.basePath||(config.basePath=pathname)}catch{}finally{config.basePath||(config.basePath="/api/auth"),function setEnvDefaults(envObject,config,suppressBasePathWarning=!1){try{const url=envObject.AUTH_URL;url&&(config.basePath?suppressBasePathWarning||setLogger(config).warn("env-url-basepath-redundant"):config.basePath=new URL(url).pathname)}catch{}finally{config.basePath??(config.basePath="/auth")}if(!config.secret?.length){config.secret=[];const secret=envObject.AUTH_SECRET;secret&&config.secret.push(secret);for(const i of[1,2,3]){const secret=envObject[`AUTH_SECRET_${i}`];secret&&config.secret.unshift(secret)}}config.redirectProxyUrl??(config.redirectProxyUrl=envObject.AUTH_REDIRECT_PROXY_URL),config.trustHost??(config.trustHost=!!(envObject.AUTH_URL??envObject.AUTH_TRUST_HOST??envObject.VERCEL??envObject.CF_PAGES??"production"!==envObject.NODE_ENV)),config.providers=config.providers.map(provider=>{const{id}="function"==typeof provider?provider({}):provider,ID=id.toUpperCase().replace(/-/g,"_"),clientId=envObject[`AUTH_${ID}_ID`],clientSecret=envObject[`AUTH_${ID}_SECRET`],issuer=envObject[`AUTH_${ID}_ISSUER`],apiKey=envObject[`AUTH_${ID}_KEY`],finalProvider="function"==typeof provider?provider({clientId,clientSecret,issuer,apiKey}):provider;return"oauth"===finalProvider.type||"oidc"===finalProvider.type?(finalProvider.clientId??(finalProvider.clientId=clientId),finalProvider.clientSecret??(finalProvider.clientSecret=clientSecret),finalProvider.issuer??(finalProvider.issuer=issuer)):"email"===finalProvider.type&&(finalProvider.apiKey??(finalProvider.apiKey=apiKey)),finalProvider})}(process.env,config,!0)}}__webpack_require__("./node_modules/.pnpm/@storybook+nextjs@8.6.14_esbuild@0.25.8_next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9_jq2zn6l4kjngzuzeicrydsk5t4/node_modules/@storybook/nextjs/dist/chunk-42AJV46F.mjs");var headersAdapterMock,dist=__webpack_require__("./node_modules/.pnpm/@storybook+test@8.6.14_storybook@8.6.14_prettier@3.6.2_/node_modules/@storybook/test/dist/index.mjs"),draft_mode=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/request/draft-mode.js"),headers=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/request/headers.js"),adapters_headers=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/adapters/headers.js"),cookies=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/compiled/@edge-runtime/cookies/index.js"),HeadersAdapterMock=class extends adapters_headers.HeadersAdapter{constructor(){super({}),this.append=(0,dist.fn)(super.append.bind(this)).mockName("next/headers::headers().append"),this.delete=(0,dist.fn)(super.delete.bind(this)).mockName("next/headers::headers().delete"),this.get=(0,dist.fn)(super.get.bind(this)).mockName("next/headers::headers().get"),this.has=(0,dist.fn)(super.has.bind(this)).mockName("next/headers::headers().has"),this.set=(0,dist.fn)(super.set.bind(this)).mockName("next/headers::headers().set"),this.forEach=(0,dist.fn)(super.forEach.bind(this)).mockName("next/headers::headers().forEach"),this.entries=(0,dist.fn)(super.entries.bind(this)).mockName("next/headers::headers().entries"),this.keys=(0,dist.fn)(super.keys.bind(this)).mockName("next/headers::headers().keys"),this.values=(0,dist.fn)(super.values.bind(this)).mockName("next/headers::headers().values")}},headers_headers=()=>(headersAdapterMock||(headersAdapterMock=new HeadersAdapterMock),headersAdapterMock);headers_headers.mockRestore=()=>{headersAdapterMock=new HeadersAdapterMock};var requestCookiesMock,RequestCookiesMock=class extends cookies.RequestCookies{constructor(){super(...arguments),this.get=(0,dist.fn)(super.get.bind(this)).mockName("next/headers::cookies().get"),this.getAll=(0,dist.fn)(super.getAll.bind(this)).mockName("next/headers::cookies().getAll"),this.has=(0,dist.fn)(super.has.bind(this)).mockName("next/headers::cookies().has"),this.set=(0,dist.fn)(super.set.bind(this)).mockName("next/headers::cookies().set"),this.delete=(0,dist.fn)(super.delete.bind(this)).mockName("next/headers::cookies().delete")}},headers_cookies=(0,dist.fn)(()=>(requestCookiesMock||(requestCookiesMock=new RequestCookiesMock(headers_headers())),requestCookiesMock)).mockName("next/headers::cookies()"),originalRestore=headers_cookies.mockRestore.bind(null);headers_cookies.mockRestore=()=>{originalRestore(),headers_headers.mockRestore(),requestCookiesMock=new RequestCookiesMock(headers_headers())};(0,dist.fn)(draft_mode.r??headers.draftMode).mockName("draftMode");var lib_process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");async function getSession(headers,config){const url=createActionURL("session",headers.get("x-forwarded-proto"),headers,lib_process.env,config);return Auth(new Request(url,{headers:{cookie:headers.get("cookie")??""}}),{...config,callbacks:{...config.callbacks,async session(...args){const session=await(config.callbacks?.session?.(...args))??{...args[0].session,expires:args[0].session.expires?.toISOString?.()??args[0].session.expires};return{user:args[0].user??args[0].token,...session}}}})}function isReqWrapper(arg){return"function"==typeof arg}function initAuth(config,onLazyLoad){return"function"==typeof config?async(...args)=>{if(!args.length){const _headers=await headers_headers(),_config=await config(void 0);return onLazyLoad?.(_config),getSession(_headers,_config).then(r=>r.json())}if(args[0]instanceof Request){const req=args[0],ev=args[1],_config=await config(req);return onLazyLoad?.(_config),handleAuth([req,ev],_config)}if(isReqWrapper(args[0])){const userMiddlewareOrRoute=args[0];return async(...args)=>{const _config=await config(args[0]);return onLazyLoad?.(_config),handleAuth(args,_config,userMiddlewareOrRoute)}}const request="req"in args[0]?args[0].req:args[0],response="res"in args[0]?args[0].res:args[1],_config=await config(request);return onLazyLoad?.(_config),getSession(new Headers(request.headers),_config).then(async authResponse=>{const auth=await authResponse.json();for(const cookie of authResponse.headers.getSetCookie())"headers"in response?response.headers.append("set-cookie",cookie):response.appendHeader("set-cookie",cookie);return auth})}:(...args)=>{if(!args.length)return Promise.resolve(headers_headers()).then(h=>getSession(h,config).then(r=>r.json()));if(args[0]instanceof Request){return handleAuth([args[0],args[1]],config)}if(isReqWrapper(args[0])){const userMiddlewareOrRoute=args[0];return async(...args)=>handleAuth(args,config,userMiddlewareOrRoute).then(res=>res)}const request="req"in args[0]?args[0].req:args[0],response="res"in args[0]?args[0].res:args[1];return getSession(new Headers(request.headers),config).then(async authResponse=>{const auth=await authResponse.json();for(const cookie of authResponse.headers.getSetCookie())"headers"in response?response.headers.append("set-cookie",cookie):response.appendHeader("set-cookie",cookie);return auth})}}async function handleAuth(args,config,userMiddlewareOrRoute){const request=reqWithEnvURL(args[0]),sessionResponse=await getSession(request.headers,config),auth=await sessionResponse.json();let authorized=!0;config.callbacks?.authorized&&(authorized=await config.callbacks.authorized({request,auth}));let response=server.NextResponse.next?.();if(authorized instanceof Response){response=authorized;const redirect=authorized.headers.get("Location"),{pathname}=request.nextUrl;redirect&&function isSameAuthAction(requestPath,redirectPath,config){const action=redirectPath.replace(`${requestPath}/`,""),pages=Object.values(config.pages??{});return(lib_actions.has(action)||pages.includes(redirectPath))&&redirectPath===requestPath}(pathname,new URL(redirect).pathname,config)&&(authorized=!0)}else if(userMiddlewareOrRoute){const augmentedReq=request;augmentedReq.auth=auth,response=await userMiddlewareOrRoute(augmentedReq,args[1])??server.NextResponse.next()}else if(!authorized){const signInPage=config.pages?.signIn??`${config.basePath}/signin`;if(request.nextUrl.pathname!==signInPage){const signInUrl=request.nextUrl.clone();signInUrl.pathname=signInPage,signInUrl.searchParams.set("callbackUrl",request.nextUrl.href),response=server.NextResponse.redirect(signInUrl)}}const finalResponse=new Response(response?.body,response);for(const cookie of sessionResponse.headers.getSetCookie())finalResponse.headers.append("set-cookie",cookie);return finalResponse}const lib_actions=new Set(["providers","session","csrf","signin","signout","callback","verify-request","error"]);var navigation=__webpack_require__("./node_modules/.pnpm/@storybook+nextjs@8.6.14_esbuild@0.25.8_next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9_jq2zn6l4kjngzuzeicrydsk5t4/node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.mjs"),actions_process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");async function actions_signIn(provider,options={},authorizationParams,config){const headers=new Headers(await headers_headers()),{redirect:shouldRedirect=!0,redirectTo,...rest}=options instanceof FormData?Object.fromEntries(options):options,callbackUrl=redirectTo?.toString()??headers.get("Referer")??"/",signInURL=createActionURL("signin",headers.get("x-forwarded-proto"),headers,actions_process.env,config);if(!provider)return signInURL.searchParams.append("callbackUrl",callbackUrl),shouldRedirect&&(0,navigation.redirect)(signInURL.toString()),signInURL.toString();let url=`${signInURL}/${provider}?${new URLSearchParams(authorizationParams)}`,foundProvider={};for(const providerConfig of config.providers){const{options,...defaults}="function"==typeof providerConfig?providerConfig():providerConfig,id=options?.id??defaults.id;if(id===provider){foundProvider={id,type:options?.type??defaults.type};break}}if(!foundProvider.id){const url=`${signInURL}?${new URLSearchParams({callbackUrl})}`;return shouldRedirect&&(0,navigation.redirect)(url),url}"credentials"===foundProvider.type&&(url=url.replace("signin","callback")),headers.set("Content-Type","application/x-www-form-urlencoded");const body=new URLSearchParams({...rest,callbackUrl}),req=new Request(url,{method:"POST",headers,body}),res=await Auth(req,{...config,raw,skipCSRFCheck}),cookieJar=await headers_cookies();for(const c of res?.cookies??[])cookieJar.set(c.name,c.value,c.options);const redirectUrl=(res instanceof Response?res.headers.get("Location"):res.redirect)??url;return shouldRedirect?(0,navigation.redirect)(redirectUrl):redirectUrl}async function actions_signOut(options,config){const headers=new Headers(await headers_headers());headers.set("Content-Type","application/x-www-form-urlencoded");const url=createActionURL("signout",headers.get("x-forwarded-proto"),headers,actions_process.env,config),callbackUrl=options?.redirectTo??headers.get("Referer")??"/",body=new URLSearchParams({callbackUrl}),req=new Request(url,{method:"POST",headers,body}),res=await Auth(req,{...config,raw,skipCSRFCheck}),cookieJar=await headers_cookies();for(const c of res?.cookies??[])cookieJar.set(c.name,c.value,c.options);return options?.redirect??1?(0,navigation.redirect)(res.redirect):res}async function update(data,config){const headers=new Headers(await headers_headers());headers.set("Content-Type","application/json");const url=createActionURL("session",headers.get("x-forwarded-proto"),headers,actions_process.env,config),body=JSON.stringify({data}),req=new Request(url,{method:"POST",headers,body}),res=await Auth(req,{...config,raw,skipCSRFCheck}),cookieJar=await headers_cookies();for(const c of res?.cookies??[])cookieJar.set(c.name,c.value,c.options);return res.body}function NextAuth(config){if("function"==typeof config){const httpHandler=async req=>{const _config=await config(req);return env_setEnvDefaults(_config),Auth(reqWithEnvURL(req),_config)};return{handlers:{GET:httpHandler,POST:httpHandler},auth:initAuth(config,c=>env_setEnvDefaults(c)),signIn:async(provider,options,authorizationParams)=>{const _config=await config(void 0);return env_setEnvDefaults(_config),actions_signIn(provider,options,authorizationParams,_config)},signOut:async options=>{const _config=await config(void 0);return env_setEnvDefaults(_config),actions_signOut(options,_config)},unstable_update:async data=>{const _config=await config(void 0);return env_setEnvDefaults(_config),update(data,_config)}}}env_setEnvDefaults(config);const httpHandler=req=>Auth(reqWithEnvURL(req),config);return{handlers:{GET:httpHandler,POST:httpHandler},auth:initAuth(config),signIn:(provider,options,authorizationParams)=>actions_signIn(provider,options,authorizationParams,config),signOut:options=>actions_signOut(options,config),unstable_update:data=>update(data,config)}}},"./node_modules/.pnpm/next-auth@5.0.0-beta.28_next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+t_4fgl65xwhnz7bnrslbc77vehim/node_modules/next-auth/react.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{CP:()=>SessionProvider,wV:()=>useSession});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/compiled/react/index.js"),errors=__webpack_require__("./node_modules/.pnpm/@auth+core@0.39.1/node_modules/@auth/core/errors.js");class ClientFetchError extends errors.lR{}class ClientSessionError extends errors.lR{}async function client_fetchData(path,__NEXTAUTH,logger,req={}){const url=`${function client_apiBaseUrl(__NEXTAUTH){if("undefined"==typeof window)return`${__NEXTAUTH.baseUrlServer}${__NEXTAUTH.basePathServer}`;return __NEXTAUTH.basePath}(__NEXTAUTH)}/${path}`;try{const options={headers:{"Content-Type":"application/json",...req?.headers?.cookie?{cookie:req.headers.cookie}:{}}};req?.body&&(options.body=JSON.stringify(req.body),options.method="POST");const res=await fetch(url,options),data=await res.json();if(!res.ok)throw data;return data}catch(error){return logger.error(new ClientFetchError(error.message,error)),null}}function now(){return Math.floor(Date.now()/1e3)}function parseUrl(url){const defaultUrl=new URL("http://localhost:3000/api/auth");url&&!url.startsWith("http")&&(url=`https://${url}`);const _url=new URL(url||defaultUrl),path=("/"===_url.pathname?defaultUrl.pathname:_url.pathname).replace(/\/$/,""),base=`${_url.origin}${path}`;return{origin:_url.origin,host:_url.host,path,base,toString:()=>base}}var process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");const __NEXTAUTH={baseUrl:parseUrl(process.env.NEXTAUTH_URL??process.env.VERCEL_URL).origin,basePath:parseUrl(process.env.NEXTAUTH_URL).path,baseUrlServer:parseUrl(process.env.NEXTAUTH_URL_INTERNAL??process.env.NEXTAUTH_URL??process.env.VERCEL_URL).origin,basePathServer:parseUrl(process.env.NEXTAUTH_URL_INTERNAL??process.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}};let broadcastChannel=null;function getNewBroadcastChannel(){return new BroadcastChannel("next-auth")}function broadcast(){return"undefined"==typeof BroadcastChannel?{postMessage:()=>{},addEventListener:()=>{},removeEventListener:()=>{}}:(null===broadcastChannel&&(broadcastChannel=getNewBroadcastChannel()),broadcastChannel)}const logger={debug:console.debug,error:console.error,warn:console.warn},SessionContext=react.createContext?.(void 0);function useSession(options){if(!SessionContext)throw new Error("React Context is unavailable in Server Components");const value=react.useContext(SessionContext);const{required,onUnauthenticated}=options??{},requiredAndNotLoading=required&&"unauthenticated"===value.status;return react.useEffect(()=>{if(requiredAndNotLoading){const url=`${__NEXTAUTH.basePath}/signin?${new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href})}`;onUnauthenticated?onUnauthenticated():window.location.href=url}},[requiredAndNotLoading,onUnauthenticated]),requiredAndNotLoading?{data:value.data,update:value.update,status:"loading"}:value}async function getSession(params){const session=await client_fetchData("session",__NEXTAUTH,logger,params);if(params?.broadcast??1){getNewBroadcastChannel().postMessage({event:"session",data:{trigger:"getSession"}})}return session}async function getCsrfToken(){const response=await client_fetchData("csrf",__NEXTAUTH,logger);return response?.csrfToken??""}function SessionProvider(props){if(!SessionContext)throw new Error("React Context is unavailable in Server Components");const{children,basePath,refetchInterval,refetchWhenOffline}=props;basePath&&(__NEXTAUTH.basePath=basePath);const hasInitialSession=void 0!==props.session;__NEXTAUTH._lastSync=hasInitialSession?now():0;const[session,setSession]=react.useState(()=>(hasInitialSession&&(__NEXTAUTH._session=props.session),props.session)),[loading,setLoading]=react.useState(!hasInitialSession);react.useEffect(()=>(__NEXTAUTH._getSession=async({event}={})=>{try{const storageEvent="storage"===event;if(storageEvent||void 0===__NEXTAUTH._session)return __NEXTAUTH._lastSync=now(),__NEXTAUTH._session=await getSession({broadcast:!storageEvent}),void setSession(__NEXTAUTH._session);if(!event||null===__NEXTAUTH._session||now()<__NEXTAUTH._lastSync)return;__NEXTAUTH._lastSync=now(),__NEXTAUTH._session=await getSession(),setSession(__NEXTAUTH._session)}catch(error){logger.error(new ClientSessionError(error.message,error))}finally{setLoading(!1)}},__NEXTAUTH._getSession(),()=>{__NEXTAUTH._lastSync=0,__NEXTAUTH._session=void 0,__NEXTAUTH._getSession=()=>{}}),[]),react.useEffect(()=>{const handle=()=>__NEXTAUTH._getSession({event:"storage"});return broadcast().addEventListener("message",handle),()=>broadcast().removeEventListener("message",handle)},[]),react.useEffect(()=>{const{refetchOnWindowFocus=!0}=props,visibilityHandler=()=>{refetchOnWindowFocus&&"visible"===document.visibilityState&&__NEXTAUTH._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",visibilityHandler,!1),()=>document.removeEventListener("visibilitychange",visibilityHandler,!1)},[props.refetchOnWindowFocus]);const isOnline=function useOnline(){const[isOnline,setIsOnline]=react.useState("undefined"!=typeof navigator&&navigator.onLine),setOnline=()=>setIsOnline(!0),setOffline=()=>setIsOnline(!1);return react.useEffect(()=>(window.addEventListener("online",setOnline),window.addEventListener("offline",setOffline),()=>{window.removeEventListener("online",setOnline),window.removeEventListener("offline",setOffline)}),[]),isOnline}(),shouldRefetch=!1!==refetchWhenOffline||isOnline;react.useEffect(()=>{if(refetchInterval&&shouldRefetch){const refetchIntervalTimer=setInterval(()=>{__NEXTAUTH._session&&__NEXTAUTH._getSession({event:"poll"})},1e3*refetchInterval);return()=>clearInterval(refetchIntervalTimer)}},[refetchInterval,shouldRefetch]);const value=react.useMemo(()=>({data:session,status:loading?"loading":session?"authenticated":"unauthenticated",async update(data){if(loading)return;setLoading(!0);const newSession=await client_fetchData("session",__NEXTAUTH,logger,void 0===data?void 0:{body:{csrfToken:await getCsrfToken(),data}});return setLoading(!1),newSession&&(setSession(newSession),broadcast().postMessage({event:"session",data:{trigger:"getSession"}})),newSession}}),[session,loading]);return(0,jsx_runtime.jsx)(SessionContext.Provider,{value,children})}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/compiled/@edge-runtime/cookies/index.js":module=>{"use strict";var mod,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,src_exports={};function stringifyCookie(c){var _a;const attrs=["path"in c&&c.path&&`Path=${c.path}`,"expires"in c&&(c.expires||0===c.expires)&&`Expires=${("number"==typeof c.expires?new Date(c.expires):c.expires).toUTCString()}`,"maxAge"in c&&"number"==typeof c.maxAge&&`Max-Age=${c.maxAge}`,"domain"in c&&c.domain&&`Domain=${c.domain}`,"secure"in c&&c.secure&&"Secure","httpOnly"in c&&c.httpOnly&&"HttpOnly","sameSite"in c&&c.sameSite&&`SameSite=${c.sameSite}`,"partitioned"in c&&c.partitioned&&"Partitioned","priority"in c&&c.priority&&`Priority=${c.priority}`].filter(Boolean),stringified=`${c.name}=${encodeURIComponent(null!=(_a=c.value)?_a:"")}`;return 0===attrs.length?stringified:`${stringified}; ${attrs.join("; ")}`}function parseCookie(cookie){const map=new Map;for(const pair of cookie.split(/; */)){if(!pair)continue;const splitAt=pair.indexOf("=");if(-1===splitAt){map.set(pair,"true");continue}const[key,value]=[pair.slice(0,splitAt),pair.slice(splitAt+1)];try{map.set(key,decodeURIComponent(null!=value?value:"true"))}catch{}}return map}function parseSetCookie(setCookie){if(!setCookie)return;const[[name,value],...attributes]=parseCookie(setCookie),{domain,expires,httponly,maxage,path,samesite,secure,partitioned,priority}=Object.fromEntries(attributes.map(([key,value2])=>[key.toLowerCase().replace(/-/g,""),value2]));return function compact(t){const newT={};for(const key in t)t[key]&&(newT[key]=t[key]);return newT}({name,value:decodeURIComponent(value),domain,...expires&&{expires:new Date(expires)},...httponly&&{httpOnly:!0},..."string"==typeof maxage&&{maxAge:Number(maxage)},path,...samesite&&{sameSite:parseSameSite(samesite)},...secure&&{secure:!0},...priority&&{priority:parsePriority(priority)},...partitioned&&{partitioned:!0}})}((target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})})(src_exports,{RequestCookies:()=>RequestCookies,ResponseCookies:()=>ResponseCookies,parseCookie:()=>parseCookie,parseSetCookie:()=>parseSetCookie,stringifyCookie:()=>stringifyCookie}),module.exports=(mod=src_exports,((to,from,except,desc)=>{if(from&&"object"==typeof from||"function"==typeof from)for(let key of __getOwnPropNames(from))__hasOwnProp.call(to,key)||key===except||__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to})(__defProp({},"__esModule",{value:!0}),mod));var SAME_SITE=["strict","lax","none"];function parseSameSite(string){return string=string.toLowerCase(),SAME_SITE.includes(string)?string:void 0}var PRIORITY=["low","medium","high"];function parsePriority(string){return string=string.toLowerCase(),PRIORITY.includes(string)?string:void 0}var RequestCookies=class{constructor(requestHeaders){this._parsed=new Map,this._headers=requestHeaders;const header=requestHeaders.get("cookie");if(header){const parsed=parseCookie(header);for(const[name,value]of parsed)this._parsed.set(name,{name,value})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...args){const name="string"==typeof args[0]?args[0]:args[0].name;return this._parsed.get(name)}getAll(...args){var _a;const all=Array.from(this._parsed);if(!args.length)return all.map(([_,value])=>value);const name="string"==typeof args[0]?args[0]:null==(_a=args[0])?void 0:_a.name;return all.filter(([n])=>n===name).map(([_,value])=>value)}has(name){return this._parsed.has(name)}set(...args){const[name,value]=1===args.length?[args[0].name,args[0].value]:args,map=this._parsed;return map.set(name,{name,value}),this._headers.set("cookie",Array.from(map).map(([_,value2])=>stringifyCookie(value2)).join("; ")),this}delete(names){const map=this._parsed,result=Array.isArray(names)?names.map(name=>map.delete(name)):map.delete(names);return this._headers.set("cookie",Array.from(map).map(([_,value])=>stringifyCookie(value)).join("; ")),result}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(v=>`${v.name}=${encodeURIComponent(v.value)}`).join("; ")}},ResponseCookies=class{constructor(responseHeaders){var _a,_b,_c;this._parsed=new Map,this._headers=responseHeaders;const setCookie=null!=(_c=null!=(_b=null==(_a=responseHeaders.getSetCookie)?void 0:_a.call(responseHeaders))?_b:responseHeaders.get("set-cookie"))?_c:[],cookieStrings=Array.isArray(setCookie)?setCookie:function splitCookiesString(cookiesString){if(!cookiesString)return[];var start,ch,lastComma,nextStart,cookiesSeparatorFound,cookiesStrings=[],pos=0;function skipWhitespace(){for(;pos<cookiesString.length&&/\s/.test(cookiesString.charAt(pos));)pos+=1;return pos<cookiesString.length}function notSpecialChar(){return"="!==(ch=cookiesString.charAt(pos))&&";"!==ch&&","!==ch}for(;pos<cookiesString.length;){for(start=pos,cookiesSeparatorFound=!1;skipWhitespace();)if(","===(ch=cookiesString.charAt(pos))){for(lastComma=pos,pos+=1,skipWhitespace(),nextStart=pos;pos<cookiesString.length&&notSpecialChar();)pos+=1;pos<cookiesString.length&&"="===cookiesString.charAt(pos)?(cookiesSeparatorFound=!0,pos=nextStart,cookiesStrings.push(cookiesString.substring(start,lastComma)),start=pos):pos=lastComma+1}else pos+=1;(!cookiesSeparatorFound||pos>=cookiesString.length)&&cookiesStrings.push(cookiesString.substring(start,cookiesString.length))}return cookiesStrings}(setCookie);for(const cookieString of cookieStrings){const parsed=parseSetCookie(cookieString);parsed&&this._parsed.set(parsed.name,parsed)}}get(...args){const key="string"==typeof args[0]?args[0]:args[0].name;return this._parsed.get(key)}getAll(...args){var _a;const all=Array.from(this._parsed.values());if(!args.length)return all;const key="string"==typeof args[0]?args[0]:null==(_a=args[0])?void 0:_a.name;return all.filter(c=>c.name===key)}has(name){return this._parsed.has(name)}set(...args){const[name,value,cookie]=1===args.length?[args[0].name,args[0].value,args[0]]:args,map=this._parsed;return map.set(name,function normalizeCookie(cookie={name:"",value:""}){"number"==typeof cookie.expires&&(cookie.expires=new Date(cookie.expires));cookie.maxAge&&(cookie.expires=new Date(Date.now()+1e3*cookie.maxAge));null!==cookie.path&&void 0!==cookie.path||(cookie.path="/");return cookie}({name,value,...cookie})),function replace(bag,headers){headers.delete("set-cookie");for(const[,value]of bag){const serialized=stringifyCookie(value);headers.append("set-cookie",serialized)}}(map,this._headers),this}delete(...args){const[name,options]="string"==typeof args[0]?[args[0]]:[args[0].name,args[0]];return this.set({...options,name,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(stringifyCookie).join("; ")}}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/compiled/ua-parser-js/ua-parser.js":(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_RESULT__;(()=>{var i={226:function(i,e){!function(o,a){"use strict";var s="function",b="undefined",w="object",l="string",d="major",c="model",u="name",p="type",m="vendor",f="version",h="architecture",v="console",g="mobile",k="tablet",x="smarttv",_="wearable",y="embedded",T="Amazon",S="Apple",z="ASUS",N="BlackBerry",A="Browser",C="Chrome",O="Firefox",U="Google",j="Huawei",P="LG",R="Microsoft",M="Motorola",B="Opera",V="Samsung",D="Sharp",I="Sony",F="Xiaomi",G="Zebra",H="Facebook",L="Chromium OS",Z="Mac OS",enumerize=function(i){for(var e={},o=0;o<i.length;o++)e[i[o].toUpperCase()]=i[o];return e},has=function(i,e){return typeof i===l&&-1!==lowerize(e).indexOf(lowerize(i))},lowerize=function(i){return i.toLowerCase()},trim=function(i,e){if(typeof i===l)return i=i.replace(/^\s\s*/,""),typeof e===b?i:i.substring(0,350)},rgxMapper=function(i,e){for(var r,t,n,b,l,d,o=0;o<e.length&&!l;){var c=e[o],u=e[o+1];for(r=t=0;r<c.length&&!l&&c[r];)if(l=c[r++].exec(i))for(n=0;n<u.length;n++)d=l[++t],typeof(b=u[n])===w&&b.length>0?2===b.length?typeof b[1]==s?this[b[0]]=b[1].call(this,d):this[b[0]]=b[1]:3===b.length?typeof b[1]!==s||b[1].exec&&b[1].test?this[b[0]]=d?d.replace(b[1],b[2]):a:this[b[0]]=d?b[1].call(this,d,b[2]):a:4===b.length&&(this[b[0]]=d?b[3].call(this,d.replace(b[1],b[2])):a):this[b]=d||a;o+=2}},strMapper=function(i,e){for(var o in e)if(typeof e[o]===w&&e[o].length>0){for(var r=0;r<e[o].length;r++)if(has(e[o][r],i))return"?"===o?a:o}else if(has(e[o],i))return"?"===o?a:o;return i},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},K={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,f],[/opios[\/ ]+([\w\.]+)/i],[f,[u,B+" Mini"]],[/\bopr\/([\w\.]+)/i],[f,[u,B]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[u,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[u,"UC"+A]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[f,[u,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[f,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[u,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[u,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure "+A],f],[/\bfocus\/([\w\.]+)/i],[f,[u,O+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[u,B+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[u,B+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[u,"MIUI "+A]],[/fxios\/([-\w\.]+)/i],[f,[u,O]],[/\bqihu|(qi?ho?o?|360)browser/i],[[u,"360 "+A]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1 "+A],f],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[u,f],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,H],f],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[u,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[u,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[u,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[u,C+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,C+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[u,"Android "+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[u,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[f,strMapper,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[u,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[u,O+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[u,f],[/(cobalt)\/([\w\.]+)/i],[u,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,"",lowerize]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[m,V],[p,k]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[m,V],[p,g]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[c,[m,S],[p,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[m,S],[p,k]],[/(macintosh);/i],[c,[m,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[m,D],[p,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[m,j],[p,k]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[m,j],[p,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[m,F],[p,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[m,F],[p,k]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[m,"OPPO"],[p,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[m,"Vivo"],[p,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[m,"Realme"],[p,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[m,M],[p,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[m,M],[p,k]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[m,P],[p,k]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[m,P],[p,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[m,"Lenovo"],[p,k]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[m,"Nokia"],[p,g]],[/(pixel c)\b/i],[c,[m,U],[p,k]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[m,U],[p,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[m,I],[p,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[m,I],[p,k]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[m,"OnePlus"],[p,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[m,T],[p,k]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[m,T],[p,g]],[/(playbook);[-\w\),; ]+(rim)/i],[c,m,[p,k]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[m,N],[p,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[m,z],[p,k]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[m,z],[p,g]],[/(nexus 9)/i],[c,[m,"HTC"],[p,k]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[c,/_/g," "],[p,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[m,"Acer"],[p,k]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[m,"Meizu"],[p,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,c,[p,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,c,[p,k]],[/(surface duo)/i],[c,[m,R],[p,k]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[m,"Fairphone"],[p,g]],[/(u304aa)/i],[c,[m,"AT&T"],[p,g]],[/\bsie-(\w*)/i],[c,[m,"Siemens"],[p,g]],[/\b(rct\w+) b/i],[c,[m,"RCA"],[p,k]],[/\b(venue[\d ]{2,7}) b/i],[c,[m,"Dell"],[p,k]],[/\b(q(?:mv|ta)\w+) b/i],[c,[m,"Verizon"],[p,k]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[m,"Barnes & Noble"],[p,k]],[/\b(tm\d{3}\w+) b/i],[c,[m,"NuVision"],[p,k]],[/\b(k88) b/i],[c,[m,"ZTE"],[p,k]],[/\b(nx\d{3}j) b/i],[c,[m,"ZTE"],[p,g]],[/\b(gen\d{3}) b.+49h/i],[c,[m,"Swiss"],[p,g]],[/\b(zur\d{3}) b/i],[c,[m,"Swiss"],[p,k]],[/\b((zeki)?tb.*\b) b/i],[c,[m,"Zeki"],[p,k]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],c,[p,k]],[/\b(ns-?\w{0,9}) b/i],[c,[m,"Insignia"],[p,k]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[m,"NextBook"],[p,k]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],c,[p,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],c,[p,g]],[/\b(ph-1) /i],[c,[m,"Essential"],[p,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[m,"Envizen"],[p,k]],[/\b(trio[-\w\. ]+) b/i],[c,[m,"MachSpeed"],[p,k]],[/\btu_(1491) b/i],[c,[m,"Rotor"],[p,k]],[/(shield[\w ]+) b/i],[c,[m,"Nvidia"],[p,k]],[/(sprint) (\w+)/i],[m,c,[p,g]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[m,R],[p,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[m,G],[p,k]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[m,G],[p,g]],[/smart-tv.+(samsung)/i],[m,[p,x]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[m,V],[p,x]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,P],[p,x]],[/(apple) ?tv/i],[m,[c,S+" TV"],[p,x]],[/crkey/i],[[c,C+"cast"],[m,U],[p,x]],[/droid.+aft(\w)( bui|\))/i],[c,[m,T],[p,x]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[m,D],[p,x]],[/(bravia[\w ]+)( bui|\))/i],[c,[m,I],[p,x]],[/(mitv-\w{5}) bui/i],[c,[m,F],[p,x]],[/Hbbtv.*(technisat) (.*);/i],[m,c,[p,x]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[m,trim],[c,trim],[p,x]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,x]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,c,[p,v]],[/droid.+; (shield) bui/i],[c,[m,"Nvidia"],[p,v]],[/(playstation [345portablevi]+)/i],[c,[m,I],[p,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[m,R],[p,v]],[/((pebble))app/i],[m,c,[p,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[c,[m,S],[p,_]],[/droid.+; (glass) \d/i],[c,[m,U],[p,_]],[/droid.+; (wt63?0{2,3})\)/i],[c,[m,G],[p,_]],[/(quest( 2| pro)?)/i],[c,[m,H],[p,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[p,y]],[/(aeobc)\b/i],[c,[m,T],[p,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[p,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[p,k]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,k]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,g]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[u,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[u,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,f],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[u,[f,strMapper,X]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[u,"Windows"],[f,strMapper,X]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,Z],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,f],[/\(bb(10);/i],[f,[u,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[u,O+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[u,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[u,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[u,C+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[u,L],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,f],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[u,f]]},UAParser=function(i,e){if(typeof i===w&&(e=i,i=a),!(this instanceof UAParser))return new UAParser(i,e).getResult();var r=typeof o!==b&&o.navigator?o.navigator:a,n=i||(r&&r.userAgent?r.userAgent:""),v=r&&r.userAgentData?r.userAgentData:a,x=e?function(i,e){var o={};for(var a in i)e[a]&&e[a].length%2==0?o[a]=e[a].concat(i[a]):o[a]=i[a];return o}(K,e):K,_=r&&r.userAgent==n;return this.getBrowser=function(){var i={};return i[u]=a,i[f]=a,rgxMapper.call(i,n,x.browser),i[d]=function(i){return typeof i===l?i.replace(/[^\d\.]/g,"").split(".")[0]:a}(i[f]),_&&r&&r.brave&&typeof r.brave.isBrave==s&&(i[u]="Brave"),i},this.getCPU=function(){var i={};return i[h]=a,rgxMapper.call(i,n,x.cpu),i},this.getDevice=function(){var i={};return i[m]=a,i[c]=a,i[p]=a,rgxMapper.call(i,n,x.device),_&&!i[p]&&v&&v.mobile&&(i[p]=g),_&&"Macintosh"==i[c]&&r&&typeof r.standalone!==b&&r.maxTouchPoints&&r.maxTouchPoints>2&&(i[c]="iPad",i[p]=k),i},this.getEngine=function(){var i={};return i[u]=a,i[f]=a,rgxMapper.call(i,n,x.engine),i},this.getOS=function(){var i={};return i[u]=a,i[f]=a,rgxMapper.call(i,n,x.os),_&&!i[u]&&v&&"Unknown"!=v.platform&&(i[u]=v.platform.replace(/chrome os/i,L).replace(/macos/i,Z)),i},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(i){return n=typeof i===l&&i.length>350?trim(i,350):i,this},this.setUA(n),this};UAParser.VERSION="1.0.35",UAParser.BROWSER=enumerize([u,f,d]),UAParser.CPU=enumerize([h]),UAParser.DEVICE=enumerize([c,m,p,v,g,x,k,_,y]),UAParser.ENGINE=UAParser.OS=enumerize([u,f]),typeof e!==b?(i.exports&&(e=i.exports=UAParser),e.UAParser=UAParser):__webpack_require__.amdO?void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return UAParser}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__):typeof o!==b&&(o.UAParser=UAParser);var Q=typeof o!==b&&(o.jQuery||o.Zepto);if(Q&&!Q.ua){var Y=new UAParser;Q.ua=Y.getResult(),Q.ua.get=function(){return Y.getUA()},Q.ua.set=function(i){Y.setUA(i);var e=Y.getResult();for(var o in e)Q.ua[o]=e[o]}}}("object"==typeof window?window:this)}},e={};function __nccwpck_require__(o){var a=e[o];if(void 0!==a)return a.exports;var r=e[o]={exports:{}},t=!0;try{i[o].call(r.exports,r,r.exports,__nccwpck_require__),t=!1}finally{t&&delete e[o]}return r.exports}__nccwpck_require__.ab="//";var o=__nccwpck_require__(226);module.exports=o})()},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/after/after.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"after",{enumerable:!0,get:function(){return after}});const _workasyncstorageexternal=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/work-async-storage.external.js");function after(task){const workStore=_workasyncstorageexternal.workAsyncStorage.getStore();if(!workStore)throw Object.defineProperty(new Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});const{afterContext}=workStore;return afterContext.after(task)}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/after/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function _export_star(from,to){return Object.keys(from).forEach(function(k){"default"===k||Object.prototype.hasOwnProperty.call(to,k)||Object.defineProperty(to,k,{enumerable:!0,get:function(){return from[k]}})}),from}(__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/after/after.js"),exports)},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/after-task-async-storage-instance.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"afterTaskAsyncStorageInstance",{enumerable:!0,get:function(){return afterTaskAsyncStorageInstance}});const afterTaskAsyncStorageInstance=(0,__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/async-local-storage.js").createAsyncLocalStorage)()},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/after-task-async-storage.external.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"afterTaskAsyncStorage",{enumerable:!0,get:function(){return _aftertaskasyncstorageinstance.afterTaskAsyncStorageInstance}});const _aftertaskasyncstorageinstance=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/after-task-async-storage-instance.js")},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/create-deduped-by-callsite-server-error-logger.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js"),console=__webpack_require__("./node_modules/.pnpm/console-browserify@1.2.0/node_modules/console-browserify/index.js");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return createDedupedByCallsiteServerErrorLoggerDev}});const _react=_interop_require_wildcard(__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/compiled/react/index.js"));function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interop_require_wildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={__proto__:null},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}const errorRef={current:null},cache="function"==typeof _react.cache?_react.cache:fn=>fn,logErrorOrWarn=process.env.__NEXT_DYNAMIC_IO?console.error:console.warn;cache(key=>{try{logErrorOrWarn(errorRef.current)}finally{errorRef.current=null}});function createDedupedByCallsiteServerErrorLoggerDev(getMessage){return function logDedupedError(...args){const message=getMessage(...args);logErrorOrWarn(message)}}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/request/connection.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"F",{enumerable:!0,get:function(){return connection}});const _workasyncstorageexternal=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/work-async-storage.external.js"),_workunitasyncstorageexternal=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/work-unit-async-storage.external.js"),_dynamicrendering=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/dynamic-rendering.js"),_staticgenerationbailout=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/client/components/static-generation-bailout.js"),_dynamicrenderingutils=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/dynamic-rendering-utils.js"),_utils=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/request/utils.js");function connection(){const workStore=_workasyncstorageexternal.workAsyncStorage.getStore(),workUnitStore=_workunitasyncstorageexternal.workUnitAsyncStorage.getStore();if(workStore){if(workUnitStore&&"after"===workUnitStore.phase&&!(0,_utils.isRequestAPICallableInsideAfter)())throw Object.defineProperty(new Error(`Route ${workStore.route} used "connection" inside "after(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but "after(...)" executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E186",enumerable:!1,configurable:!0});if(workStore.forceStatic)return Promise.resolve(void 0);if(workUnitStore){if("cache"===workUnitStore.type)throw Object.defineProperty(new Error(`Route ${workStore.route} used "connection" inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E111",enumerable:!1,configurable:!0});if("unstable-cache"===workUnitStore.type)throw Object.defineProperty(new Error(`Route ${workStore.route} used "connection" inside a function cached with "unstable_cache(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E1",enumerable:!1,configurable:!0})}if(workStore.dynamicShouldError)throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route ${workStore.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E562",enumerable:!1,configurable:!0});if(workUnitStore){if("prerender"===workUnitStore.type)return(0,_dynamicrenderingutils.makeHangingPromise)(workUnitStore.renderSignal,"`connection()`");"prerender-ppr"===workUnitStore.type?(0,_dynamicrendering.postponeWithTracking)(workStore.route,"connection",workUnitStore.dynamicTracking):"prerender-legacy"===workUnitStore.type&&(0,_dynamicrendering.throwToInterruptStaticGeneration)("connection",workStore,workUnitStore)}(0,_dynamicrendering.trackDynamicDataInDynamicRender)(workStore,workUnitStore)}return Promise.resolve(void 0)}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/request/draft-mode.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"r",{enumerable:!0,get:function(){return draftMode}});const _workunitasyncstorageexternal=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/work-unit-async-storage.external.js"),_workasyncstorageexternal=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/work-async-storage.external.js"),_dynamicrendering=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/dynamic-rendering.js"),_creatededupedbycallsiteservererrorlogger=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/create-deduped-by-callsite-server-error-logger.js"),_staticgenerationbailout=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/client/components/static-generation-bailout.js"),_hooksservercontext=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/client/components/hooks-server-context.js");function draftMode(){const workStore=_workasyncstorageexternal.workAsyncStorage.getStore(),workUnitStore=_workunitasyncstorageexternal.workUnitAsyncStorage.getStore();switch(workStore&&workUnitStore||(0,_workunitasyncstorageexternal.throwForMissingRequestStore)("draftMode"),workUnitStore.type){case"request":return createOrGetCachedExoticDraftMode(workUnitStore.draftMode,workStore);case"cache":case"unstable-cache":const draftModeProvider=(0,_workunitasyncstorageexternal.getDraftModeProviderForCacheScope)(workStore,workUnitStore);if(draftModeProvider)return createOrGetCachedExoticDraftMode(draftModeProvider,workStore);case"prerender":case"prerender-ppr":case"prerender-legacy":return createExoticDraftMode(null);default:return workUnitStore}}function createOrGetCachedExoticDraftMode(draftModeProvider,workStore){const cachedDraftMode=CachedDraftModes.get(draftMode);if(cachedDraftMode)return cachedDraftMode;let promise;return promise=createExoticDraftMode(draftModeProvider),CachedDraftModes.set(draftModeProvider,promise),promise}const CachedDraftModes=new WeakMap;function createExoticDraftMode(underlyingProvider){const instance=new DraftMode(underlyingProvider),promise=Promise.resolve(instance);return Object.defineProperty(promise,"isEnabled",{get:()=>instance.isEnabled,set(newValue){Object.defineProperty(promise,"isEnabled",{value:newValue,writable:!0,enumerable:!0})},enumerable:!0,configurable:!0}),promise.enable=instance.enable.bind(instance),promise.disable=instance.disable.bind(instance),promise}class DraftMode{constructor(provider){this._provider=provider}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){trackDynamicDraftMode("draftMode().enable()"),null!==this._provider&&this._provider.enable()}disable(){trackDynamicDraftMode("draftMode().disable()"),null!==this._provider&&this._provider.disable()}}(0,_creatededupedbycallsiteservererrorlogger.createDedupedByCallsiteServerErrorLoggerDev)(function createDraftModeAccessError(route,expression){const prefix=route?`Route "${route}" `:"This route ";return Object.defineProperty(new Error(`${prefix}used ${expression}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E377",enumerable:!1,configurable:!0})});function trackDynamicDraftMode(expression){const store=_workasyncstorageexternal.workAsyncStorage.getStore(),workUnitStore=_workunitasyncstorageexternal.workUnitAsyncStorage.getStore();if(store){if(workUnitStore){if("cache"===workUnitStore.type)throw Object.defineProperty(new Error(`Route ${store.route} used "${expression}" inside "use cache". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E246",enumerable:!1,configurable:!0});if("unstable-cache"===workUnitStore.type)throw Object.defineProperty(new Error(`Route ${store.route} used "${expression}" inside a function cached with "unstable_cache(...)". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E259",enumerable:!1,configurable:!0});if("after"===workUnitStore.phase)throw Object.defineProperty(new Error(`Route ${store.route} used "${expression}" inside \`after\`. The enabled status of draftMode can be read inside \`after\` but you cannot enable or disable draftMode. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E348",enumerable:!1,configurable:!0})}if(store.dynamicShouldError)throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route ${store.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${expression}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(workUnitStore)if("prerender"===workUnitStore.type){const error=Object.defineProperty(new Error(`Route ${store.route} used ${expression} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});(0,_dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(store.route,expression,error,workUnitStore)}else if("prerender-ppr"===workUnitStore.type)(0,_dynamicrendering.postponeWithTracking)(store.route,expression,workUnitStore.dynamicTracking);else{if("prerender-legacy"===workUnitStore.type){workUnitStore.revalidate=0;const err=Object.defineProperty(new _hooksservercontext.DynamicServerError(`Route ${store.route} couldn't be rendered statically because it used \`${expression}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw store.dynamicUsageDescription=expression,store.dynamicUsageStack=err.stack,err}}}}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/request/headers.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";const _headers=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/adapters/headers.js"),_workasyncstorageexternal=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/work-async-storage.external.js"),_workunitasyncstorageexternal=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/work-unit-async-storage.external.js"),_dynamicrendering=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/dynamic-rendering.js"),_staticgenerationbailout=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/client/components/static-generation-bailout.js"),_dynamicrenderingutils=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/dynamic-rendering-utils.js"),_creatededupedbycallsiteservererrorlogger=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/create-deduped-by-callsite-server-error-logger.js"),_utils=(__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/lib/scheduler.js"),__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/request/utils.js"));function headers(){const workStore=_workasyncstorageexternal.workAsyncStorage.getStore(),workUnitStore=_workunitasyncstorageexternal.workUnitAsyncStorage.getStore();if(workStore){if(workUnitStore&&"after"===workUnitStore.phase&&!(0,_utils.isRequestAPICallableInsideAfter)())throw Object.defineProperty(new Error(`Route ${workStore.route} used "headers" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "headers" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E367",enumerable:!1,configurable:!0});if(workStore.forceStatic){return makeUntrackedExoticHeaders(_headers.HeadersAdapter.seal(new Headers({})))}if(workUnitStore){if("cache"===workUnitStore.type)throw Object.defineProperty(new Error(`Route ${workStore.route} used "headers" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E304",enumerable:!1,configurable:!0});if("unstable-cache"===workUnitStore.type)throw Object.defineProperty(new Error(`Route ${workStore.route} used "headers" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E127",enumerable:!1,configurable:!0})}if(workStore.dynamicShouldError)throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route ${workStore.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E525",enumerable:!1,configurable:!0});if(workUnitStore){if("prerender"===workUnitStore.type)return function makeDynamicallyTrackedExoticHeaders(route,prerenderStore){const cachedHeaders=CachedHeaders.get(prerenderStore);if(cachedHeaders)return cachedHeaders;const promise=(0,_dynamicrenderingutils.makeHangingPromise)(prerenderStore.renderSignal,"`headers()`");return CachedHeaders.set(prerenderStore,promise),Object.defineProperties(promise,{append:{value:function append(){const expression=`\`headers().append(${describeNameArg(arguments[0])}, ...)\``,error=createHeadersAccessError(route,expression);(0,_dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route,expression,error,prerenderStore)}},delete:{value:function _delete(){const expression=`\`headers().delete(${describeNameArg(arguments[0])})\``,error=createHeadersAccessError(route,expression);(0,_dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route,expression,error,prerenderStore)}},get:{value:function get(){const expression=`\`headers().get(${describeNameArg(arguments[0])})\``,error=createHeadersAccessError(route,expression);(0,_dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route,expression,error,prerenderStore)}},has:{value:function has(){const expression=`\`headers().has(${describeNameArg(arguments[0])})\``,error=createHeadersAccessError(route,expression);(0,_dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route,expression,error,prerenderStore)}},set:{value:function set(){const expression=`\`headers().set(${describeNameArg(arguments[0])}, ...)\``,error=createHeadersAccessError(route,expression);(0,_dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route,expression,error,prerenderStore)}},getSetCookie:{value:function getSetCookie(){const expression="`headers().getSetCookie()`",error=createHeadersAccessError(route,expression);(0,_dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route,expression,error,prerenderStore)}},forEach:{value:function forEach(){const expression="`headers().forEach(...)`",error=createHeadersAccessError(route,expression);(0,_dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route,expression,error,prerenderStore)}},keys:{value:function keys(){const expression="`headers().keys()`",error=createHeadersAccessError(route,expression);(0,_dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route,expression,error,prerenderStore)}},values:{value:function values(){const expression="`headers().values()`",error=createHeadersAccessError(route,expression);(0,_dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route,expression,error,prerenderStore)}},entries:{value:function entries(){const expression="`headers().entries()`",error=createHeadersAccessError(route,expression);(0,_dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route,expression,error,prerenderStore)}},[Symbol.iterator]:{value:function(){const expression="`headers()[Symbol.iterator]()`",error=createHeadersAccessError(route,expression);(0,_dynamicrendering.abortAndThrowOnSynchronousRequestDataAccess)(route,expression,error,prerenderStore)}}}),promise}(workStore.route,workUnitStore);"prerender-ppr"===workUnitStore.type?(0,_dynamicrendering.postponeWithTracking)(workStore.route,"headers",workUnitStore.dynamicTracking):"prerender-legacy"===workUnitStore.type&&(0,_dynamicrendering.throwToInterruptStaticGeneration)("headers",workStore,workUnitStore)}(0,_dynamicrendering.trackDynamicDataInDynamicRender)(workStore,workUnitStore)}return makeUntrackedExoticHeaders((0,_workunitasyncstorageexternal.getExpectedRequestStore)("headers").headers)}const CachedHeaders=new WeakMap;function makeUntrackedExoticHeaders(underlyingHeaders){const cachedHeaders=CachedHeaders.get(underlyingHeaders);if(cachedHeaders)return cachedHeaders;const promise=Promise.resolve(underlyingHeaders);return CachedHeaders.set(underlyingHeaders,promise),Object.defineProperties(promise,{append:{value:underlyingHeaders.append.bind(underlyingHeaders)},delete:{value:underlyingHeaders.delete.bind(underlyingHeaders)},get:{value:underlyingHeaders.get.bind(underlyingHeaders)},has:{value:underlyingHeaders.has.bind(underlyingHeaders)},set:{value:underlyingHeaders.set.bind(underlyingHeaders)},getSetCookie:{value:underlyingHeaders.getSetCookie.bind(underlyingHeaders)},forEach:{value:underlyingHeaders.forEach.bind(underlyingHeaders)},keys:{value:underlyingHeaders.keys.bind(underlyingHeaders)},values:{value:underlyingHeaders.values.bind(underlyingHeaders)},entries:{value:underlyingHeaders.entries.bind(underlyingHeaders)},[Symbol.iterator]:{value:underlyingHeaders[Symbol.iterator].bind(underlyingHeaders)}}),promise}function describeNameArg(arg){return"string"==typeof arg?`'${arg}'`:"..."}(0,_creatededupedbycallsiteservererrorlogger.createDedupedByCallsiteServerErrorLoggerDev)(createHeadersAccessError);function createHeadersAccessError(route,expression){const prefix=route?`Route "${route}" `:"This route ";return Object.defineProperty(new Error(`${prefix}used ${expression}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E277",enumerable:!1,configurable:!0})}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/request/root-params.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"c",{enumerable:!0,get:function(){return unstable_rootParams}});const _invarianterror=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/shared/lib/invariant-error.js"),_dynamicrendering=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/dynamic-rendering.js"),_workasyncstorageexternal=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/work-async-storage.external.js"),_workunitasyncstorageexternal=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/work-unit-async-storage.external.js"),_dynamicrenderingutils=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/dynamic-rendering-utils.js"),_reflectutils=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/shared/lib/utils/reflect-utils.js"),CachedParams=new WeakMap;async function unstable_rootParams(){const workStore=_workasyncstorageexternal.workAsyncStorage.getStore();if(!workStore)throw Object.defineProperty(new _invarianterror.InvariantError("Missing workStore in unstable_rootParams"),"__NEXT_ERROR_CODE",{value:"E615",enumerable:!1,configurable:!0});const workUnitStore=_workunitasyncstorageexternal.workUnitAsyncStorage.getStore();if(!workUnitStore)throw Object.defineProperty(new Error(`Route ${workStore.route} used \`unstable_rootParams()\` in Pages Router. This API is only available within App Router.`),"__NEXT_ERROR_CODE",{value:"E641",enumerable:!1,configurable:!0});switch(workUnitStore.type){case"unstable-cache":case"cache":throw Object.defineProperty(new Error(`Route ${workStore.route} used \`unstable_rootParams()\` inside \`"use cache"\` or \`unstable_cache\`. Support for this API inside cache scopes is planned for a future version of Next.js.`),"__NEXT_ERROR_CODE",{value:"E642",enumerable:!1,configurable:!0});case"prerender":case"prerender-ppr":case"prerender-legacy":return function createPrerenderRootParams(underlyingParams,workStore,prerenderStore){const fallbackParams=workStore.fallbackRouteParams;if(fallbackParams){let hasSomeFallbackParams=!1;for(const key in underlyingParams)if(fallbackParams.has(key)){hasSomeFallbackParams=!0;break}if(hasSomeFallbackParams){if("prerender"===prerenderStore.type){const cachedParams=CachedParams.get(underlyingParams);if(cachedParams)return cachedParams;const promise=(0,_dynamicrenderingutils.makeHangingPromise)(prerenderStore.renderSignal,"`unstable_rootParams`");return CachedParams.set(underlyingParams,promise),promise}return function makeErroringRootParams(underlyingParams,fallbackParams,workStore,prerenderStore){const cachedParams=CachedParams.get(underlyingParams);if(cachedParams)return cachedParams;const augmentedUnderlying={...underlyingParams},promise=Promise.resolve(augmentedUnderlying);return CachedParams.set(underlyingParams,promise),Object.keys(underlyingParams).forEach(prop=>{_reflectutils.wellKnownProperties.has(prop)||(fallbackParams.has(prop)?Object.defineProperty(augmentedUnderlying,prop,{get(){const expression=(0,_reflectutils.describeStringPropertyAccess)("unstable_rootParams",prop);"prerender-ppr"===prerenderStore.type?(0,_dynamicrendering.postponeWithTracking)(workStore.route,expression,prerenderStore.dynamicTracking):(0,_dynamicrendering.throwToInterruptStaticGeneration)(expression,workStore,prerenderStore)},enumerable:!0}):promise[prop]=underlyingParams[prop])}),promise}(underlyingParams,fallbackParams,workStore,prerenderStore)}}return Promise.resolve(underlyingParams)}(workUnitStore.rootParams,workStore,workUnitStore);default:return Promise.resolve(workUnitStore.rootParams)}}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/request/utils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{isRequestAPICallableInsideAfter:function(){return isRequestAPICallableInsideAfter},throwForSearchParamsAccessInUseCache:function(){return throwForSearchParamsAccessInUseCache},throwWithStaticGenerationBailoutError:function(){return throwWithStaticGenerationBailoutError},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return throwWithStaticGenerationBailoutErrorWithDynamicError}});const _staticgenerationbailout=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/client/components/static-generation-bailout.js"),_aftertaskasyncstorageexternal=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/app-render/after-task-async-storage.external.js");function throwWithStaticGenerationBailoutError(route,expression){throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route ${route} couldn't be rendered statically because it used ${expression}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E576",enumerable:!1,configurable:!0})}function throwWithStaticGenerationBailoutErrorWithDynamicError(route,expression){throw Object.defineProperty(new _staticgenerationbailout.StaticGenBailoutError(`Route ${route} with \`dynamic = "error"\` couldn't be rendered statically because it used ${expression}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function throwForSearchParamsAccessInUseCache(workStore){const error=Object.defineProperty(new Error(`Route ${workStore.route} used "searchParams" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "searchParams" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E634",enumerable:!1,configurable:!0});throw workStore.invalidUsageError??=error,error}function isRequestAPICallableInsideAfter(){const afterTaskStore=_aftertaskasyncstorageexternal.afterTaskAsyncStorage.getStore();return"action"===(null==afterTaskStore?void 0:afterTaskStore.rootTaskSpawnPhase)}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/error.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{PageSignatureError:function(){return PageSignatureError},RemovedPageError:function(){return RemovedPageError},RemovedUAError:function(){return RemovedUAError}});class PageSignatureError extends Error{constructor({page}){super(`The middleware "${page}" accepts an async API directly with the form:\n  \n  export function middleware(request, event) {\n    return NextResponse.redirect('/new-location')\n  }\n  \n  Read more: https://nextjs.org/docs/messages/middleware-new-signature\n  `)}}class RemovedPageError extends Error{constructor(){super("The request.page has been deprecated in favour of `URLPattern`.\n  Read more: https://nextjs.org/docs/messages/middleware-request-page\n  ")}}class RemovedUAError extends Error{constructor(){super("The request.ua has been removed in favour of `userAgent` function.\n  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n  ")}}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/next-url.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"NextURL",{enumerable:!0,get:function(){return NextURL}});const _detectdomainlocale=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/shared/lib/i18n/detect-domain-locale.js"),_formatnextpathnameinfo=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/shared/lib/router/utils/format-next-pathname-info.js"),_gethostname=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/shared/lib/get-hostname.js"),_getnextpathnameinfo=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/shared/lib/router/utils/get-next-pathname-info.js"),REGEX_LOCALHOST_HOSTNAME=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function parseURL(url,base){return new URL(String(url).replace(REGEX_LOCALHOST_HOSTNAME,"localhost"),base&&String(base).replace(REGEX_LOCALHOST_HOSTNAME,"localhost"))}const Internal=Symbol("NextURLInternal");class NextURL{constructor(input,baseOrOpts,opts){let base,options;"object"==typeof baseOrOpts&&"pathname"in baseOrOpts||"string"==typeof baseOrOpts?(base=baseOrOpts,options=opts||{}):options=opts||baseOrOpts||{},this[Internal]={url:parseURL(input,base??options.base),options,basePath:""},this.analyze()}analyze(){var _this_Internal_options_nextConfig_i18n,_this_Internal_options_nextConfig,_this_Internal_domainLocale,_this_Internal_options_nextConfig_i18n1,_this_Internal_options_nextConfig1;const info=(0,_getnextpathnameinfo.getNextPathnameInfo)(this[Internal].url.pathname,{nextConfig:this[Internal].options.nextConfig,parseData:!process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE,i18nProvider:this[Internal].options.i18nProvider}),hostname=(0,_gethostname.getHostname)(this[Internal].url,this[Internal].options.headers);this[Internal].domainLocale=this[Internal].options.i18nProvider?this[Internal].options.i18nProvider.detectDomainLocale(hostname):(0,_detectdomainlocale.detectDomainLocale)(null==(_this_Internal_options_nextConfig=this[Internal].options.nextConfig)||null==(_this_Internal_options_nextConfig_i18n=_this_Internal_options_nextConfig.i18n)?void 0:_this_Internal_options_nextConfig_i18n.domains,hostname);const defaultLocale=(null==(_this_Internal_domainLocale=this[Internal].domainLocale)?void 0:_this_Internal_domainLocale.defaultLocale)||(null==(_this_Internal_options_nextConfig1=this[Internal].options.nextConfig)||null==(_this_Internal_options_nextConfig_i18n1=_this_Internal_options_nextConfig1.i18n)?void 0:_this_Internal_options_nextConfig_i18n1.defaultLocale);this[Internal].url.pathname=info.pathname,this[Internal].defaultLocale=defaultLocale,this[Internal].basePath=info.basePath??"",this[Internal].buildId=info.buildId,this[Internal].locale=info.locale??defaultLocale,this[Internal].trailingSlash=info.trailingSlash}formatPathname(){return(0,_formatnextpathnameinfo.formatNextPathnameInfo)({basePath:this[Internal].basePath,buildId:this[Internal].buildId,defaultLocale:this[Internal].options.forceLocale?void 0:this[Internal].defaultLocale,locale:this[Internal].locale,pathname:this[Internal].url.pathname,trailingSlash:this[Internal].trailingSlash})}formatSearch(){return this[Internal].url.search}get buildId(){return this[Internal].buildId}set buildId(buildId){this[Internal].buildId=buildId}get locale(){return this[Internal].locale??""}set locale(locale){var _this_Internal_options_nextConfig_i18n,_this_Internal_options_nextConfig;if(!this[Internal].locale||!(null==(_this_Internal_options_nextConfig=this[Internal].options.nextConfig)||null==(_this_Internal_options_nextConfig_i18n=_this_Internal_options_nextConfig.i18n)?void 0:_this_Internal_options_nextConfig_i18n.locales.includes(locale)))throw Object.defineProperty(new TypeError(`The NextURL configuration includes no locale "${locale}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[Internal].locale=locale}get defaultLocale(){return this[Internal].defaultLocale}get domainLocale(){return this[Internal].domainLocale}get searchParams(){return this[Internal].url.searchParams}get host(){return this[Internal].url.host}set host(value){this[Internal].url.host=value}get hostname(){return this[Internal].url.hostname}set hostname(value){this[Internal].url.hostname=value}get port(){return this[Internal].url.port}set port(value){this[Internal].url.port=value}get protocol(){return this[Internal].url.protocol}set protocol(value){this[Internal].url.protocol=value}get href(){const pathname=this.formatPathname(),search=this.formatSearch();return`${this.protocol}//${this.host}${pathname}${search}${this.hash}`}set href(url){this[Internal].url=parseURL(url),this.analyze()}get origin(){return this[Internal].url.origin}get pathname(){return this[Internal].url.pathname}set pathname(value){this[Internal].url.pathname=value}get hash(){return this[Internal].url.hash}set hash(value){this[Internal].url.hash=value}get search(){return this[Internal].url.search}set search(value){this[Internal].url.search=value}get password(){return this[Internal].url.password}set password(value){this[Internal].url.password=value}get username(){return this[Internal].url.username}set username(value){this[Internal].url.username=value}get basePath(){return this[Internal].basePath}set basePath(value){this[Internal].basePath=value.startsWith("/")?value:`/${value}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new NextURL(String(this),this[Internal].options)}}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/adapters/headers.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{HeadersAdapter:function(){return HeadersAdapter},ReadonlyHeadersError:function(){return ReadonlyHeadersError}});const _reflect=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/adapters/reflect.js");class ReadonlyHeadersError extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new ReadonlyHeadersError}}class HeadersAdapter extends Headers{constructor(headers){super(),this.headers=new Proxy(headers,{get(target,prop,receiver){if("symbol"==typeof prop)return _reflect.ReflectAdapter.get(target,prop,receiver);const lowercased=prop.toLowerCase(),original=Object.keys(headers).find(o=>o.toLowerCase()===lowercased);return void 0!==original?_reflect.ReflectAdapter.get(target,original,receiver):void 0},set(target,prop,value,receiver){if("symbol"==typeof prop)return _reflect.ReflectAdapter.set(target,prop,value,receiver);const lowercased=prop.toLowerCase(),original=Object.keys(headers).find(o=>o.toLowerCase()===lowercased);return _reflect.ReflectAdapter.set(target,original??prop,value,receiver)},has(target,prop){if("symbol"==typeof prop)return _reflect.ReflectAdapter.has(target,prop);const lowercased=prop.toLowerCase(),original=Object.keys(headers).find(o=>o.toLowerCase()===lowercased);return void 0!==original&&_reflect.ReflectAdapter.has(target,original)},deleteProperty(target,prop){if("symbol"==typeof prop)return _reflect.ReflectAdapter.deleteProperty(target,prop);const lowercased=prop.toLowerCase(),original=Object.keys(headers).find(o=>o.toLowerCase()===lowercased);return void 0===original||_reflect.ReflectAdapter.deleteProperty(target,original)}})}static seal(headers){return new Proxy(headers,{get(target,prop,receiver){switch(prop){case"append":case"delete":case"set":return ReadonlyHeadersError.callable;default:return _reflect.ReflectAdapter.get(target,prop,receiver)}}})}merge(value){return Array.isArray(value)?value.join(", "):value}static from(headers){return headers instanceof Headers?headers:new HeadersAdapter(headers)}append(name,value){const existing=this.headers[name];"string"==typeof existing?this.headers[name]=[existing,value]:Array.isArray(existing)?existing.push(value):this.headers[name]=value}delete(name){delete this.headers[name]}get(name){const value=this.headers[name];return void 0!==value?this.merge(value):null}has(name){return void 0!==this.headers[name]}set(name,value){this.headers[name]=value}forEach(callbackfn,thisArg){for(const[name,value]of this.entries())callbackfn.call(thisArg,value,name,this)}*entries(){for(const key of Object.keys(this.headers)){const name=key.toLowerCase(),value=this.get(name);yield[name,value]}}*keys(){for(const key of Object.keys(this.headers)){const name=key.toLowerCase();yield name}}*values(){for(const key of Object.keys(this.headers)){const value=this.get(key);yield value}}[Symbol.iterator](){return this.entries()}}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/adapters/reflect.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ReflectAdapter",{enumerable:!0,get:function(){return ReflectAdapter}});class ReflectAdapter{static get(target,prop,receiver){const value=Reflect.get(target,prop,receiver);return"function"==typeof value?value.bind(target):value}static set(target,prop,value,receiver){return Reflect.set(target,prop,value,receiver)}static has(target,prop){return Reflect.has(target,prop)}static deleteProperty(target,prop){return Reflect.deleteProperty(target,prop)}}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/cookies.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{RequestCookies:function(){return _cookies.RequestCookies},ResponseCookies:function(){return _cookies.ResponseCookies},stringifyCookie:function(){return _cookies.stringifyCookie}});const _cookies=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/compiled/@edge-runtime/cookies/index.js")},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/image-response.js":(__unused_webpack_module,exports)=>{"use strict";function ImageResponse(){throw Object.defineProperty(new Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}Object.defineProperty(exports,"f",{enumerable:!0,get:function(){return ImageResponse}})},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/request.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{INTERNALS:function(){return INTERNALS},NextRequest:function(){return NextRequest}});const _nexturl=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/next-url.js"),_utils=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/utils.js"),_error=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/error.js"),_cookies=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/cookies.js"),INTERNALS=Symbol("internal request");class NextRequest extends Request{constructor(input,init={}){const url="string"!=typeof input&&"url"in input?input.url:String(input);(0,_utils.validateURL)(url),"edge"!==process.env.NEXT_RUNTIME&&init.body&&"half"!==init.duplex&&(init.duplex="half"),input instanceof Request?super(input,init):super(url,init);const nextUrl=new _nexturl.NextURL(url,{headers:(0,_utils.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:init.nextConfig});this[INTERNALS]={cookies:new _cookies.RequestCookies(this.headers),nextUrl,url:process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE?url:nextUrl.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[INTERNALS].cookies}get nextUrl(){return this[INTERNALS].nextUrl}get page(){throw new _error.RemovedPageError}get ua(){throw new _error.RemovedUAError}get url(){return this[INTERNALS].url}}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/response.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"R",{enumerable:!0,get:function(){return NextResponse}});const _cookies=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/cookies.js"),_nexturl=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/next-url.js"),_utils=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/utils.js"),_reflect=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/adapters/reflect.js"),_cookies1=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/cookies.js"),INTERNALS=Symbol("internal response"),REDIRECTS=new Set([301,302,303,307,308]);function handleMiddlewareField(init,headers){var _init_request;if(null==init||null==(_init_request=init.request)?void 0:_init_request.headers){if(!(init.request.headers instanceof Headers))throw Object.defineProperty(new Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});const keys=[];for(const[key,value]of init.request.headers)headers.set("x-middleware-request-"+key,value),keys.push(key);headers.set("x-middleware-override-headers",keys.join(","))}}class NextResponse extends Response{constructor(body,init={}){super(body,init);const headers=this.headers,cookies=new _cookies1.ResponseCookies(headers),cookiesProxy=new Proxy(cookies,{get(target,prop,receiver){switch(prop){case"delete":case"set":return(...args)=>{const result=Reflect.apply(target[prop],target,args),newHeaders=new Headers(headers);return result instanceof _cookies1.ResponseCookies&&headers.set("x-middleware-set-cookie",result.getAll().map(cookie=>(0,_cookies.stringifyCookie)(cookie)).join(",")),handleMiddlewareField(init,newHeaders),result};default:return _reflect.ReflectAdapter.get(target,prop,receiver)}}});this[INTERNALS]={cookies:cookiesProxy,url:init.url?new _nexturl.NextURL(init.url,{headers:(0,_utils.toNodeOutgoingHttpHeaders)(headers),nextConfig:init.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[INTERNALS].cookies}static json(body,init){const response=Response.json(body,init);return new NextResponse(response.body,response)}static redirect(url,init){const status="number"==typeof init?init:(null==init?void 0:init.status)??307;if(!REDIRECTS.has(status))throw Object.defineProperty(new RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});const initObj="object"==typeof init?init:{},headers=new Headers(null==initObj?void 0:initObj.headers);return headers.set("Location",(0,_utils.validateURL)(url)),new NextResponse(null,{...initObj,headers,status})}static rewrite(destination,init){const headers=new Headers(null==init?void 0:init.headers);return headers.set("x-middleware-rewrite",(0,_utils.validateURL)(destination)),handleMiddlewareField(init,headers),new NextResponse(null,{...init,headers})}static next(init){const headers=new Headers(null==init?void 0:init.headers);return headers.set("x-middleware-next","1"),handleMiddlewareField(init,headers),new NextResponse(null,{...init,headers})}}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/url-pattern.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"I",{enumerable:!0,get:function(){return GlobalURLPattern}});const GlobalURLPattern="undefined"==typeof URLPattern?void 0:URLPattern},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/user-agent.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{isBot:function(){return isBot},userAgent:function(){return userAgent},userAgentFromString:function(){return userAgentFromString}});const _uaparserjs=_interop_require_default(__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/compiled/ua-parser-js/ua-parser.js"));function _interop_require_default(obj){return obj&&obj.__esModule?obj:{default:obj}}function isBot(input){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(input)}function userAgentFromString(input){return{...(0,_uaparserjs.default)(input),isBot:void 0!==input&&isBot(input)}}function userAgent({headers}){return userAgentFromString(headers.get("user-agent")||void 0)}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/utils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{fromNodeOutgoingHttpHeaders:function(){return fromNodeOutgoingHttpHeaders},normalizeNextQueryParam:function(){return normalizeNextQueryParam},splitCookiesString:function(){return splitCookiesString},toNodeOutgoingHttpHeaders:function(){return toNodeOutgoingHttpHeaders},validateURL:function(){return validateURL}});const _constants=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/lib/constants.js");function fromNodeOutgoingHttpHeaders(nodeHeaders){const headers=new Headers;for(let[key,value]of Object.entries(nodeHeaders)){const values=Array.isArray(value)?value:[value];for(let v of values)void 0!==v&&("number"==typeof v&&(v=v.toString()),headers.append(key,v))}return headers}function splitCookiesString(cookiesString){var start,ch,lastComma,nextStart,cookiesSeparatorFound,cookiesStrings=[],pos=0;function skipWhitespace(){for(;pos<cookiesString.length&&/\s/.test(cookiesString.charAt(pos));)pos+=1;return pos<cookiesString.length}function notSpecialChar(){return"="!==(ch=cookiesString.charAt(pos))&&";"!==ch&&","!==ch}for(;pos<cookiesString.length;){for(start=pos,cookiesSeparatorFound=!1;skipWhitespace();)if(","===(ch=cookiesString.charAt(pos))){for(lastComma=pos,pos+=1,skipWhitespace(),nextStart=pos;pos<cookiesString.length&&notSpecialChar();)pos+=1;pos<cookiesString.length&&"="===cookiesString.charAt(pos)?(cookiesSeparatorFound=!0,pos=nextStart,cookiesStrings.push(cookiesString.substring(start,lastComma)),start=pos):pos=lastComma+1}else pos+=1;(!cookiesSeparatorFound||pos>=cookiesString.length)&&cookiesStrings.push(cookiesString.substring(start,cookiesString.length))}return cookiesStrings}function toNodeOutgoingHttpHeaders(headers){const nodeHeaders={},cookies=[];if(headers)for(const[key,value]of headers.entries())"set-cookie"===key.toLowerCase()?(cookies.push(...splitCookiesString(value)),nodeHeaders[key]=1===cookies.length?cookies[0]:cookies):nodeHeaders[key]=value;return nodeHeaders}function validateURL(url){try{return String(new URL(String(url)))}catch(error){throw Object.defineProperty(new Error(`URL is malformed "${String(url)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:error}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}function normalizeNextQueryParam(key){const prefixes=[_constants.NEXT_QUERY_PARAM_PREFIX,_constants.NEXT_INTERCEPTION_MARKER_PREFIX];for(const prefix of prefixes)if(key!==prefix&&key.startsWith(prefix))return key.substring(prefix.length);return null}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/shared/lib/get-hostname.js":(__unused_webpack_module,exports)=>{"use strict";function getHostname(parsed,headers){let hostname;if((null==headers?void 0:headers.host)&&!Array.isArray(headers.host))hostname=headers.host.toString().split(":",1)[0];else{if(!parsed.hostname)return;hostname=parsed.hostname}return hostname.toLowerCase()}Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"getHostname",{enumerable:!0,get:function(){return getHostname}})},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/shared/lib/invariant-error.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"InvariantError",{enumerable:!0,get:function(){return InvariantError}});class InvariantError extends Error{constructor(message,options){super("Invariant: "+(message.endsWith(".")?message:message+".")+" This is a bug in Next.js.",options),this.name="InvariantError"}}},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/shared/lib/utils/reflect-utils.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),function _export(target,all){for(var name in all)Object.defineProperty(target,name,{enumerable:!0,get:all[name]})}(exports,{describeHasCheckingStringProperty:function(){return describeHasCheckingStringProperty},describeStringPropertyAccess:function(){return describeStringPropertyAccess},wellKnownProperties:function(){return wellKnownProperties}});const isDefinitelyAValidIdentifier=/^[A-Za-z_$][A-Za-z0-9_$]*$/;function describeStringPropertyAccess(target,prop){return isDefinitelyAValidIdentifier.test(prop)?"`"+target+"."+prop+"`":"`"+target+"["+JSON.stringify(prop)+"]`"}function describeHasCheckingStringProperty(target,prop){const stringifiedProp=JSON.stringify(prop);return"`Reflect.has("+target+", "+stringifiedProp+")`, `"+stringifiedProp+" in "+target+"`, or similar"}const wellKnownProperties=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","then","catch","finally","status","displayName","toJSON","$$typeof","__esModule"])},"./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/server.js":(module,exports,__webpack_require__)=>{const serverExports={NextRequest:__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/request.js").NextRequest,NextResponse:__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/response.js").R,ImageResponse:__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/image-response.js").f,userAgentFromString:__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/user-agent.js").userAgentFromString,userAgent:__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/user-agent.js").userAgent,URLPattern:__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/web/spec-extension/url-pattern.js").I,after:__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/after/index.js").after,connection:__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/request/connection.js").F,unstable_rootParams:__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/server/request/root-params.js").c};module.exports=serverExports,exports.NextRequest=serverExports.NextRequest,exports.NextResponse=serverExports.NextResponse,exports.ImageResponse=serverExports.ImageResponse,exports.userAgentFromString=serverExports.userAgentFromString,exports.userAgent=serverExports.userAgent,exports.URLPattern=serverExports.URLPattern,exports.after=serverExports.after,exports.connection=serverExports.connection,exports.unstable_rootParams=serverExports.unstable_rootParams},"./node_modules/.pnpm/react-toastify@11.0.5_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/react-toastify/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{oR:()=>y});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/next@15.3.4_@babel+core@7.28.0_@opentelemetry+api@1.9.0_@playwright+test@1.55.0_react-dom@19._3uwpgkcpjcjexe2xbvnxjxsfd4/node_modules/next/dist/compiled/react/index.js");!function Mt(t){if(!t||"undefined"==typeof document)return;let o=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",o.firstChild?o.insertBefore(e,o.firstChild):o.appendChild(e),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var L=t=>"number"==typeof t&&!isNaN(t),N=t=>"string"==typeof t,P=t=>"function"==typeof t,z=t=>(0,react__WEBPACK_IMPORTED_MODULE_0__.isValidElement)(t)||N(t)||P(t)||L(t);function $({enter:t,exit:o,appendPosition:e=!1,collapse:r=!0,collapseDuration:s=300}){return function({children:a,position:d,preventExitTransition:c,done:T,nodeRef:g,isIn:v,playToast:x}){let C=e?`${t}--${d}`:t,S=e?`${o}--${d}`:o,E=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)(()=>{let f=g.current,p=C.split(" "),b=n=>{n.target===g.current&&(x(),f.removeEventListener("animationend",b),f.removeEventListener("animationcancel",b),0===E.current&&"animationcancel"!==n.type&&f.classList.remove(...p))};f.classList.add(...p),f.addEventListener("animationend",b),f.addEventListener("animationcancel",b)},[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{let f=g.current,p=()=>{f.removeEventListener("animationend",p),r?function Z(t,o,e=300){let{scrollHeight:r,style:s}=t;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${e}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(o,e)})})}(f,T,s):T()};v||(c?p():(E.current=1,f.className+=` ${S}`,f.addEventListener("animationend",p)))},[v]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,a)}}var Xt=1,at=()=>""+Xt++;var I=new Map,F=[],st=new Set,bt=()=>I.size>0;function X(t,o){var r;if(o)return!(null==(r=I.get(o))||!r.isToastActive(t));let e=!1;return I.forEach(s=>{s.isToastActive(t)&&(e=!0)}),e}function ht(t){if(bt()){if(null==t||(t=>N(t)||L(t))(t))I.forEach(o=>{o.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let o=I.get(t.containerId);o?o.removeToast(t.id):I.forEach(e=>{e.removeToast(t.id)})}}else F=F.filter(o=>null!=t&&o.options.toastId!==t)}function nt(t,o){z(t)&&(bt()||F.push({content:t,options:o}),I.forEach(e=>{e.buildToast(t,o)}))}function rt(t,o){I.forEach(e=>{(null==o||null==o||!o.containerId||(null==o?void 0:o.containerId)===e.id)&&e.toggle(t,null==o?void 0:o.id)})}function Wt(t){return t&&(N(t.toastId)||L(t.toastId))?t.toastId:at()}function U(t,o){return nt(t,o),o.toastId}function V(t,o){return{...o,type:o&&o.type||t,toastId:Wt(o)}}function Q(t){return(o,e)=>U(o,V(t,e))}function y(t,o){return U(t,V("default",o))}y.loading=(t,o)=>U(t,V("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...o})),y.promise=function Gt(t,{pending:o,error:e,success:r},s){let l;o&&(l=N(o)?y.loading(o,s):y.loading(o.render,{...s,...o}));let a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},d=(T,g,v)=>{if(null==g)return void y.dismiss(l);let x={type:T,...a,...s,data:v},C=N(g)?{render:g}:g;return l?y.update(l,{...x,...C}):y(C.render,{...x,...C}),v},c=P(t)?t():t;return c.then(T=>d("success",r,T)).catch(T=>d("error",e,T)),c},y.success=Q("success"),y.info=Q("info"),y.error=Q("error"),y.warning=Q("warning"),y.warn=y.warning,y.dark=(t,o)=>U(t,V("default",{theme:"dark",...o})),y.dismiss=function qt(t){ht(t)},y.clearWaitingQueue=(t={})=>{I.forEach(o=>{o.props.limit&&(!t.containerId||o.id===t.containerId)&&o.clearQueue()})},y.isActive=X,y.update=(t,o={})=>{let e=((t,{containerId:o})=>{var e;return null==(e=I.get(o||1))?void 0:e.toasts.get(t)})(t,o);if(e){let{props:r,content:s}=e,l={delay:100,...r,...o,toastId:o.toastId||t,updateId:at()};l.toastId!==t&&(l.staleId=t);let a=l.render||s;delete l.render,U(a,l)}},y.done=t=>{y.update(t,{progress:1})},y.onChange=function Pt(t){return st.add(t),()=>{st.delete(t)}},y.play=t=>rt(!0,t),y.pause=t=>rt(!1,t);"undefined"!=typeof window?react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect:react__WEBPACK_IMPORTED_MODULE_0__.useEffect;var K=(t,o=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:o});$(K("bounce",!0)),$(K("slide",!0)),$(K("zoom")),$(K("flip"))}}]);